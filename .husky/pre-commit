#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# consulting-dashboard-newãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®Lintãƒã‚§ãƒƒã‚¯
cd consulting-dashboard-new

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã†ã¡ã€consulting-dashboard-newå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
staged_files=$(git diff --cached --name-only | grep "^consulting-dashboard-new/" | sed 's|^consulting-dashboard-new/||')

if [ -n "$staged_files" ]; then
    echo "ğŸ” Lintãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
    
    # lint-stagedã‚’å®Ÿè¡Œ
    npx lint-staged
    
    if [ $? -ne 0 ]; then
        echo "âŒ Lintã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ã‹ã‚‰å†åº¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚"
        exit 1
    fi
    
    echo "âœ… Lintãƒã‚§ãƒƒã‚¯å®Œäº†"
fi