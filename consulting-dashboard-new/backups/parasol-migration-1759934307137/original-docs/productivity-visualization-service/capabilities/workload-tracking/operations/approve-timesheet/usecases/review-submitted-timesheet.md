# ユースケース: 申請タイムシートをレビューする

## 基本情報
- **ユースケースID**: UC-PVS-002-002
- **アクター**: マネージャー、PM、人事担当者、承認権限者
- **概要**: 申請されたタイムシートの内容を詳細にレビューし、承認・差戻し判断の根拠となる情報を収集・分析する

## 事前条件
- 承認権限を持つユーザーがログインしている
- 承認待ちのタイムシート申請が存在している
- 申請者のタイムシートデータが完全に記録されている
- 承認依頼通知を受信している

## 事後条件
### 成功時
- タイムシート内容が詳細レビューされている
- レビュー結果・判断根拠が記録されている
- 承認・差戻しの意思決定が準備されている
- レビュー完了ステータスが更新されている

### 失敗時
- レビュー未完了状態が保持されている
- 不明点・疑問点が記録されている
- 追加情報収集の必要性が明確化されている

## 基本フロー
1. 承認者が承認待ちタイムシート一覧画面にアクセスする
2. システムが承認待ちタイムシート申請一覧を表示する
3. 承認者がレビュー対象のタイムシート申請を選択する
4. システムがタイムシート詳細・申請者情報・申請コメントを表示する
5. 承認者がタイムシート内容の妥当性を確認する
6. 承認者がプロジェクト配分・工数合計・作業内容を検証する
7. 承認者が過去実績・基準値・他メンバーとの比較を実施する
8. 承認者が疑問点・確認事項をメモ・記録する
9. 承認者がレビュー結果・判断根拠をシステムに入力する
10. システムがレビュー完了状況を記録・更新する
11. システムがレビュー完了を申請者・関係者に通知する

## 代替フロー
### 代替フロー1: 一括レビュー
- 3a. 複数申請を効率的にレビューする場合
  - 3a1. 承認者が一括レビューモードを選択する
  - 3a2. システムが申請一覧・概要・異常値を並列表示
  - 3a3. 承認者が各申請の要点・問題点を迅速に確認
  - 3a4. 基本フロー8に戻る

### 代替フロー2: 詳細分析・比較
- 7a. より詳細な分析・比較が必要な場合
  - 7a1. 承認者が分析・比較機能ボタンを押下
  - 7a2. システムが過去3ヶ月実績・チーム平均・業界ベンチマークを表示
  - 7a3. 承認者が統計的・客観的な妥当性を評価・分析
  - 7a4. 基本フロー8に戻る

### 代替フロー3: 申請者への質問・確認
- 8a. 申請内容に疑問・不明点がある場合
  - 8a1. 承認者が「申請者に質問」ボタンを押下
  - 8a2. システムが質問・確認事項入力フォームを表示
  - 8a3. 承認者が具体的な質問・確認内容を入力・送信
  - 8a4. システムが申請者に質問通知・回答依頼を送信
  - 8a5. 申請者回答受信後、基本フロー4から再レビュー

## 例外フロー
### 例外1: データ不備・不足
- 5a. タイムシートデータに不備・不足がある場合
  - 5a1. システムが「データ不備検出」アラート・詳細を表示
  - 5a2. 不備内容・修正必要箇所・重要度を具体的に示す
  - 5a3. 承認者が「差戻し理由」として不備内容を記録
  - 5a4. 即座差戻し または 申請者確認後の判断を選択

### 例外2: 承認権限・範囲外
- 4a. 承認権限外・範囲外の申請の場合
  - 4a1. システムが「権限外申請」警告・転送先候補を表示
  - 4a2. 適切な承認者・部門・役職の候補を自動推薦
  - 4a3. 承認者が転送先を選択・転送理由を入力
  - 4a4. システムが適切な承認者に申請を転送・通知

### 例外3: システム障害・データアクセス不可
- 4a. システム障害・データアクセスできない場合
  - 4a1. システムが「一時的アクセス不可」メッセージを表示
  - 4a2. 復旧予定・代替手段・緊急連絡先を案内
  - 4a3. 障害情報・申請者への影響・対応状況を記録
  - 4a4. 復旧後、自動リマインド・レビュー再開を実行

## 特別要件
### レビュー品質・客観性要件
- 一貫性：レビュー基準・判断軸・評価方法の統一・標準化・公正性
- 客観性：個人的偏見・主観的判断の排除・データ根拠・透明性確保
- 効率性：迅速・正確なレビュー・判断・処理・ボトルネック解消
- 記録性：レビュー過程・判断根拠・疑問点・決定理由の完全記録

### データ分析・支援機能要件
- 自動検証：システムによる基本的妥当性・異常値・パターン検知・警告
- 比較分析：過去実績・チーム平均・基準値との比較・偏差・トレンド分析
- 推奨判断：AI・ルールベースによる承認・差戻し推奨・根拠・信頼度
- アラート：重要な問題・異常・注意点の自動検出・強調・優先表示

### コミュニケーション・連携要件
- 双方向連絡：承認者・申請者間の質問・回答・確認・合意形成支援
- 透明性：レビュー過程・判断基準・結果理由の申請者・関係者への開示
- エスカレーション：困難判断・権限外事案の上位者・専門部署への連携
- 履歴共有：過去レビュー・判断・傾向の承認者間共有・学習・標準化

## 関連ユースケース
### 包含関係
- タイムシートデータ分析を実行する
- 妥当性検証を実行する
- レビュー結果を記録する
- 通知・コミュニケーションを実行する

### 拡張関係
- 承認・差戻しを実行する（レビュー後の判断・決定ユースケース）
- 承認ワークフローを管理する（レビューを含む全体プロセス管理）
- タイムシートを承認申請する（申請者視点・レビュー前ユースケース）

### 汎化関係
- ワークフロー承認を実行する（上位概念）

## ビジネスルール
### レビュー基準・判定ルール
- 工数妥当性：作業内容・難易度・経験・標準時間との整合性・妥当性
- 配分合理性：プロジェクト間配分・優先度・契約・予算との整合性
- 時間制限：日・週・月単位の時間制限・法的制約・健康配慮の遵守
- 品質基準：作業品質・成果物・顧客満足度との工数・効率性の整合性

### 承認・差戻し判断ルール
- 承認条件：全項目適合・妥当性確認・品質基準達成・異常なしの確認
- 差戻し条件：重要不備・妥当性疑問・基準逸脱・修正必要の明確化
- 保留・継続調査：情報不足・判断困難・追加確認・専門家相談の必要性
- 例外・特別承認：緊急性・特殊事情・上位承認・特別手続きの適用

### レビュー期限・優先度ルール
- 標準期限：申請から3営業日以内のレビュー完了・判断・通知
- 緊急案件：当日・翌日レビュー・緊急承認・特別対応・優先処理
- 複雑案件：7営業日以内・追加調査・専門家相談・詳細分析の許可
- エスカレーション：期限超過・判断困難時の自動上位者・専門部署連携

## データ要件
### 入力データ
- 申請タイムシート：申請ID・期間・工数・プロジェクト配分・作業内容
- 申請者情報：ID・氏名・所属・役職・経験・スキル・過去実績
- 申請コメント：申請理由・特記事項・背景・承認者への説明・依頼
- レビュー基準：承認基準・判定ルール・比較データ・ベンチマーク

### 出力データ
- レビュー結果：承認推奨・差戻し推奨・保留・詳細調査・判断根拠
- 検証内容：妥当性確認・異常検知・比較分析・品質評価・リスク評価
- コメント・所見：承認者コメント・疑問点・改善提案・注意事項
- レビュー履歴：レビュー日時・担当者・所要時間・判断過程・結果

## 成功指標
- レビュー精度：適切な承認・差戻し判断率95%以上・誤判断率3%以下
- レビュー効率：平均レビュー時間10分以内・期限内完了率98%以上
- コミュニケーション品質：申請者・承認者間の理解・合意・満足度向上
- プロセス改善：レビュー品質・効率・客観性・公正性の継続改善・進化
- 組織価値：正確・公正・効率的なレビューによる組織信頼・生産性・品質向上