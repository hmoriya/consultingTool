# ページ定義: タスク依存関係定義画面

## 画面の目的
WBSで分解されたタスク間の依存関係を正確に定義し、実行順序と制約条件を明確化してプロジェクトの円滑な進行を支援する

## 利用者
- **PM**: 依存関係の全体設計・承認・調整・最適化
- **プロジェクトプランナー**: 論理的な依存関係設計・検証・最適化
- **コンサルタント**: 担当領域のタスク依存関係詳細化・実現可能性確認
- **技術専門家**: 技術的制約・依存条件の定義・検証

## 画面構成

### ヘッダー部
- プロジェクト基本情報・WBS全体構造・タスク総数
- 依存関係定義進捗・完了数・未定義数・検証状況
- 循環依存・制約矛盾の検出状況・警告
- 関係者・レビュー状況・承認ステータス

### WBS全体表示部
- **階層構造表示**:
  - WBS全体のツリー構造・階層レベル
  - タスク間の依存関係をビジュアル表示
  - 依存関係の定義状況・完成度・品質
- **タスク選択**:
  - 依存関係定義対象タスクの選択
  - 関連タスクの自動表示・推奨
  - 定義済み・未定義タスクの区別表示

### 依存関係マトリクス部
- **依存マトリクス**:
  - タスク間の依存関係をマトリクス形式で表示
  - 先行タスク・後続タスクの関係性可視化
  - 依存の種類・強度・制約条件の表示
- **関係性分析**:
  - 循環依存の検出・警告・解決案提示
  - クリティカルパスの自動特定・表示
  - 依存関係の複雑度・リスク評価

### 依存関係詳細定義部
- **依存の種類**:
  - FS（終了-開始）・SS（開始-開始）・FF（終了-終了）・SF（開始-終了）
  - 各依存タイプの特徴・制約・適用条件
  - 業務上の意味・実行条件・影響範囲
- **制約条件**:
  - リードタイム・ラグタイム・待機時間
  - 必要なリソース・スキル・環境条件
  - 外部依存・承認・調達等の制約

### ネットワーク図表示部
- **視覚的表現**:
  - タスクネットワーク図・フローチャート
  - クリティカルパスの強調表示
  - 依存関係の種類別色分け・線種分け
- **対話的操作**:
  - ノード選択・移動・関係線描画
  - ズーム・パン・フィルタリング機能
  - 自動レイアウト・手動調整の併用

### 制約・リスク分析部
- **制約分析**:
  - リソース制約・時間制約・技術制約
  - 外部依存・承認プロセス・調達制約
  - 制約違反の検出・影響分析・対策案
- **リスク評価**:
  - 依存関係によるリスク・遅延可能性
  - 単一障害点・ボトルネック・脆弱性
  - リスク軽減策・代替案・回避策

### 最適化支援部
- **自動最適化**:
  - 依存関係の最適化案・効率化提案
  - 並行実行可能性の分析・提案
  - クリティカルパス短縮・リソース平準化
- **シミュレーション**:
  - 変更による影響のシミュレーション
  - スケジュール・リソースへの影響予測
  - 複数シナリオの比較・評価

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| 依存関係マトリクス | マトリクス表示 | ○ | 全タスク間の依存関係 |
| ネットワーク図 | グラフ表示 | ○ | タスクの依存関係ネットワーク |
| クリティカルパス | 強調表示 | ○ | 最重要な実行経路 |
| 制約条件一覧 | リスト表示 | ○ | 各依存関係の制約詳細 |
| 循環依存検出 | 警告表示 | ○ | 論理的矛盾の検出結果 |
| 最適化提案 | 推奨案表示 | × | システム推奨の改善案 |

### データの更新頻度
- **依存関係**: 定義・変更時にリアルタイム更新
- **制約分析**: 依存関係変更時に自動再計算
- **最適化提案**: 構造変更時に自動生成

## 入力項目

### 依存関係基本定義
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 先行タスク | 単一選択 | ○ | 既存タスク | 依存関係の起点タスク |
| 後続タスク | 単一選択 | ○ | 既存タスク | 依存関係の終点タスク |
| 依存種別 | 単一選択 | ○ | FS/SS/FF/SF | 依存関係のタイプ |
| 制約強度 | 単一選択 | ○ | 必須/推奨/参考 | 依存関係の重要度 |

### 制約条件詳細
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| リードタイム | 数値入力 | × | 0以上の数値 | 必要な間隔時間（時間） |
| 制約理由 | テキストエリア | ○ | 最大1000文字 | 依存関係の業務的理由 |
| 回避策 | テキストエリア | × | 最大800文字 | 制約回避の代替手段 |
| 影響範囲 | 複数選択 | × | タスクリスト | 影響を受ける関連タスク |

## アクション・操作

### 主要アクション
- **依存関係定義**: タスク間の依存関係の新規作成・編集
- **循環依存チェック**: 論理的矛盾の自動検出・警告
- **クリティカルパス算出**: 最重要実行経路の自動計算・表示
- **依存関係承認**: 定義した依存関係の確定・承認

### 副次アクション
- **最適化実行**: 依存関係の効率化・並行度向上提案
- **シミュレーション**: 変更による影響の事前評価
- **テンプレート適用**: 標準的な依存パターンの適用
- **エクスポート**: 依存関係図・データの外部出力

## 画面の振る舞い

### ユーザー操作への反応
- **タスク選択時**: 自動的に関連タスク・推奨依存関係を表示
- **依存関係定義時**: リアルタイムで循環依存・制約違反をチェック
- **マトリクス操作時**: 即座にネットワーク図に反映・更新
- **制約入力時**: 自動的に影響範囲・リスクを分析・表示

### 条件による表示変更
- **循環依存検出時**: 警告表示・該当箇所の強調・解決案提示
- **制約違反時**: エラー表示・制約内容の明示・修正案内
- **クリティカルパス変更時**: 新パスの強調・影響度の再計算

## 画面遷移

### 遷移元画面
- タスク詳細定義画面: タスク詳細確定後の依存関係設定時
- WBS作成画面: WBS構造確定後の依存関係詳細化時
- プロジェクト計画画面: 全体計画における依存関係設計時

### 遷移先画面
- 工数見積画面: 依存関係確定後の詳細工数算出時
- スケジュール作成画面: 依存関係完了後のスケジューリング時
- リスク分析画面: 依存リスク特定後の詳細リスク評価時

## エラーハンドリング
- **循環依存エラー**: 循環検出時の該当箇所特定・解決手順案内
- **制約矛盾エラー**: 制約間の論理的矛盾時の調整方法案内
- **複雑度過大エラー**: 依存関係が複雑すぎる場合の単純化案内
- **データ整合性エラー**: タスク変更時の依存関係整合性維持

## アクセシビリティ要件
- キーボードナビゲーション対応（Tab移動での依存関係定義）
- スクリーンリーダー対応（マトリクス・ネットワーク図の音声案内）
- 高コントラストモード対応（依存線・ノードの明確な視認性）

## レスポンシブ対応
- **デスクトップ**: 3ペイン表示（マトリクス・ネットワーク・詳細設定）
- **タブレット**: 2ペイン表示でタブ切り替え対応
- **モバイル**: リスト形式での依存関係表示・編集

## 依存関係品質の保証
- **論理的整合性**: 循環依存・矛盾の完全排除
- **実現可能性**: 現実的で実行可能な依存条件設定
- **最適性**: 効率的で並行度の高い依存構造
- **追跡可能性**: 依存理由・制約根拠の明確な記録