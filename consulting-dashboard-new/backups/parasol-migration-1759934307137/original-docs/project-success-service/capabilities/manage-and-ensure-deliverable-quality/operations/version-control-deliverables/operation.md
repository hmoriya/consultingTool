# ビジネスオペレーション: 成果物をバージョン管理する

**バージョン**: 1.0.0
**更新日**: 2024-12-30

## 概要

**目的**: 成果物の変更履歴を記録し、任意の時点に戻せるようにする

**パターン**: CRUD

**ゴール**: すべての成果物の変更が追跡可能で、過去バージョンへのアクセスが可能

## 関係者とロール

- **PM**: バージョン管理ルール策定、バージョン管理方針の決定
- **全メンバー**: バージョン管理ルール遵守、変更履歴の記録
- **コンサルタント**: 成果物の更新、バージョンの保存

## プロセスフロー

> **重要**: プロセスフローは必ず番号付きリスト形式で記述してください。
> Mermaid形式は使用せず、テキスト形式で記述することで、代替フローと例外フローが視覚的に分離されたフローチャートが自動生成されます。

1. システムが成果物更新を処理する
2. システムが変更内容記録を処理する
3. システムが新バージョン保存を処理する
4. システムが変更通知を行う
5. システムが履歴記録を処理する

## 代替フロー

### 代替フロー1: 情報不備
- 2-1. システムが情報の不備を検知する
- 2-2. システムが修正要求を送信する
- 2-3. ユーザーが情報を修正し再実行する
- 2-4. 基本フロー2に戻る

## 例外処理

### 例外1: システムエラー
- システムエラーが発生した場合
- エラーメッセージを表示する
- 管理者に通知し、ログに記録する

### 例外2: 承認却下
- 承認が却下された場合
- 却下理由をユーザーに通知する
- 修正後の再実行を促す

## ビジネス状態

バージョンは以下の状態を持ちます：

- **Draft（ドラフト）**: 作成中、非公式版（0.x）
- **Released（リリース済み）**: 正式版、配布可能（1.0, 2.0）
- **Deprecated（非推奨）**: 古いバージョン、使用非推奨
- **Archived（アーカイブ）**: 履歴保存のみ

## KPI

- **バージョン管理率**: 100%の成果物がバージョン管理される
- **変更履歴記録率**: 100%の変更に履歴が記録される
- **ロールバック成功率**: 100%（過去バージョンへの復元が成功）
- **命名規則遵守率**: 95%以上のファイルが命名規則に従う
- **最新バージョン利用率**: 80%以上のメンバーが最新版を使用

## ビジネスルール

- バージョン番号は「メジャー.マイナー.パッチ」形式を使用（例: 2.1.3）
  - **メジャー**: 大きな変更、互換性なし（1.x → 2.0）
  - **マイナー**: 機能追加、互換性あり（2.0 → 2.1）
  - **パッチ**: バグ修正、軽微な修正（2.1.0 → 2.1.1）
- ドラフト版は0.xで管理（例: 0.1, 0.2）
- 正式版は1.0からスタート
- すべての変更に変更理由を記録すること
- 重要な成果物はGit/SVN等のバージョン管理システムを使用
- ファイル名に日付やバージョン番号を含めないこと（システムで管理）

## 入出力仕様

### 入力

- **更新された成果物**: 変更が加えられた成果物
- **変更内容**: 何を変更したかの説明
- **変更理由**: なぜ変更したかの説明
- **前バージョン**: 変更前の成果物

### 出力

- **新バージョン**: バージョン番号が付与された成果物
- **変更履歴**: 変更日時、変更者、変更内容の記録
- **バージョンリスト**: すべてのバージョンの一覧
- **差分レポート**: 前バージョンとの差異（必要に応じて）
- **変更通知**: 関係者への変更通知メール/メッセージ

## 例外処理

- **バージョン番号の誤り**: 修正、正しい番号での再保存
- **変更履歴の記録漏れ**: 後から追記、今後の注意喚起
- **複数人による同時編集**: コンフリクト解決、マージ実施
- **ストレージ容量不足**: 古いバージョンのアーカイブ、クラウド移行
- **バージョン管理システム障害**: 一時的にローカル保存、復旧後に同期

## 派生ユースケース

このビジネスオペレーションから以下のユースケースが派生します：

1. 新バージョンを保存する
2. 変更履歴を表示する
3. 過去バージョンを復元する
4. バージョン差分を比較する