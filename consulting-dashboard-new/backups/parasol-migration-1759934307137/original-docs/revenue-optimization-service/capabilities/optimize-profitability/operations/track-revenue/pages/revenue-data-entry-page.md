# ページ定義: 収益データ入力ページ

## 画面の目的
収益データの正確・効率的・包括的な入力・編集・承認を実現し、データ品質確保・業務効率化・コンプライアンス準拠・監査対応を支援する専用入力システム

## 利用者
- **財務担当者**: 日常的な収益データ入力・更新・管理・品質確保・期限管理・効率化
- **経理担当者**: 会計処理・税務処理・監査対応・コンプライアンス・正確性確保・検証
- **プロジェクトマネージャー**: プロジェクト収益・進捗・実績・予測・報告・管理・最適化
- **承認者**: 入力データ・重要変更・高額取引の承認・検証・品質管理・統制・責任

## 画面構成

### ヘッダー部
- 収益データ入力・現在の入力モード表示（新規・編集・複製・一括）
- 保存状況表示・下書き・自動保存・最終保存日時・変更履歴
- 承認状況・承認者・承認待ち・差し戻し・コメント・エスカレーション
- アクションボタン（保存・送信・承認依頼・キャンセル・ヘルプ）

### メインコンテンツ部（入力フォーム）

#### 1. 基本情報セクション
- **収益ID**: 自動生成・表示のみ・履歴追跡・参照番号・ユニーク識別
- **入力日時**: 現在日時・自動設定・変更可能・タイムスタンプ・監査証跡
- **入力者情報**: ログインユーザー・自動設定・権限確認・責任明確化
- **収益発生日**: 必須・カレンダー選択・期間検証・会計期間確認・妥当性チェック

#### 2. 収益詳細セクション
- **収益金額**: 必須・数値入力・通貨選択・桁区切り・範囲検証・妥当性確認
- **収益種別**: 必須・プルダウン選択・カテゴリ分類・税務分類・会計処理区分
- **プロジェクト**: 必須・検索選択・進行中プロジェクト・権限確認・関連性検証
- **顧客情報**: 必須・検索選択・顧客マスタ連携・契約確認・信用状況・履歴

#### 3. 契約・根拠セクション
- **契約番号**: 必須・検索選択・契約マスタ連携・有効性確認・条件確認
- **請求書番号**: 任意・関連請求書・発行状況・入金予定・回収状況
- **根拠資料**: 必須・ファイル添付・証憑・契約書・発注書・承認書・監査対応
- **備考・詳細**: 任意・テキスト入力・特記事項・注意点・補足情報・記録

#### 4. 分類・配分セクション
- **部門配分**: 必須・複数部門対応・配分比率・合計100%検証・責任分担
- **費用センター**: 必須・管理会計・コスト配分・予算管理・業績評価
- **サービス分類**: 必須・サービス種別・製品・カテゴリ・市場・競合分析
- **地域・市場**: 任意・地域分類・市場セグメント・戦略・分析・レポート

#### 5. 税務・会計セクション
- **税区分**: 必須・課税・非課税・免税・軽減税率・税率・計算・申告
- **会計処理**: 必須・売上認識・繰延・前受・未収・発生主義・現金主義
- **消費税額**: 自動計算・税率適用・端数処理・税務処理・申告・納税
- **外貨情報**: 任意・外貨金額・為替レート・換算・差損益・ヘッジ・リスク

#### 6. 承認・ワークフローセクション
- **承認要否**: 自動判定・金額基準・重要度・影響度・リスク・規程・統制
- **承認者**: 自動設定・権限確認・代理承認・エスカレーション・通知
- **承認期限**: 自動設定・期限管理・催促・エスカレーション・遅延対応
- **コメント**: 任意・承認者向け・理由・背景・注意点・依頼・説明

### サイドバー部（支援情報）
- **入力ガイド**: 項目説明・入力例・注意点・エラー回避・ベストプラクティス
- **関連情報**: 過去実績・類似取引・参考データ・市場情報・比較・検証
- **履歴・変更**: 過去入力・変更履歴・バージョン・差分・復元・監査証跡
- **テンプレート**: 定型入力・頻繁取引・パターン・効率化・標準化・品質

## 入力項目

### 必須入力項目
| 項目名 | 入力形式 | バリデーション | 説明 |
|--------|---------|---------------|------|
| 収益金額 | 数値・通貨 | 範囲・桁数・妥当性 | 発生収益の金額・税抜・税込選択 |
| 収益発生日 | 日付選択 | 期間・会計年度・妥当性 | 収益認識・発生の基準日・会計処理 |
| 収益種別 | 選択リスト | 必須選択・分類妥当性 | 収益の種類・分類・税務・会計区分 |
| プロジェクト | 検索選択 | 存在確認・権限・状態 | 収益発生源・プロジェクト・関連性 |
| 顧客 | 検索選択 | 存在確認・契約・信用 | 収益提供先・顧客・取引先・関係 |
| 契約番号 | 検索選択 | 存在確認・有効性・条件 | 根拠契約・取引条件・法的根拠 |

### 任意入力項目
| 項目名 | 入力形式 | バリデーション | 説明 |
|--------|---------|---------------|------|
| 請求書番号 | テキスト | 形式・重複確認 | 関連請求書・発行・入金・回収管理 |
| 備考 | テキストエリア | 文字数制限 | 特記事項・詳細・説明・注意点・記録 |
| 外貨情報 | 通貨・レート | 通貨妥当性・レート確認 | 外貨取引・為替・換算・リスク管理 |
| 地域・市場 | 選択リスト | 選択妥当性 | 地域分類・市場・戦略・分析・レポート |

## アクション・操作

### 主要アクション
- **保存・下書き**: 入力途中・一時保存・継続作業・データ保護・復元・履歴
- **入力完了・送信**: 入力完了・検証・承認依頼・ワークフロー開始・通知
- **承認依頼**: 承認必要項目・承認者通知・期限設定・エスカレーション・追跡
- **複製・テンプレート**: 類似入力・効率化・標準化・品質向上・時間短縮

### 副次アクション
- **プレビュー**: 入力内容・レイアウト・出力形式・確認・印刷・共有・保存
- **履歴確認**: 過去入力・変更履歴・バージョン・差分・復元・監査・追跡
- **添付管理**: ファイル・証憑・資料・アップロード・ダウンロード・管理
- **ヘルプ・サポート**: 操作説明・入力ガイド・エラー解決・サポート・FAQ

## 画面の振る舞い

### 入力支援機能
- **自動補完**: 過去入力・マスタデータからの候補表示・効率化・精度向上
- **自動計算**: 税額・配分・換算・合計・検証・整合性・精度・効率・信頼
- **リアルタイム検証**: 入力時・即座検証・エラー表示・修正案内・品質確保
- **関連データ表示**: 選択項目・関連情報・参考データ・履歴・比較・判断支援

### エラーハンドリング
- **入力エラー**: 必須項目・形式・範囲・妥当性エラーの即座表示・修正案内
- **整合性エラー**: データ間・関連性・論理矛盾・業務ルール違反の検知・警告
- **重複エラー**: 重複入力・類似データ・確認・統合・修正・品質・整合性
- **権限エラー**: アクセス・操作・承認権限不足の表示・権限要求・代替手段

### 自動保存・復元
- **自動保存**: 定期・項目変更時・一定間隔・データ保護・継続性・安全・信頼
- **セッション管理**: ログイン・セッション・タイムアウト・延長・保護・継続
- **復元機能**: 中断・エラー・障害時・データ復元・継続・損失防止・品質確保
- **バージョン管理**: 変更・更新・履歴・差分・復元・監査・追跡・管理・品質

## 画面遷移

### 遷移元画面
- **収益ダッシュボード**: 収益状況確認からの新規入力・更新・詳細編集への遷移
- **収益一覧**: 収益リストからの個別編集・詳細確認・修正・複製への遷移
- **プロジェクト画面**: プロジェクト収益・実績入力・更新・管理への直接遷移
- **タスク・通知**: 入力依頼・催促・承認差し戻しからの対応・修正への遷移

### 遷移先画面
- **収益確認**: 入力完了・保存後の内容確認・プレビュー・印刷・共有・承認
- **承認画面**: 承認依頼・承認者による内容確認・承認・差し戻し・コメント
- **収益一覧**: 入力完了・キャンセル後の一覧表示・検索・確認・管理・追跡
- **関連画面**: 契約・プロジェクト・顧客・請求書・関連情報の確認・参照

## バリデーション・検証

### 必須項目検証
- **入力漏れ**: 必須項目・未入力・空白・不正値の検知・エラー表示・修正案内
- **形式検証**: 数値・日付・メール・電話・形式・範囲・妥当性・精度・品質
- **業務ルール**: 会計・税務・契約・規程・ポリシー・コンプライアンス準拠・適法性
- **整合性確認**: データ間・関連・論理・業務・時系列・因果関係・妥当性・信頼性

### データ品質確保
- **重複チェック**: 同一・類似・重複入力の検知・警告・確認・統合・修正・品質
- **妥当性確認**: 金額・期間・関係・契約・条件・市場・業界・常識・妥当性・信頼
- **承認統制**: 金額・重要度・リスク・影響に応じた承認・統制・管理・品質・安全
- **監査対応**: 入力・変更・承認・履歴・証跡・透明性・説明責任・法的・信頼・価値

## アクセシビリティ要件
- **キーボード操作**: 全入力・操作・移動のキーボード対応・ショートカット・効率化
- **スクリーンリーダー**: 項目・エラー・案内・状況の音声読み上げ・代替テキスト
- **視覚支援**: 色覚・視力・障害への配慮・コントラスト・フォント・レイアウト
- **操作支援**: 高齢者・障害・制限への配慮・簡単・直感・サポート・包摂・価値

## レスポンシブ対応
- **デスクトップ**: 全項目・詳細入力・複数画面・効率操作・マルチタスク・生産性
- **タブレット**: 重要項目・タッチ操作・画面回転・拡大・スワイプ・直感・効率
- **モバイル**: 基本項目・縦画面・最小入力・音声・カメラ・GPS・簡単・迅速・便利