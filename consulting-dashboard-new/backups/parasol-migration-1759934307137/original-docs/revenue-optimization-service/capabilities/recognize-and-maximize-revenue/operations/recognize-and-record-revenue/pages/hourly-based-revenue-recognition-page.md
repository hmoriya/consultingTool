# ページ定義: 工数精算型収益認識ページ

## 画面の目的
工数実績に基づく課金契約において、実際の作業時間と単価を基に適切な収益金額を計算し、会計基準に準拠して収益認識を実行する。

## 利用者
- **財務マネージャー**: 工数実績の承認・単価設定・収益認識の実行
- **PM**: 工数実績の確認・承認・品質チェック
- **コンサルタント**: 工数実績の入力・修正・承認申請

## 画面構成

### ヘッダー部
- **ページタイトル**: 「工数精算型収益認識」
- **期間選択**: 収益認識対象期間の設定（月次・四半期・任意期間）
- **プロジェクト選択**: 工数精算型契約プロジェクトの選択・絞り込み
- **承認ステータス**: 工数承認・収益認識承認の進捗状況

### メインコンテンツ部

#### 1. 工数実績サマリー（上部）
- **総工数**: 期間内の総作業時間・承認済み時間・未承認時間
- **単価情報**: メンバー別・ロール別・スキル別単価・レート設定
- **計算収益**: 工数×単価での収益総額・税込・税抜金額
- **承認状況**: PM承認・財務承認・クライアント承認の段階表示

#### 2. 工数詳細パネル（左サイド）
- **メンバー別工数**: 個人別作業時間・単価・小計金額
- **タスク別工数**: 作業内容別時間・難易度・効率性
- **時間調整**: 承認済み時間・修正要求・追加申請
- **品質チェック**: 工数妥当性・作業品質・効率基準

#### 3. 単価・計算パネル（右サイド）
- **単価マスタ**: ロール別・スキル別・経験年数別単価設定
- **レート調整**: プロジェクト特別単価・クライアント別単価
- **計算ロジック**: 基本単価・割増単価・深夜・休日レート
- **為替換算**: 外貨建て契約での為替レート・換算金額

### 工数管理エリア（下部）

#### 4. 期間別工数分析
- **日次工数**: 日別作業時間・進捗・効率・異常値検知
- **週次工数**: 週別集計・トレンド・季節性・予実比較
- **月次工数**: 月別実績・累積・予算対比・収益インパクト
- **プロジェクト別**: プロジェクト横断・工数配分・収益貢献度

#### 5. 承認・調整処理
- **工数承認**: PM承認・修正要求・差戻し・再申請フロー
- **収益承認**: 財務マネージャー承認・金額確定・認識実行
- **調整処理**: 工数修正・単価変更・為替調整・税務調整
- **例外処理**: 承認期限・システムエラー・データ不整合対応

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 更新頻度 | 説明 |
|-----------|---------|---------|------|
| 作業時間 | 時間:分 | リアルタイム | 実際の作業時間・承認済み時間 |
| 単価 | 通貨/時間 | 月次更新 | ロール・スキル別の時間単価 |
| 収益金額 | 通貨表示 | リアルタイム | 工数×単価の計算結果 |
| 承認率 | パーセンテージ | リアルタイム | 承認済み工数の比率 |

### 工数データ管理
- **タイムシート連携**: 個人タイムシートからの自動取込・同期
- **プロジェクト管理**: プロジェクト進捗・成果物との連携・整合性
- **人事システム**: 人事評価・スキル評価・昇格情報の反映
- **契約管理**: 契約上限・単価契約・変更契約の自動適用

## アクション・操作

### 主要認識アクション
- **工数取込**: タイムシートからの工数データ自動・手動取込
- **単価適用**: 最新単価マスタの適用・個別調整・承認申請
- **収益計算**: 工数×単価での収益自動計算・税務処理
- **一括認識**: 月次・期間単位での一括収益認識処理

### 工数管理アクション
- **工数承認**: PM・財務による段階承認・一括承認・例外承認
- **工数調整**: 実績修正・追加申請・削除申請・理由記録
- **品質チェック**: 工数妥当性・効率性・整合性の自動・手動チェック
- **異常検知**: 異常工数・効率低下・不正入力の自動検知・警告

### 分析・レポートアクション
- **効率分析**: メンバー別・タスク別・期間別効率性分析
- **収益分析**: 工数ベース収益・利益率・原価分析
- **予実管理**: 工数予算・収益予算との実績比較・差異分析
- **トレンド分析**: 工数トレンド・単価トレンド・収益トレンド

## 画面の振る舞い

### 動的計算機能
- **リアルタイム計算**: 工数入力・単価変更時の即座収益再計算
- **自動単価適用**: メンバー・ロール・期間による適切な単価自動選択
- **承認ワークフロー**: 承認段階に応じた画面表示・操作権限制御
- **アラート機能**: 承認期限・異常工数・予算超過の自動通知

### 品質保証機能
- **入力検証**: 工数・単価・期間の妥当性・整合性チェック
- **重複チェック**: 同一期間・同一作業の重複入力防止
- **上限チェック**: 契約上限・予算上限・工数上限の自動監視
- **整合性確認**: タイムシート・プロジェクト進捗・成果物との整合性

## 画面遷移

### 遷移元画面
- **タイムシート画面**: 個人工数入力から収益認識への展開
- **プロジェクト管理**: プロジェクト進捗から工数・収益確認
- **収益ダッシュボード**: 全体収益から工数ベース詳細への遷移

### 遷移先画面
- **固定報酬型認識**: 契約タイプ変更時の処理方式変更
- **マイルストーン認識**: 混合契約での認識方式併用
- **工数詳細分析**: 工数効率・品質・原価の詳細分析
- **請求管理**: 認識済み収益の請求書発行・回収管理

## エラーハンドリング
- **工数データ不整合**: タイムシートとの差異・修正要求・同期処理
- **単価設定エラー**: 単価未設定・期限切れ・承認待ちの警告・対処
- **承認期限超過**: 自動エスカレーション・代理承認・翌期処理
- **システム連携エラー**: タイムシート・人事・財務システムとの連携失敗対応

## アクセシビリティ要件
- **時間入力支援**: 工数入力の音声認識・キーボード支援・自動補完
- **承認操作**: 承認・差戻し・調整の簡易操作・キーボード対応
- **数値読み上げ**: 工数・単価・収益金額の音声読み上げ対応
- **色覚対応**: 承認状況・エラー状態・アラートを色以外でも識別

## レスポンシブ対応
- **デスクトップ**: 全機能・複雑計算・詳細分析・高精度入力対応
- **タブレット**: 工数入力・承認操作・基本計算・タッチ操作最適化
- **モバイル**: 工数確認・簡易承認・ステータス確認・外出先対応