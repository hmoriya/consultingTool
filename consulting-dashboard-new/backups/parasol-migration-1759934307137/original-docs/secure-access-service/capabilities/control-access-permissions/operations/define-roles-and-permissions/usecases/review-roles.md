# ユースケース: ロールを見直す

## 基本情報

- **ユースケースID**: UC-SEC-035
- **ユースケース名**: ロールを見直す
- **アクター**: セキュリティ管理者, 監査担当者, 部門長, コンプライアンス担当者, システム管理者
- **概要**: 既存のロール定義と権限割り当てを定期的に見直し、組織の変化や規制要件に対応して最適化する

## 事前条件

- ユーザーがロール見直し権限を持っている
- 見直し対象のロールが存在する
- ロール使用状況のデータが蓄積されている
- 見直し基準とポリシーが策定されている

## 事後条件

### 成功時
- ロール見直し結果が記録される
- 必要に応じてロール定義が更新される
- 権限割り当ての調整が実行される
- 見直し履歴が保存される

### 失敗時
- エラーメッセージが表示される
- 見直し状況が保持される
- 失敗理由が記録される

## 基本フロー

1. 管理者がロール見直しプロセスを開始する
2. システムが見直し対象ロール一覧を表示する
3. 管理者が見直し対象ロールを選択する
4. システムがロールの使用状況分析を実行する
5. システムが現在のロール定義と権限割り当てを表示する
6. システムが組織変更と業務変化の影響を分析する
7. 管理者がロール定義の適切性を評価する
8. システムが類似ロールとの重複・統合可能性を分析する
9. 管理者が見直し結果と改善案を作成する
10. システムが法規制・コンプライアンス要件への適合性を検証する
11. 管理者が見直し結果を確定する
12. システムが承認ワークフローに送信する
13. システムが見直し履歴を記録する

## 代替フロー

### 代替フロー1: 全ロール一括見直し
- 2a. 定期的な全ロール見直しを実行する場合
  - 2a1. システムが全ロールの使用状況を分析する
  - 2a2. システムが見直し優先度をランク付けする
  - 2a3. 管理者が見直し順序を調整する
  - 2a4. 基本フロー3に進む

### 代替フロー2: 緊急見直し
- 1a. セキュリティインシデントや法規制変更による緊急見直しの場合
  - 1a1. 管理者が緊急見直し事由を入力する
  - 1a2. システムが影響範囲を特定する
  - 1a3. システムが優先対応ロールを抽出する
  - 1a4. 基本フロー3に進む

### 代替フロー3: 使用状況に基づく自動見直し
- 4a. システムが自動的に問題を検出した場合
  - 4a1. システムが未使用ロールを特定する
  - 4a2. システムが過剰権限ロールを特定する
  - 4a3. システムが改善提案を生成する
  - 4a4. 基本フロー7に進む

## 例外フロー

### 例外1: 重要ロールの使用中エラー
- 9a. 見直し対象ロールが重要業務で使用中の場合
  - 9a1. システムが使用中のユーザーと業務を特定する
  - 9a2. システムが影響評価レポートを生成する
  - 9a3. 管理者が代替案を検討する
  - 9a4. 基本フロー9を一時停止し、別途調整後に再開する

### 例外2: 法規制違反の検出
- 10a. 現在のロール定義が法規制に違反している場合
  - 10a1. システムが違反内容を詳細表示する
  - 10a2. システムが緊急対応を要求する
  - 10a3. 管理者が緊急修正案を作成する
  - 10a4. 緊急承認プロセスを開始する

### 例外3: 承認拒否
- 12a. 承認者が見直し結果を拒否した場合
  - 12a1. システムが拒否理由を管理者に通知する
  - 12a2. 管理者が指摘事項に基づき見直し内容を修正する
  - 12a3. システムが修正版を再承認に送信する

## 特別要件

### 性能要件
- 使用状況分析: 30秒以内
- 類似ロール分析: 20秒以内
- コンプライアンス検証: 15秒以内
- 見直し結果保存: 5秒以内

### セキュリティ要件
- 見直し結果の暗号化保存
- 操作者の認証と権限確認
- 全操作の監査ログ記録
- 機密ロール情報の保護

### 可用性要件
- 24時間365日の見直し機能提供
- 99.9%以上のシステム稼働率

## 非機能要件

### 使いやすさ
- 直感的な見直しインターフェース
- ビジュアルな分析結果表示
- ワンクリックでの改善案適用
- 見直し履歴の検索・比較機能

### 拡張性
- 新しい見直し基準の追加
- カスタム分析レポートの生成
- 大規模組織での効率的な見直し

## ビジネスルール

### 見直し頻度ルール
- **定期見直し**: 年1回の全ロール見直しを実施
- **四半期見直し**: 重要ロールは四半期毎に見直し
- **随時見直し**: セキュリティインシデント発生時は即座に見直し
- **法規制対応**: 法規制変更時は30日以内に見直し完了

### 見直し基準
- **使用頻度**: 6ヶ月以上未使用のロールは廃止検討
- **権限適切性**: 最小権限の原則への適合性
- **職務適合性**: 現在の組織構造と職務内容への適合性
- **法的適合性**: 関連法規制・基準への準拠

### 改善提案の優先度
- **高優先度**: セキュリティリスク、法規制違反
- **中優先度**: 権限過多、ロール重複
- **低優先度**: 使用効率性、ユーザビリティ

### 承認要件
- **軽微な変更**: 部門長承認で実施
- **重要な変更**: セキュリティ責任者と部門長の二段階承認
- **緊急対応**: 事後承認を許可（24時間以内）

## 関連ユースケース

- **前提**: UC-SEC-032 (ロールを定義する) - 見直し対象ロールの存在
- **前提**: UC-SEC-034 (ロールに権限を割り当てる) - 権限割り当て状況の確認
- **関連**: UC-SEC-028 (権限利用状況を確認する) - 使用状況データの活用
- **後続**: UC-SEC-036 (ロール変更を実装する) - 見直し結果の適用

## 実装ノート

### データ要件
- 見直し履歴（見直し日、対象ロール、結果、承認状況）
- 使用状況データ（アクセス頻度、最終使用日、利用ユーザー）
- 改善提案（提案内容、優先度、実装状況）
- 法規制マッピング（適用法規、準拠要件、確認日）

### 技術的考慮事項
- 大量データの効率的な分析処理
- リアルタイム使用状況の収集
- 複雑な依存関係の可視化
- 機械学習による自動改善提案

### UI/UX要件
- ロール使用状況のダッシュボード表示
- インタラクティブな分析結果の可視化
- ドリルダウン分析機能
- 見直し結果の比較表示

### データ整合性
- 見直し中のロール変更の制御
- 複数担当者による同時見直しの調整
- 見直し結果の適用タイミング制御
- データバックアップとロールバック

### 分析機能
- 使用パターンの統計分析
- 権限使用の時系列分析
- ロール間の類似度分析
- リスクスコアの自動算出

### レポート機能
- 見直し結果の詳細レポート
- 改善効果の測定レポート
- コンプライアンス適合性レポート
- 経営層向けサマリーレポート

### 自動化機能
- 定期見直しのスケジュール実行
- 異常パターンの自動検出
- 改善提案の自動生成
- 見直し結果の自動通知

### 監査要件
- 見直しプロセスの完全な記録
- 決定根拠の文書化
- 変更前後の状態保存
- 外部監査への対応準備

### 法規制対応
- 業界別規制要件への対応
- 国際的な基準（ISO27001等）への準拠
- データ保護規制（GDPR等）への対応
- 監査証跡の長期保存