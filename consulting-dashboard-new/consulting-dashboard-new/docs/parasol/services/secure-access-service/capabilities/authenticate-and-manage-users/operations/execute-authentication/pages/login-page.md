# ページ定義: ログインページ

## 基本情報

- **ページID**: PG-SEC-024
- **ページ名**: ログインページ
- **URL**: `/auth/login`
- **アクセス権限**: 未認証ユーザー（誰でもアクセス可能）
- **関連ユースケース**: UC-SEC-024 (ユーザー認証情報を検証する)

## ページ概要

ユーザーがシステムにアクセスするための認証を行うメインエントリーポイント。セキュアで使いやすい認証体験を提供し、多様な認証方法と適切なセキュリティ対策を統合したログイン機能を実現する。

## レイアウト構成

### ヘッダーセクション
- **ブランドロゴ**: 組織のロゴとシステム名
- **言語選択**: 日本語/English切り替え機能
- **ヘルプリンク**: ログインヘルプページへのリンク

### メインコンテンツエリア

#### 1. ログインフォーム（中央配置）
```
┌─ ログイン ─────────────────────────────────┐
│                                           │
│        [組織ロゴ]                          │
│     システム名                             │
│                                           │
│ ユーザーID（必須）                         │
│ ├ [_________________________]             │
│ │  💡 メールアドレスまたは社員番号         │
│                                           │
│ パスワード（必須）                         │
│ ├ [_________________________] [👁]        │
│ │  🔒 パスワードを入力してください         │
│                                           │
│ ☐ ログイン状態を保持する（30日間）         │
│                                           │
│ [🔐 ログイン]                              │
│                                           │
│ ──── または ────                           │
│                                           │
│ [🏢 SSO ログイン]   [📱 QRコード]          │
│                                           │
│ 🔗 パスワードを忘れた方はこちら             │
│ 🔗 アカウントをお持ちでない方はこちら       │
└───────────────────────────────────────┘
```

#### 2. 多要素認証セクション（必要時表示）
```
┌─ 多要素認証 ───────────────────────────────┐
│                                           │
│ 🔐 追加認証が必要です                      │
│                                           │
│ 認証方法を選択してください：               │
│                                           │
│ ○ SMS認証                                  │
│ │  └ 📱 登録済み電話番号: ***-****-1234   │
│                                           │
│ ○ 認証アプリ                               │
│ │  └ 📲 Google Authenticator / Authy     │
│                                           │
│ ○ メール認証                               │
│ │  └ 📧 登録済みメール: user@******.com   │
│                                           │
│ [次へ進む]                                 │
│                                           │
│ 🔗 認証方法を変更する                      │
│ 🔗 管理者に連絡する                        │
└───────────────────────────────────────┘
```

#### 3. 認証コード入力セクション（MFA時）
```
┌─ 認証コード入力 ───────────────────────────┐
│                                           │
│ 📱 SMS認証コードを送信しました              │
│                                           │
│ 送信先: ***-****-1234                     │
│ 送信時刻: 14:25 (2分前)                   │
│                                           │
│ 6桁の認証コードを入力してください：        │
│                                           │
│ [_] [_] [_] [_] [_] [_]                   │
│                                           │
│ [✅ 認証する]                              │
│                                           │
│ コードが届きませんか？                     │
│ [📤 再送信] (残り 48秒)                    │
│                                           │
│ 🔗 他の認証方法を試す                      │
│ 🔗 管理者に連絡する                        │
└───────────────────────────────────────┘
```

### サイドバー情報エリア（デスクトップ時）
```
┌─ システム情報 ─────────────────────────────┐
│                                           │
│ 📢 お知らせ                                │
│ ├ システムメンテナンス予定                 │
│ │  12/15 22:00-24:00                     │
│ └ 新機能リリースのご案内                   │
│                                           │
│ 🕐 営業時間                                │
│ ├ 平日: 9:00-18:00                        │
│ ├ 土日祝: 休業                             │
│ └ 緊急時: 24時間対応                       │
│                                           │
│ 🆘 サポート                                │
│ ├ 📞 0120-123-456                         │
│ ├ 📧 support@company.com                  │
│ └ 💬 チャットサポート                      │
│                                           │
│ 🔒 セキュリティ                            │
│ ├ SSL暗号化通信                            │
│ ├ 多要素認証対応                           │
│ └ 24時間監視体制                           │
└───────────────────────────────────────┘
```

### フッターセクション
```
┌─ フッター ─────────────────────────────────┐
│                                           │
│ © 2024 Company Name. All rights reserved. │
│                                           │
│ [プライバシーポリシー] [利用規約] [ヘルプ]  │
│                                           │
│ システムバージョン: v2.1.0                 │
│ 最終更新: 2024-01-15                       │
└───────────────────────────────────────┘
```

## インタラクション仕様

### ログインフォームの動作
- **リアルタイム検証**: フィールドからフォーカスが外れた時点で入力検証
- **パスワード表示切り替え**: 👁アイコンクリックで表示/非表示切り替え
- **自動補完制御**: ユーザーID欄は自動補完有効、パスワード欄は無効
- **Enter キー対応**: パスワード欄でEnterキー押下時にログイン実行

### セキュリティ機能
- **ブルートフォース対策**: 連続失敗時の段階的遅延（1秒→3秒→5秒）
- **CAPTCHA表示**: 3回失敗後に画像認証を表示
- **セッション管理**: ログイン成功時の自動セッション開始
- **リダイレクト機能**: ログイン前のアクセス先への自動遷移

### エラーハンドリング
- **統一エラーメッセージ**: セキュリティ配慮により詳細は表示しない
- **復旧ガイダンス**: エラー時の次ステップを明確に案内
- **プログレッシブ開示**: 必要な情報のみ段階的に表示

## UI要件

### ビジュアルデザイン
- **カラーパレット**:
  - プライマリ: #2563EB (信頼感のあるブルー)
  - セカンダリ: #64748B (ニュートラルグレー)
  - エラー: #DC2626 (警告レッド)
  - サクセス: #059669 (安心グリーン)
  - 背景: #F8FAFC (クリーンホワイト)

### フォームデザイン
- **入力フィールド**: 角丸4px、適切なパディング、フォーカス時のハイライト
- **ボタンデザイン**: 重要度に応じたスタイル（プライマリ/セカンダリ）
- **アイコン使用**: 直感的で分かりやすいアイコンシステム

### タイポグラフィ
- **見出し**: Noto Sans JP Bold 28px
- **ラベル**: Noto Sans JP Medium 16px
- **入力テキスト**: Noto Sans JP Regular 16px
- **ヘルプテキスト**: Noto Sans JP Regular 14px

## レスポンシブ対応

### デスクトップ (1024px以上)
- 2カラムレイアウト: ログインフォーム（中央）+ サイドバー（右）
- フォーム幅: 最大400px、画面中央配置
- 背景: ブランドイメージやグラデーション

### タブレット (768px-1023px)
- 1カラムレイアウト: フォーム中央配置
- サイドバー: 折りたたみ式、フォーム下部に配置
- フォーム幅: 画面幅の80%

### モバイル (767px以下)
- フルスクリーンレイアウト: フォームが画面いっぱいに展開
- ボタンサイズ: 指タップに最適化（44px以上の高さ）
- キーボード対応: 数字キーボード、メールキーボードの適切な表示

## アクセシビリティ

### キーボードナビゲーション
- Tab順序: ユーザーID → パスワード → チェックボックス → ログインボタン
- Enter/Space: ボタンの実行、チェックボックスの切り替え
- Escape: モーダル・ドロップダウンの閉じる

### スクリーンリーダー対応
- ラベル関連付け: すべてのフォーム要素に適切なラベル設定
- エラー読み上げ: aria-live による動的エラーメッセージの通知
- 進行状況: ログインプロセスの現在状況を音声で案内

### 視覚サポート
- 高コントラスト: WCAG AA準拠のコントラスト比4.5:1以上
- 文字サイズ: ブラウザ設定による拡大・縮小に対応
- カラーユニバーサル: 色覚多様性に配慮したカラーパレット

## セキュリティ要件

### 入力データ保護
- **HTTPS通信**: 全ての通信をTLS 1.3で暗号化
- **入力暗号化**: クライアントサイドでの一時的な暗号化
- **メモリ保護**: パスワード等の機密情報の適切なクリア

### 攻撃対策
- **SQL インジェクション**: パラメータ化クエリの使用
- **XSS攻撃**: 入力値の適切なエスケープ処理
- **CSRF攻撃**: CSRF トークンの実装
- **クリックジャッキング**: X-Frame-Options ヘッダー設定

### セッション保護
- **セッション固定対策**: ログイン成功時のセッションID再生成
- **Cookie セキュリティ**: HttpOnly、Secure、SameSite属性設定
- **タイムアウト**: 非アクティブ時の自動ログアウト

## パフォーマンス要件

### ページロード
- 初回表示: 2秒以内
- 認証処理: 3秒以内
- エラー表示: 1秒以内

### 最適化
- 画像最適化: WebP形式、適切なサイズ
- CSS/JS最適化: 圧縮、キャッシュ活用
- CDN利用: 静的リソースの高速配信

## 測定・改善指標

### ユーザビリティ指標
- ログイン成功率（目標: 95%以上）
- 平均ログイン時間（目標: 30秒以内）
- パスワードリセット率（目標: 5%以下）

### セキュリティ指標
- 不正ログイン試行ブロック率（目標: 99%以上）
- セキュリティインシデント数（目標: 月0件）
- 多要素認証有効化率（目標: 80%以上）

### パフォーマンス指標
- ページロード時間（目標: 2秒以内）
- エラー発生率（目標: 1%以下）
- 同時接続処理能力（目標: 1000ユーザー以上）