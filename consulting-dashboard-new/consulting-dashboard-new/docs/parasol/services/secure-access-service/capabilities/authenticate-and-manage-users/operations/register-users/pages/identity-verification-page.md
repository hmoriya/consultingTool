# ページ定義: 本人確認ページ

## 基本情報

- **ページID**: PG-SEC-021
- **ページ名**: 本人確認ページ
- **URL**: `/auth/verification`
- **アクセス権限**: 登録中ユーザー, 本人確認担当者, 管理者
- **関連ユースケース**: UC-SEC-021 (ユーザー本人確認を実施する)

## ページ概要

新規ユーザーの本人確認プロセスを効率的に実行するためのページ。直感的なファイルアップロード機能と、リアルタイムの検証フィードバックを通じて、セキュアで使いやすい本人確認体験を提供する。

## レイアウト構成

### ヘッダーセクション
- **ページタイトル**: "本人確認"
- **プログレスインジケーター**: 登録プロセスの進行状況（4ステップ中2ステップ目）
- **ステップ説明**: "本人確認書類をアップロードしてください"

### メインコンテンツエリア

#### 1. 本人確認方法選択セクション
```
┌─ 本人確認方法を選択 ───────────────────────┐
│                                           │
│ ○ オンライン確認（推奨）                   │
│ │  └ 書類をアップロードして自動確認        │
│ │     所要時間: 約5-10分                   │
│                                           │
│ ○ ビデオ通話確認                           │
│ │  └ 担当者とのビデオ通話で確認            │
│ │     所要時間: 約15-20分                  │
│ │     営業時間: 平日9:00-18:00             │
│                                           │
│ ○ 郵送確認                                 │
│ │  └ 郵送による書類確認                    │
│ │     所要時間: 3-5営業日                  │
└───────────────────────────────────────┘
```

#### 2. 書類アップロードセクション（オンライン確認選択時）
```
┌─ 身分証明書アップロード ───────────────────┐
│                                           │
│ 【主要身分証明書】（いずれか1点必須）      │
│                                           │
│ ┌─ 運転免許証 ─────────────────────────┐ │
│ │ [📷 写真を撮る] [📁 ファイル選択]      │ │
│ │                                       │ │
│ │ ✅ 撮影のコツ:                         │ │
│ │ • 全体が写るように撮影                 │ │
│ │ • 文字がはっきり読める明るさで         │ │
│ │ • 反射や影がないように注意             │ │
│ └───────────────────────────────────┘ │
│                                           │
│ ┌─ パスポート ─────────────────────────┐ │
│ │ [📷 写真を撮る] [📁 ファイル選択]      │ │
│ │                                       │ │
│ │ ✅ 撮影のコツ:                         │ │
│ │ • 顔写真ページを撮影                   │ │
│ │ • 有効期限が確認できるように           │ │
│ └───────────────────────────────────┘ │
│                                           │
│ ┌─ マイナンバーカード ─────────────────┐ │
│ │ [📷 表面を撮る] [📁 ファイル選択]      │ │
│ │                                       │ │
│ │ ⚠️ 注意: マイナンバー（12桁）は隠して   │ │
│ │ 撮影してください                       │ │
│ └───────────────────────────────────┘ │
└───────────────────────────────────────┘
```

#### 3. 追加書類セクション（必要に応じて）
```
┌─ 追加書類 ─────────────────────────────────┐
│                                           │
│ 【補助書類】（以下から1点）               │
│                                           │
│ □ 健康保険証                               │
│   ├ [📷 写真を撮る] [📁 ファイル選択]      │
│                                           │
│ □ 住民票の写し（3か月以内）               │
│   ├ [📷 写真を撮る] [📁 ファイル選択]      │
│                                           │
│ □ 公共料金領収書（3か月以内）             │
│   ├ [📷 写真を撮る] [📁 ファイル選択]      │
│                                           │
│ □ 在留カード（外国籍の方）                 │
│   ├ [📷 写真を撮る] [📁 ファイル選択]      │
└───────────────────────────────────────┘
```

#### 4. アップロード済みファイル確認セクション
```
┌─ アップロード済みファイル ─────────────────┐
│                                           │
│ 📄 運転免許証.jpg (2.3MB)                  │
│ ├ 状態: ✅ 確認完了                        │
│ ├ [👁 プレビュー] [🗑 削除] [📤 再アップ]  │
│                                           │
│ 📄 健康保険証.jpg (1.8MB)                  │
│ ├ 状態: ⏳ 確認中...                       │
│ ├ [👁 プレビュー] [🗑 削除] [📤 再アップ]  │
│                                           │
│ 🔍 自動確認結果                            │
│ ├ ✅ 画像品質: 良好                        │
│ ├ ✅ 文字認識: 成功                        │
│ ├ ✅ 真正性チェック: 通過                  │
│ ├ ⚠️ 住所情報: 一部不一致                  │
│ └ → 手動確認が必要です                     │
└───────────────────────────────────────┘
```

#### 5. ビデオ通話予約セクション（ビデオ確認選択時）
```
┌─ ビデオ通話予約 ───────────────────────────┐
│                                           │
│ 📅 希望日時を選択してください               │
│                                           │
│ 日付選択: [2024/01/15 ▼]                   │
│                                           │
│ 時間選択:                                  │
│ ○ 09:00-09:30  ○ 09:30-10:00             │
│ ○ 10:00-10:30  ○ 10:30-11:00             │
│ ○ 14:00-14:30  ○ 14:30-15:00             │
│ ● 15:00-15:30  ○ 15:30-16:00             │
│                                           │
│ 📞 連絡先電話番号（必須）                   │
│ ├ [090-1234-5678]                         │
│                                           │
│ 💬 特記事項（任意）                        │
│ ├ [___________________________]           │
│   │ 例：聴覚に不安があるため、               │
│   │     チャット併用希望                   │
│                                           │
│ [📅 予約を確定する]                        │
└───────────────────────────────────────┘
```

### サイドバー情報エリア
```
┌─ ヘルプ・ガイド ───────────────────────────┐
│                                           │
│ 📋 必要書類一覧                            │
│ ├ ✅ 顔写真付き身分証明書（必須）          │
│ ├ ✅ 現住所確認書類（必須）                │
│ └ ℹ️ 詳細を見る                            │
│                                           │
│ 📷 撮影ガイド                              │
│ ├ ✅ 明るい場所で撮影                      │
│ ├ ✅ 文字がはっきり見える                  │
│ ├ ✅ 全体が画面に収まる                    │
│ └ ℹ️ 撮影例を見る                          │
│                                           │
│ 🔒 セキュリティ                            │
│ ├ 📊 暗号化通信                            │
│ ├ 🗂 適切な保管期間                        │
│ ├ 🚫 不正アクセス防止                      │
│ └ ℹ️ プライバシーポリシー                  │
│                                           │
│ 💬 サポート                                │
│ ├ 📞 電話: 0120-xxx-xxx                   │
│ ├ 💬 チャット: [チャットを開く]           │
│ └ ⏰ 営業時間: 平日9:00-18:00              │
└───────────────────────────────────────┘
```

### フッターアクション
```
┌─ アクション ───────────────────────────────┐
│                                           │
│ [← 戻る]     [📝 下書き保存]     [次へ →] │
│                                           │
└───────────────────────────────────────┘
```

## インタラクション仕様

### ファイルアップロード
- **ドラッグ&ドロップ**: ファイルをドラッグして直感的にアップロード
- **複数選択**: 複数ファイルの同時アップロード対応
- **プログレス表示**: アップロード進捗のリアルタイム表示
- **エラーハンドリング**: ファイルサイズ・形式エラーの適切な通知

### リアルタイム検証
- **自動OCR**: アップロード完了後の自動文字認識処理
- **品質チェック**: 画像の鮮明度・角度・照明の自動評価
- **真正性検証**: AI による偽造検知と真正性確認
- **即座のフィードバック**: 検証結果の瞬時表示

### カメラ機能
- **ライブプレビュー**: リアルタイムカメラ映像表示
- **ガイドライン表示**: 撮影範囲を示すオーバーレイ
- **自動フォーカス**: 書類にフォーカスした自動調整
- **手動調整**: 明るさ・コントラストの手動微調整

## UI要件

### ビジュアルデザイン
- **カラーパレット**:
  - プライマリ: #1D4ED8 (青)
  - サクセス: #059669 (緑)
  - 警告: #D97706 (オレンジ)
  - エラー: #DC2626 (赤)
  - ニュートラル: #6B7280 (グレー)

### アイコンシステム
- **アップロード**: 雲と矢印のコンビネーション
- **カメラ**: シンプルなカメラアイコン
- **確認完了**: 緑のチェックマーク
- **エラー**: 赤い警告三角形
- **処理中**: 回転するスピナー

### フィードバック表示
- **成功**: 緑色の背景に白のチェックマーク
- **警告**: オレンジ色の背景に感嘆符
- **エラー**: 赤色の背景に X マーク
- **情報**: 青色の背景に i マーク

## レスポンシブ対応

### デスクトップ (1024px以上)
- メインコンテンツ: 幅70%、左側配置
- サイドバー: 幅30%、右側配置
- ファイルアップロード: ドラッグ&ドロップエリア表示

### タブレット (768px-1023px)
- メインコンテンツ: 幅100%
- サイドバー: 折りたたみ式、トグルボタンで開閉
- ファイルアップロード: タップでファイル選択

### モバイル (767px以下)
- 単一カラムレイアウト
- カメラ機能: 全画面表示モード
- ボタンサイズ: 指タップに最適化（44px以上）

## アクセシビリティ

### キーボードナビゲーション
- Tab順序: 論理的な順序でのフォーカス移動
- Enter/Space: ボタンとファイル選択の実行
- Escape: モーダル・カメラ機能の終了

### スクリーンリーダー対応
- alt属性: すべての画像に適切な説明文
- aria-label: ボタンと入力フィールドの詳細説明
- aria-live: 動的コンテンツ変更の通知

### 視覚サポート
- 高コントラスト: 4.5:1以上のコントラスト比維持
- フォントサイズ: 最小16px、拡大対応
- カラーブラインド: 色以外の情報伝達手段併用

## セキュリティ要件

### データ暗号化
- 転送時暗号化: TLS 1.3による通信保護
- 保存時暗号化: AES-256による画像ファイル暗号化
- アクセス制御: ロールベースのファイルアクセス制限

### プライバシー保護
- 自動削除: 確認完了後の定期的なファイル削除
- アクセスログ: 全アクセス履歴の記録と監視
- 匿名化処理: 個人特定情報の適切な匿名化

## パフォーマンス要件

### ファイル処理
- アップロード時間: 5MB以下のファイルで30秒以内
- OCR処理時間: 一般的な身分証で10秒以内
- 画像圧縮: 品質を保ちながら50%以上のサイズ削減

### リアルタイム処理
- カメラ起動時間: 3秒以内
- プレビュー表示: 100ms以内の遅延
- 自動フォーカス: 2秒以内の調整完了

## エラーハンドリング

### ファイル関連エラー
- サイズ超過: 圧縮方法の提案と代替手段
- 形式不対応: 対応形式の明示と変換ツール案内
- 破損ファイル: 再撮影・再アップロードの案内

### 処理関連エラー
- OCR失敗: 手動確認への切り替え案内
- ネットワークエラー: 自動リトライと進捗保存
- サーバーエラー: 適切なエラーメッセージと代替手段

## 測定・改善指標

### ユーザビリティ指標
- 本人確認完了率（目標: 95%以上）
- 平均処理時間（目標: 10分以内）
- ユーザー満足度（目標: 4.2/5.0以上）

### 技術指標
- OCR精度率（目標: 98%以上）
- 偽造検知率（目標: 99.9%以上）
- システム稼働率（目標: 99.5%以上）