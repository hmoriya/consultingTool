# ページ定義: ユーザー登録フォームページ

## 基本情報

- **ページID**: PG-SEC-020
- **ページ名**: ユーザー登録フォームページ
- **URL**: `/auth/register`
- **アクセス権限**: 未認証ユーザー, 管理者
- **関連ユースケース**: UC-SEC-020 (ユーザーアカウントを作成する)

## ページ概要

新規ユーザーのアカウント作成に必要な情報を収集し、アカウント作成プロセスを開始するためのフォームページ。直感的で分かりやすいインターフェースを通じて、効率的なユーザー登録体験を提供する。

## レイアウト構成

### ヘッダーセクション
- **ページタイトル**: "新規ユーザー登録"
- **プログレスインジケーター**: 登録プロセスの進行状況（4ステップ中1ステップ目）
- **ヘルプリンク**: 登録に関するガイドへのリンク

### メインコンテンツエリア

#### 1. 個人情報入力セクション
```
┌─ 個人情報 ─────────────────────────────────┐
│ 氏名（必須）                               │
│ ├ 姓: [_____________] 名: [_____________]   │
│                                           │
│ フリガナ（必須）                           │
│ ├ セイ: [_____________] メイ: [___________] │
│                                           │
│ メールアドレス（必須）                     │
│ ├ [_________________________]             │
│                                           │
│ 電話番号（必須）                           │
│ ├ [___-____-____]                         │
│                                           │
│ 生年月日（必須）                           │
│ ├ [____年] [__月] [__日]                   │
└───────────────────────────────────────┘
```

#### 2. 組織情報入力セクション
```
┌─ 組織情報 ─────────────────────────────────┐
│ 所属組織（必須）                           │
│ ├ [ドロップダウン選択: 株式会社○○]         │
│                                           │
│ 部署（必須）                               │
│ ├ [ドロップダウン選択: 営業部]             │
│                                           │
│ 役職（必須）                               │
│ ├ [ドロップダウン選択: マネージャー]       │
│                                           │
│ 上司・承認者（必須）                       │
│ ├ [検索・選択: 田中太郎]                   │
│                                           │
│ 雇用形態                                   │
│ ├ ○正社員 ○契約社員 ○派遣社員 ○業務委託   │
└───────────────────────────────────────┘
```

#### 3. 認証情報設定セクション
```
┌─ 認証情報 ─────────────────────────────────┐
│ ユーザーID（任意）                         │
│ ├ [_______________] ※未入力時は自動生成     │
│                                           │
│ 初期パスワード（必須）                     │
│ ├ [_______________] [👁表示/非表示]        │
│ └ パスワード強度: ●●●○○ (強)              │
│                                           │
│ パスワード確認（必須）                     │
│ ├ [_______________] [👁表示/非表示]        │
│                                           │
│ 多要素認証設定                             │
│ ├ ☑ SMSによる認証を有効にする              │
│ ├ ☑ 認証アプリによる認証を有効にする       │
└───────────────────────────────────────┘
```

#### 4. 利用規約・ポリシー同意セクション
```
┌─ 利用規約・ポリシー ───────────────────────┐
│ ☑ 利用規約に同意する（必須）               │
│ │  └ [利用規約を確認する]                  │
│                                           │
│ ☑ プライバシーポリシーに同意する（必須）   │
│ │  └ [プライバシーポリシーを確認する]      │
│                                           │
│ ☑ セキュリティポリシーに同意する（必須）   │
│ │  └ [セキュリティポリシーを確認する]      │
│                                           │
│ □ メールニュースの受信に同意する（任意）   │
└───────────────────────────────────────┘
```

### フッターセクション
```
┌─ アクション ───────────────────────────────┐
│                                           │
│  [戻る]        [下書き保存]      [次へ進む] │
│                                           │
└───────────────────────────────────────┘
```

## インタラクション仕様

### 入力バリデーション
- **リアルタイム検証**: フィールドからフォーカスが外れた時点で入力内容をチェック
- **エラー表示**: 該当フィールドの下に赤文字でエラーメッセージを表示
- **サクセス表示**: 正常入力時は緑のチェックマークを表示

### 自動補完機能
- **組織情報**: 過去の登録データからの候補表示
- **上司選択**: 部署選択に連動した上司候補の絞り込み
- **住所入力**: 郵便番号から住所の自動入力

### プログレス管理
- **下書き保存**: 途中保存機能で入力途中のデータを保護
- **セッション管理**: 30分の非アクティブでセッション警告、60分で自動ログアウト
- **復元機能**: 再アクセス時の下書きデータ復元

## UI要件

### ビジュアルデザイン
- **カラーパレット**:
  - プライマリ: #2563EB (青)
  - セカンダリ: #64748B (グレー)
  - エラー: #DC2626 (赤)
  - サクセス: #059669 (緑)
  - 警告: #D97706 (オレンジ)

### フォントシステム
- **見出し**: Noto Sans JP Bold 24px
- **ラベル**: Noto Sans JP Medium 16px
- **入力フィールド**: Noto Sans JP Regular 16px
- **ヘルプテキスト**: Noto Sans JP Regular 14px

### アイコンシステム
- **必須項目**: 赤いアスタリスク (*)
- **ヘルプ**: 疑問符アイコン (?)
- **エラー**: 警告三角形アイコン
- **成功**: チェックマークアイコン

## レスポンシブ対応

### デスクトップ (1024px以上)
- 2カラムレイアウト: 左側にフォーム、右側にヘルプ情報
- フォーム幅: 最大600px、中央配置
- 余白: 左右24px、上下32px

### タブレット (768px-1023px)
- 1カラムレイアウト: フォームを画面幅に合わせて配置
- フォーム幅: 画面幅の90%
- 余白: 左右16px、上下24px

### モバイル (767px以下)
- スタックレイアウト: 全要素を縦積み配置
- フォーム幅: 画面幅の95%
- 余白: 左右8px、上下16px
- ボタンサイズ: 44px以上の高さで指タップに最適化

## アクセシビリティ

### キーボードナビゲーション
- Tab順序の論理的配置
- Enter/Spaceキーでのボタン操作
- Escキーでのモーダル・ドロップダウン閉じる

### スクリーンリーダー対応
- 適切なHTMLセマンティクス使用
- aria-label, aria-describedbyの適切な設定
- エラーメッセージの読み上げ対応

### カラーアクセシビリティ
- コントラスト比4.5:1以上を維持
- 色のみに依存しない情報伝達
- カラーブラインド対応パレット使用

## セキュリティ要件

### データ保護
- HTTPS通信の強制
- 入力データのクライアントサイド暗号化
- セッショントークンの適切な管理

### 入力サニタイゼーション
- XSS攻撃防止のための入力エスケープ
- SQLインジェクション防止
- CSRFトークンの実装

## パフォーマンス要件

### ページロード
- 初回ロード時間: 3秒以内
- フォーム送信時間: 5秒以内
- 画像最適化: WebP形式、遅延読み込み

### ユーザビリティ
- フォーム補完候補表示: 500ms以内
- バリデーションレスポンス: 200ms以内
- 進捗保存: 1秒以内

## エラーハンドリング

### クライアントサイドエラー
- ネットワーク接続エラー時の再試行機能
- フォーム送信失敗時の一時保存
- ブラウザクラッシュ時のデータ復旧

### サーバーサイドエラー
- 500エラー時の適切なエラーページ表示
- メンテナンス時の告知表示
- 部分的な機能停止時の代替手段提供

## 測定・改善指標

### ユーザビリティ指標
- フォーム完了率（目標: 85%以上）
- 平均入力時間（目標: 10分以内）
- エラー発生率（目標: 5%以下）

### パフォーマンス指標
- ページロード時間（目標: 3秒以内）
- フォーム送信成功率（目標: 99%以上）
- 離脱率（目標: 15%以下）