# ユースケース: ユーザーアカウントを作成する

## 基本情報

- **ユースケースID**: UC-SEC-020
- **アクター**: 新規ユーザー, 管理者, HR担当者, システム管理者, アカウント作成システム
- **前提条件**:
  - ユーザー登録システムが稼働している
  - 必要な個人情報と組織情報が利用可能である
  - 組織のユーザー登録ポリシーが定義されている
- **事後条件**:
  - ユーザーアカウントが正常に作成される
  - 初期権限が設定される
  - アカウント作成履歴が記録される

## 詳細フロー

### 基本フロー
1. **アカウント作成要求受付**
   - 新規ユーザーまたは管理者がアカウント作成を要求する
   - システムが要求を受け付け、入力フォームを表示する
   - 必要な情報項目を明示する（氏名、メールアドレス、所属部署、役職等）

2. **基本情報入力・検証**
   - ユーザーが個人情報を入力する（氏名、メールアドレス、電話番号等）
   - システムが入力情報の形式と内容を検証する
   - 重複チェック（既存ユーザーとの照合）を実行する

3. **組織情報設定**
   - 所属組織・部署を選択または入力する
   - 役職・権限レベルを設定する
   - 上司・承認者を指定する

4. **認証情報設定**
   - パスワードポリシーに従った初期パスワードを設定する
   - 多要素認証の設定（必要に応じて）
   - セキュリティ質問の設定（オプション）

5. **アカウント作成実行**
   - システムがユーザーアカウントを作成する
   - 一意のユーザーIDを生成・割り当てる
   - 初期権限とロールを設定する

6. **確認・通知**
   - アカウント作成完了をユーザーに通知する
   - 管理者にアカウント作成を報告する
   - ログイン手順とシステム利用案内を送付する

### 代替フロー
- **A1: 重複ユーザー検出時**
  - 既存ユーザーとの重複が検出された場合
  - 重複内容を明示し、修正または既存アカウント利用を提案する
  - 必要に応じて、アカウント統合手続きを案内する

- **A2: 入力情報不備時**
  - 必須項目の未入力や不正な形式が検出された場合
  - エラー内容を具体的に表示し、修正を要求する
  - 入力支援機能（自動補完、フォーマット例示）を提供する

- **A3: 承認が必要な場合**
  - 組織ポリシーによりアカウント作成に承認が必要な場合
  - 承認者に承認要求を送信し、待機状態とする
  - 承認プロセスの進捗をユーザーに通知する

### 例外フロー
- **E1: システム障害時**
  - アカウント作成処理中にシステム障害が発生した場合
  - 処理を中断し、一時保存された情報を保護する
  - 障害復旧後の再処理手順をユーザーに案内する

- **E2: ポリシー違反検出時**
  - セキュリティポリシーやコンプライアンス要件に違反が検出された場合
  - アカウント作成を拒否し、理由を明示する
  - 管理者に違反試行を報告し、対応を要求する

## ビジネスルール

### アカウント作成ポリシー
- **BR-REG-001**: メールアドレスは組織ドメインまたは承認済みドメインのみ許可
- **BR-REG-002**: パスワードは組織の複雑性要件に準拠必須
- **BR-REG-003**: 同一ユーザーによる複数アカウント作成は原則禁止
- **BR-REG-004**: 管理者権限アカウントの作成には上位管理者の承認が必要

### データ品質要件
- **BR-REG-005**: 氏名は全角文字での入力を推奨
- **BR-REG-006**: 電話番号は国際形式での統一管理
- **BR-REG-007**: 所属情報は最新の組織構造に基づく選択必須

## 非機能要件

### パフォーマンス
- アカウント作成処理は30秒以内に完了する
- 重複チェックは5秒以内にレスポンスを返す
- 同時に100件のアカウント作成要求を処理可能

### セキュリティ
- すべての入力データは暗号化して保存する
- アカウント作成ログは改ざん不可能な形式で記録する
- 個人情報は最小権限の原則に基づきアクセス制御する

### 可用性
- アカウント作成機能の稼働率は99.9%以上を維持する
- 計画メンテナンス時間を除き、24時間365日利用可能

## UI/UX要件

### ユーザビリティ
- 入力フォームは直感的で分かりやすいレイアウトを採用する
- エラーメッセージは具体的で建設的な内容とする
- プログレスインジケーターで進行状況を明示する

### アクセシビリティ
- スクリーンリーダー対応を含むアクセシビリティ基準に準拠する
- 多言語対応（日本語、英語）を提供する
- モバイルデバイスでの利用を考慮したレスポンシブデザイン

## 測定指標

### 効率性指標
- アカウント作成完了率（目標：95%以上）
- 平均作成時間（目標：3分以内）
- エラー発生率（目標：5%以下）

### 品質指標
- 作成済みアカウントの有効性（目標：99%以上）
- 重複アカウント発生率（目標：0.1%以下）
- セキュリティ違反件数（目標：月1件以下）

## 関連ドキュメント

- [ユーザー管理ポリシー](../../../policies/user-management-policy.md)
- [セキュリティ要件仕様](../../../security/security-requirements.md)
- [組織構造定義](../../../organization/organization-structure.md)
- [プライバシーポリシー](../../../privacy/privacy-policy.md)