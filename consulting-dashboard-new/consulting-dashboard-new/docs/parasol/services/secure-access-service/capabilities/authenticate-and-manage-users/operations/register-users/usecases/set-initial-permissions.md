# ユースケース: 初期権限を設定する

## 基本情報

- **ユースケースID**: UC-SEC-022
- **アクター**: システム管理者, セキュリティ管理者, 部門管理者, HR担当者, 権限管理システム
- **前提条件**:
  - ユーザーアカウントが作成され、本人確認が完了している
  - 組織の権限マトリックスとロール定義が存在する
  - ユーザーの所属部署と役職が確定している
- **事後条件**:
  - ユーザーに適切な初期権限が付与される
  - 権限設定履歴が記録される
  - ユーザーがシステム利用を開始できる状態になる

## 詳細フロー

### 基本フロー
1. **権限設定要求開始**
   - システムが本人確認完了済みユーザーの権限設定を開始する
   - ユーザーの所属部署、役職、業務内容を確認する
   - 適用すべき権限ポリシーとロールテンプレートを特定する

2. **基本ロール割り当て**
   - ユーザーの役職に基づく基本ロールを自動割り当てする
   - 部門固有の権限セットを適用する
   - 必要最小限の権限から開始する（最小権限の原則）

3. **業務固有権限設定**
   - 担当業務に必要な特定権限を追加する
   - プロジェクトまたはクライアント固有のアクセス権を設定する
   - 期間限定権限がある場合は有効期限を設定する

4. **承認プロセス実行**
   - 高権限や特殊権限の場合は上位管理者の承認を要求する
   - 承認者に権限設定内容と理由を通知する
   - 承認待ちの間は制限付きアクセスを許可する

5. **権限有効化**
   - 承認完了後、設定された権限を有効化する
   - 権限変更をディレクトリサービスに反映する
   - 関連システムへの権限同期を実行する

6. **確認・通知**
   - ユーザーに付与された権限内容を通知する
   - 利用可能な機能とアクセス範囲を説明する
   - 権限に関する注意事項とポリシーを案内する

### 代替フロー
- **A1: カスタム権限が必要な場合**
  - 標準ロールでカバーできない特殊な権限が必要な場合
  - セキュリティ管理者によるカスタム権限設計を実施する
  - リスク評価と承認プロセスを経て権限を付与する

- **A2: 複数部門兼任の場合**
  - ユーザーが複数部門に所属する場合
  - 各部門の権限を適切に組み合わせる
  - 権限競合や過剰権限付与を防ぐチェックを実行する

- **A3: 権限承認が拒否された場合**
  - 権限要求が承認者により拒否された場合
  - 拒否理由をユーザーと要求者に通知する
  - 代替権限または条件付き承認の検討を提案する

### 例外フロー
- **E1: 権限設定エラー時**
  - 権限設定処理中にシステムエラーが発生した場合
  - 一時的な制限付きアクセスを提供する
  - エラー詳細をログに記録し、管理者に通知する

- **E2: 権限競合検出時**
  - 設定権限間で競合や矛盾が検出された場合
  - 権限設定を一時停止し、セキュリティ管理者に報告する
  - 競合解決まで最小権限での暫定運用を実施する

## ビジネスルール

### 権限設定原則
- **BR-PER-001**: 最小権限の原則に基づき、必要最小限の権限のみ付与する
- **BR-PER-002**: 職責分離の原則により、相互牽制が働く権限分散を実施する
- **BR-PER-003**: 高権限（管理者権限等）の付与には複数承認者の合意が必要
- **BR-PER-004**: 権限の有効期限を設定し、定期的な見直しを実施する

### ロール管理要件
- **BR-PER-005**: 標準ロールテンプレートを基本とし、カスタマイズは例外的扱い
- **BR-PER-006**: 部門横断的な権限には上位管理者の特別承認が必要
- **BR-PER-007**: 外部委託先には制限された権限セットのみ適用する

## 非機能要件

### パフォーマンス
- 権限設定処理は5分以内に完了する
- 権限反映は全システムで30分以内に同期される
- 承認プロセスは営業日1日以内に処理される

### セキュリティ
- 権限設定変更は全て暗号化して記録する
- 高権限の付与・変更は多要素認証必須
- 権限設定プロセスは改ざん防止機能を持つ

### 可用性
- 権限管理システムの稼働率は99.9%以上を維持する
- 緊急時の権限設定機能を24時間提供する

## UI/UX要件

### ユーザビリティ
- 権限内容を視覚的に分かりやすく表示する
- 権限レベルを色分けやアイコンで直感的に表現する
- 権限変更の影響範囲を明確に示す

### 管理効率
- 一括権限設定機能で複数ユーザーの同時処理を可能にする
- 権限テンプレートの再利用機能を提供する
- 権限監査レポートの自動生成機能を実装する

## 測定指標

### 効率性指標
- 権限設定完了率（目標：99%以上）
- 平均権限設定時間（目標：標準権限5分、特殊権限1営業日以内）
- 権限設定エラー率（目標：1%以下）

### セキュリティ指標
- 過剰権限付与率（目標：0.5%以下）
- 権限関連セキュリティインシデント（目標：月1件以下）
- 権限監査での指摘事項数（目標：四半期5件以下）

### 管理効率指標
- 権限管理作業時間削減率（目標：30%削減）
- 自動化率（目標：80%以上）
- 承認プロセス処理時間（目標：平均4時間以内）

## 関連ドキュメント

- [権限管理ポリシー](../../../policies/access-control-policy.md)
- [ロール定義マトリックス](../../../security/role-definition-matrix.md)
- [セキュリティ基準](../../../security/security-standards.md)
- [コンプライアンス要件](../../../compliance/compliance-requirements.md)
- [組織権限規程](../../../governance/organizational-authority.md)