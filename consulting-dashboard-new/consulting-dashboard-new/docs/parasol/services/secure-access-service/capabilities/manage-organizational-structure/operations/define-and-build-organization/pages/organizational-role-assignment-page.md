# ページ定義: 組織ロール割り当てページ

## 基本情報

- **ページID**: PG-SEC-042
- **ページ名**: 組織ロール割り当てページ
- **URL**: `/admin/organization/roles/assignment`
- **対応ユースケース**: UC-SEC-042 (組織ロールを割り当てる)
- **アクセス権限**: 組織管理者, HR担当者, 部門長, 人事部, システム管理者

## 画面の目的

組織構造に基づいて各メンバーに適切な組織ロールを効率的に割り当て、権限と責任を明確化する管理者向け画面。メンバーのスキル・経験を考慮した最適なロール配置と、組織運営の円滑化を実現する。

## 利用者

- **組織管理者**: 組織全体のロール戦略と最適配置
- **HR担当者**: 人事制度に基づくロール管理
- **部門長**: 担当部門内のメンバーロール決定
- **人事部**: キャリア開発と連動したロール設計
- **システム管理者**: ロールとシステム権限の連携

## 画面構成

### ヘッダー部
- **ページタイトル**: 「組織ロール割り当て」
- **パンくずナビ**: ホーム > 組織管理 > ロール割り当て
- **割り当て状況**: 完了率、未割り当てメンバー数、保留中件数
- **操作モード**: 個別割り当て・一括割り当て・承認モード

### メインコンテンツ部

#### メンバー管理エリア
- **メンバー一覧表示**:
  - 部門・チーム別のメンバー表示
  - フィルタリング（未割り当て・ロール別・スキル別）
  - 検索機能（名前・社員番号・職歴）
- **メンバー詳細情報**:
  - 基本情報（氏名・所属・入社日・経歴）
  - 現在のロールと権限状況
  - スキル・資格・評価情報
- **割り当て候補表示**:
  - 推奨ロール（AIによる適性分析）
  - 利用可能ロール一覧
  - ロール適合度スコア

#### ロール割り当てエリア
- **ロール選択インターフェース**:
  - ドラッグ&ドロップによるロール割り当て
  - ロール詳細情報の表示
  - 権限・責任範囲のプレビュー
- **一括割り当て機能**:
  - 条件指定による一括選択
  - テンプレート適用（部門別・職種別）
  - 段階的ロールアップ設定
- **競合・制約チェック**:
  - ロール重複の検出と調整
  - 必須ロールの充足確認
  - 権限制約の自動チェック

#### 割り当て結果確認エリア
- **組織図での確認**:
  - ロール割り当て後の組織図表示
  - メンバー配置の視覚的確認
  - 権限フローの可視化
- **影響分析結果**:
  - 既存業務プロセスへの影響
  - システムアクセス権の変更
  - チーム構成の変化分析
- **承認フロー管理**:
  - 割り当て承認の進捗状況
  - 承認者コメントと修正要求
  - 承認完了後の自動適用設定

### サイドバー部

#### 割り当て支援機能
- **ロール推奨エンジン**:
  - AI による最適ロール提案
  - 過去の成功パターン分析
  - スキルマッチング分析
- **組織バランス分析**:
  - ロール分散の適切性評価
  - 世代・経験バランス分析
  - 専門性カバレッジ確認

#### 設定・管理ツール
- **割り当てテンプレート**:
  - 部門別標準割り当てパターン
  - 職種別ロール構成テンプレート
  - 過去の割り当て事例からの複製
- **進捗管理**:
  - 割り当て完了進捗
  - 承認待ち・保留中の管理
  - スケジュール管理

### フッター部
- **アクションボタン**:
  - 割り当て実行、一時保存、取り消し
  - 承認申請、一括承認、差し戻し
- **ステータス表示**:
  - 必須ロールの充足状況
  - エラー・警告の件数
- **ヘルプ・ガイド**:
  - ロール割り当てのベストプラクティス
  - 操作マニュアル、FAQ

## データ表示

### 表示データ一覧

| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| メンバー一覧 | 表形式 | ○ | 全組織メンバーの基本情報 |
| ロール情報 | カード表示 | ○ | 利用可能なロールと詳細 |
| 割り当て状況 | マトリックス表示 | ○ | メンバー×ロールの割り当て状況 |
| 適合度スコア | スコア表示 | ○ | ロールとメンバーの適合性 |
| 組織図 | グラフィック表示 | × | ロール配置後の組織構造 |
| 履歴 | 時系列表示 | × | 過去の割り当て変更履歴 |

### データの更新頻度
- **メンバー情報**: リアルタイム更新
- **ロール割り当て**: 設定変更時に即座更新
- **適合度分析**: 日次更新

## 入力項目

### フォーム一覧

| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 対象メンバー | 検索・選択 | ○ | 有効メンバー | ロール割り当て対象者 |
| 割り当てロール | ドロップダウン | ○ | 利用可能ロール | 選択するロール |
| 有効期間 | 日付範囲 | ○ | 論理的整合性 | ロールの有効期間 |
| 権限レベル | レベル選択 | ○ | ロール制約内 | 権限の詳細レベル |
| 割り当て理由 | テキストエリア | ○ | 10-500文字 | 割り当ての根拠・理由 |
| 特別条件 | チェックボックス | × | - | 特別な権限・制約 |
| 承認者 | ユーザー選択 | × | 承認権限保有者 | 割り当て承認者 |

## アクション・操作

### 主要アクション
- **個別ロール割り当て**: 単一メンバーへのロール設定
- **一括ロール割り当て**: 複数メンバーへの同時割り当て
- **ロール変更**: 既存ロールの変更・更新
- **適合性分析**: メンバーとロールの適合度評価
- **割り当て承認**: ロール割り当ての承認処理
- **組織図更新**: 割り当て結果の組織図反映

### 副次アクション
- **推奨ロール確認**: AI による最適ロール提案確認
- **競合解決**: ロール重複・競合の調整
- **履歴確認**: 過去の割り当て変更履歴閲覧
- **テンプレート適用**: 標準パターンの一括適用
- **エクスポート**: 割り当て結果の外部出力

## 画面の振る舞い

### ユーザー操作への反応
- **メンバー選択時**: 詳細情報と推奨ロールの即座表示
- **ロール選択時**: 権限詳細と影響範囲の自動表示
- **一括選択時**: 対象メンバー数と影響度の表示
- **割り当て実行時**: プログレスバーと結果の段階表示

### 条件による表示変更
- **未割り当てメンバー表示時**: 割り当て優先度の視覚的強調
- **権限競合検出時**: 競合箇所のハイライトと解決提案
- **承認待ち状態時**: 承認フロー状況と次のアクション表示

## 画面遷移

### 遷移元画面
- 階層関係設定ページ: 階層構造確定後のロール配置
- 組織管理ダッシュボード: ロール管理メニューから
- メンバー管理ページ: 個別メンバーのロール編集

### 遷移先画面
- 組織ポリシー設定ページ: ロール割り当て完了後の制度設計
- 権限管理ページ: ロール連動権限の詳細設定
- 組織確認ページ: 最終的な組織構成の確認

## エラーハンドリング

- **ロール競合エラー**: 競合するロールの詳細表示と調整案提示
- **権限制約違反**: 制約内容の説明と代替ロール提案
- **必須ロール未充足**: 不足ロールの特定と緊急度表示
- **承認権限不足**: 適切な承認者の自動提案
- **システム連携エラー**: 外部システムとの連携失敗時の対処法

## アクセシビリティ要件

- **キーボードナビゲーション**: Tab順序でのメンバー・ロール選択
- **スクリーンリーダー対応**: ロール詳細の構造化読み上げ
- **色覚障害対応**: 適合度スコアの色以外での表現
- **操作支援**: 複雑な一括操作の段階的ガイダンス

## レスポンシブ対応

- **デスクトップ（1200px以上）**:
  - 4ペインレイアウト（メンバー、ロール、割り当て、確認）
  - 詳細な情報表示と高度な操作機能
- **タブレット（768px-1199px）**:
  - 3ペインレイアウト（タブ切り替え）
  - 重要機能に特化した表示
- **モバイル（767px以下）**:
  - 1ペインレイアウト（ウィザード形式）
  - 基本的な割り当て操作のみ

## パフォーマンス要件

- **メンバー一覧表示**: 1000名規模で3秒以内
- **適合性分析**: 100名同時分析で10秒以内
- **一括割り当て**: 500名同時処理で30秒以内
- **組織図更新**: 割り当て反映で5秒以内

## セキュリティ要件

- **割り当て権限確認**: 対象範囲に応じた詳細権限チェック
- **操作監査**: 全てのロール変更の完全ログ記録
- **データ保護**: メンバー・ロール情報の暗号化
- **承認統制**: 重要ロール割り当ての多段階承認

## 特殊機能

### AI支援機能
- **最適配置提案**: 組織全体の最適ロール配置提案
- **適性分析**: メンバーの潜在能力とロール適合性分析
- **配置シミュレーション**: 異なる配置パターンの効果予測

### 大規模組織対応
- **段階的割り当て**: 大規模組織の段階的ロール配置
- **並行作業**: 複数担当者による同時割り当て作業
- **負荷分散**: 大量データ処理の効率化

### 高度なロール管理
- **動的ロール**: 業務状況に応じた動的ロール変更
- **時限ロール**: 期間限定・条件付きロール設定
- **継承ルール**: 組織変更時のロール自動継承