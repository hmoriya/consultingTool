# ページ定義: 組織構造定義ページ

## 基本情報

- **ページID**: PG-SEC-040
- **ページ名**: 組織構造定義ページ
- **URL**: `/admin/organization/structure/define`
- **対応ユースケース**: UC-SEC-040 (組織構造を定義する)
- **アクセス権限**: 組織管理者, HR担当者, システム管理者, 経営層

## 画面の目的

企業や部門の組織構造を体系的に設計・定義するための管理者向け画面。部門構成、役職体系、組織方針を統合的に管理し、効率的で持続可能な組織基盤を構築する。

## 利用者

- **組織管理者**: 組織全体の構造設計と管理
- **HR担当者**: 人事制度と連動した組織設計
- **システム管理者**: システム設定と組織構造の連携
- **経営層**: 組織戦略に基づく構造決定

## 画面構成

### ヘッダー部
- **ページタイトル**: 「組織構造定義」
- **パンくずナビ**: ホーム > 組織管理 > 組織構造定義
- **現在の構造サマリー**: 登録済み部門数、階層数、メンバー数
- **保存状態表示**: 最終保存日時と未保存変更の警告

### メインコンテンツ部

#### 組織方針設定セクション
- **組織タイプ選択**:
  - フラット型、階層型、マトリックス型、ハイブリッド型の選択
  - 各タイプの特徴と適用条件の説明
  - 選択に応じた設定項目の動的表示
- **組織基本方針**:
  - 組織の目的・ミッション・ビジョンの入力
  - 組織運営の基本原則設定
  - 意思決定プロセスの方針設定

#### 部門構成設計セクション
- **部門マスタ管理**:
  - 部門の新規作成・編集・削除機能
  - 部門名、目的、責務、予算規模の入力
  - 部門コードの自動生成・手動設定
- **部門詳細設定**:
  - 各部門の業務内容と成果指標
  - 部門間の協力関係と依存関係
  - 部門の設立・廃止予定の管理
- **組織テンプレート活用**:
  - 業界別・規模別のテンプレート選択
  - テンプレートのカスタマイズ機能
  - 既存組織からの構造複製

#### 役職体系定義セクション
- **職位階層設定**:
  - 職位レベル（1-10級）の定義
  - 各レベルの権限範囲と責任範囲
  - 昇進・昇格の要件設定
- **役職マスタ管理**:
  - 役職名、職務内容、必要スキルの定義
  - 役職間の上下関係と並列関係
  - 専門職・管理職の区分設定
- **権限レベル設定**:
  - 決裁権限（金額・範囲）の設定
  - システムアクセス権限の基本設定
  - 情報へのアクセスレベル定義

### サイドバー部

#### 設計支援機能
- **組織設計ガイド**:
  - 効果的な組織設計の原則
  - 業界のベストプラクティス
  - よくある設計ミスと対策
- **整合性チェック**:
  - 設定内容の論理チェック
  - 矛盾箇所の自動検出
  - 修正推奨事項の提示

#### プレビュー・検証
- **組織図プレビュー**:
  - リアルタイム組織図生成
  - 階層構造の視覚的確認
  - 部門・役職の配置確認
- **影響分析**:
  - 既存データへの影響予測
  - 変更による業務への影響
  - システム設定への影響

### フッター部
- **アクションボタン**:
  - 下書き保存、確定保存、取り消し
  - 組織図エクスポート、テンプレート保存
- **設定状況表示**:
  - 必須項目の完了状況
  - 設定プロセスの進捗表示
- **ヘルプ・ガイダンス**:
  - 設定手順の詳細ガイド
  - FAQ、操作動画へのリンク

## データ表示

### 表示データ一覧

| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| 組織基本情報 | フォーム表示 | ○ | 組織名、タイプ、基本方針 |
| 部門構成 | ツリー表示 | ○ | 階層的な部門構造 |
| 役職体系 | 表形式 | ○ | 職位・役職の一覧と関係 |
| 組織図 | グラフィック表示 | × | 視覚的な組織構造 |
| テンプレート | カード表示 | × | 利用可能な組織テンプレート |
| 設定履歴 | 時系列表示 | × | 過去の変更履歴 |

### データの更新頻度
- **組織情報**: リアルタイム更新
- **組織図**: 設定変更時に即座更新
- **テンプレート**: 日次更新

## 入力項目

### フォーム一覧

| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 組織名 | テキスト入力 | ○ | 1-100文字 | 組織・会社の正式名称 |
| 組織タイプ | ラジオボタン | ○ | 事前定義値 | フラット/階層/マトリックス |
| 部門名 | テキスト入力 | ○ | 1-50文字 | 部門の正式名称 |
| 部門コード | テキスト入力 | ○ | 英数字10文字 | 部門識別コード |
| 部門目的 | テキストエリア | ○ | 10-500文字 | 部門の存在目的 |
| 役職名 | テキスト入力 | ○ | 1-30文字 | 役職の正式名称 |
| 職位レベル | 数値選択 | ○ | 1-10 | 組織内での職位階層 |
| 権限範囲 | チェックボックス | ○ | 複数選択 | 決裁・アクセス権限 |

## アクション・操作

### 主要アクション
- **組織構造作成**: 新規組織構造の定義
- **部門追加・編集**: 部門情報の管理
- **役職体系設定**: 職位・役職の定義
- **組織図生成**: 構造の視覚化
- **テンプレート適用**: 既存テンプレートの活用
- **整合性チェック**: 設定内容の検証

### 副次アクション
- **構造複製**: 他組織からの構造コピー
- **一括インポート**: CSVからの組織データ取り込み
- **設定履歴確認**: 過去の変更内容確認
- **影響分析実行**: 変更による影響の事前確認
- **プレビュー表示**: 設定結果の事前確認

## 画面の振る舞い

### ユーザー操作への反応
- **組織タイプ選択時**: 選択に応じた設定項目の表示・非表示
- **部門追加時**: 組織図の即座更新と関連設定項目の表示
- **役職設定時**: 権限設定項目の動的表示と制約チェック
- **保存実行時**: 整合性チェックと確認ダイアログの表示

### 条件による表示変更
- **新規作成時**: テンプレート選択とガイダンスの強調表示
- **既存編集時**: 変更箇所のハイライトと影響範囲の表示
- **大規模組織時**: 段階的設定モードと進捗管理の表示

## 画面遷移

### 遷移元画面
- 組織管理ダッシュボード: 組織構造管理メニューから
- 組織構造一覧ページ: 新規作成・編集ボタンから
- 初期設定ウィザード: 組織セットアップ段階から

### 遷移先画面
- 階層関係設定ページ: 基本構造確定後の詳細設定
- 組織ロール割り当てページ: 構造完成後のメンバー配置
- 組織構造確認ページ: 設定完了後の最終確認

## エラーハンドリング

- **組織構造の矛盾**: 循環参照や論理的矛盾の検出と修正ガイダンス
- **必須項目未入力**: 項目別の詳細なエラーメッセージと入力支援
- **権限設定エラー**: 権限の重複・欠如の警告と推奨設定
- **システム制約違反**: 制約内容の説明と代替案の提示
- **保存失敗**: エラー原因の特定と復旧方法の案内

## アクセシビリティ要件

- **キーボードナビゲーション**: Tab順序での全機能アクセス
- **スクリーンリーダー対応**: 組織構造の論理的な読み上げ
- **色覚障害対応**: 組織図の色以外での階層・関係表現
- **拡大表示対応**: 複雑な組織図の可読性確保

## レスポンシブ対応

- **デスクトップ（1200px以上）**:
  - 3ペインレイアウト（設定、プレビュー、ガイド）
  - 詳細な組織図と設定項目の同時表示
- **タブレット（768px-1199px）**:
  - 2ペインレイアウト（タブ切り替え式）
  - 重要な設定項目に特化した表示
- **モバイル（767px以下）**:
  - 1ペインレイアウト（ステップ式ウィザード）
  - 段階的な組織構造設定

## パフォーマンス要件

- **初期表示**: 3秒以内
- **組織図生成**: 部門数に関わらず5秒以内
- **整合性チェック**: 2秒以内
- **保存処理**: 10秒以内

## セキュリティ要件

- **変更権限確認**: 組織変更権限の厳格なチェック
- **操作ログ記録**: 全ての組織構造変更の詳細記録
- **データ暗号化**: 組織情報の安全な保存・送信
- **バックアップ**: 変更前の組織構造の自動バックアップ

## 特殊機能

### AI支援機能
- **組織設計提案**: 業界・規模に基づく最適構造の提案
- **効率性分析**: 設定した組織構造の効率性評価
- **改善提案**: ベストプラクティスに基づく改善案

### 大規模組織対応
- **段階的構築**: 大規模組織の段階的な構造定義
- **並行編集**: 複数管理者による同時編集機能
- **変更管理**: 大規模変更のスケジューリングと影響管理

### 連携機能
- **HRシステム連携**: 人事管理システムとの組織情報同期
- **ディレクトリ連携**: Active Directory等との組織構造連携
- **外部システム**: ERPや業務システムとの組織マスタ連携