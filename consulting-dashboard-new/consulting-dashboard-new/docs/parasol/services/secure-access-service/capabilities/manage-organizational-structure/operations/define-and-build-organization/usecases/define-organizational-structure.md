# ユースケース: 組織構造を定義する

## 基本情報

- **ユースケースID**: UC-SEC-040
- **ユースケース名**: 組織構造を定義する
- **アクター**: 組織管理者, HR担当者, システム管理者, 経営層
- **概要**: 企業や部門の組織構造を明確に定義し、部門・役職・報告関係を体系的に設計する

## 事前条件

- 組織管理者がシステムにログインしている
- 組織管理権限を保有している
- 定義対象となる組織スコープが決定されている
- 組織設計のガイドラインが準備されている

## 事後条件

### 成功時
- 組織構造が明確に定義されている
- 部門階層が設定されている
- 役職体系が確立されている
- 組織図が生成可能な状態になっている
- 組織データが他のシステムと連携可能になっている

### 失敗時
- 組織構造が未定義のまま残る
- 部門間の関係が曖昧になる
- 権限設計に支障が生じる
- 人事管理システムとの連携に問題が発生する

## 基本フロー

1. 組織管理者が組織構造定義機能にアクセスする
2. システムが現在の組織状況と設定可能な構造タイプを表示する
3. 組織管理者が組織の基本方針（フラット型・階層型・マトリックス型）を選択する
4. システムが選択した方針に応じた設定オプションを提示する
5. 組織管理者が部門の基本情報（名称・目的・責務）を入力する
6. システムが部門設定の妥当性を検証する
7. 組織管理者が部門間の階層関係と報告ラインを設定する
8. システムが組織階層の整合性をチェックする
9. 組織管理者が役職体系（職位・等級・権限レベル）を定義する
10. システムが役職間の関係性を検証する
11. 組織管理者が定義内容をプレビューで確認する
12. システムが完成した組織構造を保存し、組織図を生成する

## 代替フロー

### 代替フロー1: 既存組織の修正
- 3a. 既存の組織構造を修正する場合
  - 3a1. システムが現在の組織構造を表示する
  - 3a2. 組織管理者が修正箇所を特定・編集する
  - 3a3. システムが変更による影響範囲を分析する
  - 3a4. 基本フロー6に戻る

### 代替フロー2: テンプレートの使用
- 3b. 組織テンプレートを使用する場合
  - 3b1. システムが業界別・規模別のテンプレートを提示する
  - 3b2. 組織管理者が適切なテンプレートを選択する
  - 3b3. システムがテンプレートを組織情報で調整する
  - 3b4. 基本フロー5に戻る

### 代替フロー3: 段階的定義
- 7a. 複雑な組織構造の場合
  - 7a1. 組織管理者が段階的定義モードを選択する
  - 7a2. システムが主要部門から優先的に設定するガイダンスを表示する
  - 7a3. 組織管理者が段階別に部門階層を構築する
  - 7a4. 基本フロー8に戻る

## 例外フロー

### 例外1: 組織構造の矛盾
- 8a. 組織階層に矛盾が検出された場合
  - 8a1. システムが矛盾箇所と修正案を提示する
  - 8a2. 組織管理者が矛盾を修正するか、設計を見直す
  - 8a3. 修正後、基本フロー8から再開する

### 例外2: 権限設定エラー
- 9a. 役職権限に設定エラーがある場合
  - 9a1. システムが権限競合や不整合を警告する
  - 9a2. 組織管理者が権限設定を調整する
  - 9a3. 基本フロー10から再開する

### 例外3: システム制約違反
- 12a. システム制約（部門数上限など）に違反した場合
  - 12a1. システムが制約内容と代替案を提示する
  - 12a2. 組織管理者が設計を調整するか、制約緩和を申請する
  - 12a3. 調整後、該当箇所から再開する

## 特別要件

- **性能**: 組織図生成は10秒以内で完了する
- **可用性**: 組織変更時も既存の権限には影響しない
- **セキュリティ**: 組織情報の変更は完全に監査ログに記録される
- **互換性**: 既存のHRシステムやディレクトリサービスと連携できる

## 関連ユースケース

- **包含**: 「階層関係を確立する」「組織ロールを割り当てる」
- **拡張**: 「組織ポリシーを設定する」
- **汎化**: 「組織変更を実行する」