# ユースケース: 組織図を作成する

## 基本情報

- **ユースケースID**: UC-SEC-044
- **ユースケース名**: 組織図を作成する
- **アクター**: 組織管理者, HR担当者, 部門長, 経営層, システム管理者
- **概要**: 組織構造データに基づいて視覚的で理解しやすい組織図を自動生成し、組織の全体像を効果的に可視化する

## 事前条件

- 組織構造と階層関係が定義されている
- 組織図作成権限を保有している
- メンバーの配置情報が最新の状態である
- 組織図の用途・目的が明確になっている

## 事後条件

### 成功時
- 最新の組織構造を反映した組織図が生成されている
- 階層関係と報告ラインが明確に表示されている
- 各部門・メンバーの配置が視覚的に確認できる
- 組織図が指定形式でエクスポート可能になっている
- 関係者が組織構造を容易に理解できる状態になっている

### 失敗時
- 組織図が作成されない、または不完全になる
- 階層関係が正しく表示されない
- 組織の理解に混乱が生じる
- データの不整合が表面化する

## 基本フロー

1. 組織管理者が組織図作成機能にアクセスする
2. システムが現在の組織データと利用可能な図表スタイルを表示する
3. 組織管理者が組織図の目的（全体図・部門図・職能図）を選択する
4. システムが選択された目的に応じた設定オプションを提示する
5. 組織管理者が表示範囲（全体・特定部門・階層レベル）を設定する
6. システムが設定された範囲のデータ整合性を確認する
7. 組織管理者が図表スタイル（縦型・横型・円形・マトリックス）を選択する
8. システムが選択されたスタイルに最適なレイアウトを計算する
9. 組織管理者が表示項目（名前・役職・写真・連絡先）を設定する
10. システムがレイアウトと表示項目に基づいて組織図を生成する
11. 組織管理者が生成された組織図をプレビューで確認する
12. システムが組織図を保存し、指定された形式でエクスポートする

## 代替フロー

### 代替フロー1: カスタムテンプレートの使用
- 7a. 既存のテンプレートをカスタマイズする場合
  - 7a1. 組織管理者が利用可能なテンプレート一覧を確認する
  - 7a2. システムが各テンプレートのプレビューと特徴を表示する
  - 7a3. 組織管理者がベースとなるテンプレートを選択する
  - 7a4. システムがテンプレートのカスタマイズ画面を提供する
  - 7a5. 基本フロー9に戻る

### 代替フロー2: 段階的組織図作成
- 5b. 大規模組織で段階的に作成する場合
  - 5b1. 組織管理者が作成優先度と対象範囲を設定する
  - 5b2. システムが段階的作成のスケジュールを提案する
  - 5b3. 組織管理者が第1段階の組織図を作成・確認する
  - 5b4. システムが段階完了を記録し、次段階の準備を行う
  - 5b5. 基本フロー7に戻る

### 代替フロー3: リアルタイム更新設定
- 12a. 自動更新機能を設定する場合
  - 12a1. 組織管理者がリアルタイム更新の設定を選択する
  - 12a2. システムが更新頻度と更新条件の設定画面を表示する
  - 12a3. 組織管理者が自動更新ルールを設定する
  - 12a4. システムが設定されたルールで継続的更新を開始する

## 例外フロー

### 例外1: データ不整合の検出
- 6a. 組織データに不整合が検出された場合
  - 6a1. システムが不整合箇所と修正が必要な項目を表示する
  - 6a2. 組織管理者が不整合を修正するか、作成範囲を調整する
  - 6a3. システムが修正後のデータ整合性を再確認する
  - 6a4. 基本フロー6から再開する

### 例外2: レイアウト計算エラー
- 8a. 複雑な組織構造でレイアウト計算が困難な場合
  - 8a1. システムが計算困難な理由と代替スタイルを提示する
  - 8a2. 組織管理者が構造を簡略化するか、別スタイルを選択する
  - 8a3. システムが調整後の条件でレイアウトを再計算する
  - 8a4. 基本フロー8から再開する

### 例外3: システムリソース不足
- 10a. 大規模組織図の生成でリソース不足が発生した場合
  - 10a1. システムがリソース状況と軽量化オプションを提示する
  - 10a2. 組織管理者が表示詳細レベルを調整するか、分割生成を選択する
  - 10a3. システムが調整された設定で組織図を再生成する
  - 10a4. 基本フロー10から再開する

## 特別要件

- **性能**: 1000名規模の組織図を15秒以内で生成する
- **可用性**: 組織図生成中も他の組織管理機能は利用可能である
- **品質**: 生成される組織図は印刷・配布に適した解像度を持つ
- **互換性**: 一般的なオフィスソフトウェアで利用可能な形式で出力される

## 関連ユースケース

- **前提**: 「組織構造を定義する」「階層関係を確立する」
- **包含**: 「階層関係を表示する」
- **拡張**: 「可視化オプションをカスタマイズする」「組織図をエクスポートする」
- **汎化**: 「組織情報を可視化する」