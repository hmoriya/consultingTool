# ユースケース: 可視化オプションをカスタマイズする

## 基本情報

- **ユースケースID**: UC-SEC-046
- **ユースケース名**: 可視化オプションをカスタマイズする
- **アクター**: 組織管理者, HR担当者, 部門長, 一般ユーザー, システム管理者
- **概要**: 組織図の表示スタイル、色分け、表示項目などを用途や好みに応じてカスタマイズし、より効果的で理解しやすい組織可視化を実現する

## 事前条件

- 基本的な組織図が表示されている
- カスタマイズ対象の組織図が確定している
- ユーザーがカスタマイズ権限を保有している
- カスタマイズの目的・用途が明確になっている

## 事後条件

### 成功時
- ユーザーの要求に応じたカスタマイズが適用されている
- 可視化の目的に最適化された表示が実現されている
- カスタマイズ設定が保存され、再利用可能になっている
- 組織情報の理解と活用が向上している
- 設定の共有や標準化が可能になっている

### 失敗時
- カスタマイズが正しく適用されない
- 表示が不適切になり理解を阻害する
- 設定の保存・共有ができない
- パフォーマンスの劣化が発生する

## 基本フロー

1. ユーザーが組織図のカスタマイズ機能にアクセスする
2. システムが現在の表示設定と利用可能なカスタマイズオプションを表示する
3. ユーザーがカスタマイズの種類（レイアウト・色・項目・フィルタ）を選択する
4. システムが選択された種類に応じた詳細設定画面を提供する
5. ユーザーがレイアウトスタイル（縦型・横型・円形・自由配置）を設定する
6. システムが設定に基づいてプレビューを即座更新する
7. ユーザーが色分けルール（部門別・職位別・プロジェクト別）を設定する
8. システムが色分けを適用したプレビューを表示する
9. ユーザーが表示項目（写真・役職・連絡先・スキル）を選択する
10. システムが選択項目を反映したレイアウトを再計算する
11. ユーザーがカスタマイズ結果を確認し、設定を保存する
12. システムがカスタマイズ設定を保存し、組織図に適用する

## 代替フロー

### 代替フロー1: テンプレートベースカスタマイズ
- 3a. 既存テンプレートをベースにカスタマイズする場合
  - 3a1. ユーザーが利用可能なテンプレート一覧を確認する
  - 3a2. システムが各テンプレートのプレビューと用途を表示する
  - 3a3. ユーザーがベースとなるテンプレートを選択する
  - 3a4. システムがテンプレートを読み込み、カスタマイズ可能な項目を表示する
  - 3a5. 基本フロー5に戻る

### 代替フロー2: 段階的カスタマイズ
- 5b. 複雑なカスタマイズを段階的に行う場合
  - 5b1. ユーザーがカスタマイズの優先順位を設定する
  - 5b2. システムが段階的設定のガイダンスを表示する
  - 5b3. ユーザーが各段階で設定を完了・確認する
  - 5b4. システムが段階ごとの設定結果を記録・統合する
  - 5b5. 最終段階で基本フロー11に進む

### 代替フロー3: 共同カスタマイズ
- 11a. 複数ユーザーで共同でカスタマイズする場合
  - 11a1. ユーザーが共同編集モードを有効化する
  - 11a2. システムが参加者の権限と編集可能範囲を確認する
  - 11a3. 各ユーザーが担当範囲のカスタマイズを実行する
  - 11a4. システムが変更内容を統合し、競合を解決する
  - 11a5. 基本フロー12に戻る

## 例外フロー

### 例外1: カスタマイズ制約違反
- 8a. 設定がシステム制約に違反する場合
  - 8a1. システムが制約内容と違反理由を明示する
  - 8a2. システムが制約を満たす代替設定を提案する
  - 8a3. ユーザーが代替設定を採用するか、設定を調整する
  - 8a4. 制約クリア後、基本フロー8から再開する

### 例外2: パフォーマンス劣化
- 10a. カスタマイズによりパフォーマンスが劣化する場合
  - 10a1. システムがパフォーマンス影響と改善策を表示する
  - 10a2. ユーザーが設定を簡略化するか、表示範囲を限定する
  - 10a3. システムが調整された設定でパフォーマンスを再評価する
  - 10a4. 基本フロー10から再開する

### 例外3: 設定保存エラー
- 12a. カスタマイズ設定の保存に失敗した場合
  - 12a1. システムがエラー原因と一時保存状況を確認する
  - 12a2. システムが復旧方法と設定のバックアップ状況を表示する
  - 12a3. ユーザーが復旧を試行するか、設定を再入力する
  - 12a4. 成功後、基本フロー12から再開する

## 特別要件

- **応答性**: カスタマイズ変更のプレビューは2秒以内で更新される
- **柔軟性**: 多様な用途・好みに対応できる豊富なオプションを提供する
- **保存性**: カスタマイズ設定は確実に保存され、再利用可能である
- **共有性**: 設定をチーム・組織で共有・標準化できる

## 関連ユースケース

- **前提**: 「組織図を作成する」「階層関係を表示する」
- **拡張**: 「組織図をエクスポートする」
- **汎化**: 「組織表示を最適化する」