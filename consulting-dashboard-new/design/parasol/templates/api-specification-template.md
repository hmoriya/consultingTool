# API仕様: [API機能名] [[API Name]] [[API_NAME]]

## APIの目的

### ビジネス機能
[このAPIが提供する主要なビジネス機能を明確に記述]
[どんな業務課題を解決するのかを含める]

### 利用シーン
- **[シーン1]**: [どのような業務プロセスで使用されるか]
- **[シーン2]**: [どのようなタイミングで必要となるか]
- **[シーン3]**: [どのような判断や処理のために使うか]

### 提供価値
- **効率化**: [どのような作業が効率化されるか]
- **自動化**: [どのような処理が自動化されるか]
- **統合**: [どのようなシステム連携が可能になるか]

## 利用者

### 呼び出し元
- **[システム名/ロール名]** [[System/Role]] [[SYSTEM_ROLE]]
  - 利用目的: [なぜこのAPIを利用するのか]
  - 利用頻度: [日次/随時/イベント駆動]
  - 利用パターン: [単発/連続/バッチ]

- **[別のシステム名/ロール名]** [[System/Role2]] [[SYSTEM_ROLE_2]]
  - 利用目的: [別の利用目的]
  - 利用頻度: [利用パターン]

### 認可要件
- **必要な権限**: [どのような権限レベルが必要か]
- **認証方式**: [利用者をどのように識別するか]
- **アクセス制御**: [データやリソースへのアクセス制限]
- **監査要件**: [利用履歴の記録要否]

## 機能仕様

### 処理概要
1. **[処理ステップ1]**: [何を行うか]
   - 詳細: [具体的な処理内容]
2. **[処理ステップ2]**: [次に何を行うか]
   - 詳細: [具体的な処理内容]
3. **[処理ステップ3]**: [最後に何を行うか]
   - 詳細: [具体的な処理内容]

### ビジネスルール
- **[ルール名1]**: [適用されるビジネスルール]
  - 条件: [どのような場合に適用されるか]
  - 影響: [処理がどのように変わるか]
  - 例: [具体的な例]

- **[ルール名2]**: [別のビジネスルール]
  - 条件: [適用条件]
  - 影響: [処理への影響]
  - 例外: [例外的な扱い]

## 情報定義

### 要求情報

#### 必須情報
- **[識別情報]** [[Identifier]] [[IDENTIFIER]]
  - 意味: [この情報が特定するもの]
  - 形式: [どのような形式の値か]
  - 例: `[具体例]`
  - 制約: [値の制限や条件]

- **[対象情報]** [[TargetInfo]] [[TARGET_INFO]]
  - 意味: [処理対象を示す情報]
  - 形式: [値の形式]
  - 例: `[具体例]`
  - 検証: [どのような確認を行うか]

#### 任意情報
- **[フィルタ条件]** [[FilterCriteria]] [[FILTER_CRITERIA]]
  - 意味: [結果を絞り込む条件]
  - 初期値: [省略時の動作]
  - 形式: [条件の指定方法]
  - 影響: [指定時の処理の変化]

- **[オプション設定]** [[Options]] [[OPTIONS]]
  - 意味: [処理の詳細制御]
  - 選択肢: [指定可能な値]
  - 初期値: [デフォルトの動作]

### 応答情報

#### 正常応答
- **[処理結果]** [[ProcessResult]] [[PROCESS_RESULT]]
  - 意味: [処理の成否や結果]
  - 内容: [含まれる情報]
  - 形式: [データ構造]
  - 用途: [呼び出し元での利用方法]

- **[詳細データ]** [[DetailData]] [[DETAIL_DATA]]
  - 意味: [要求に対する詳細情報]
  - 構造: 
    - [項目1]: [説明]
    - [項目2]: [説明]
    - [項目3]: [説明]
  - 条件: [どのような場合に含まれるか]

#### メタ情報
- **[処理情報]** [[ProcessInfo]] [[PROCESS_INFO]]
  - 処理時刻: [いつ処理されたか]
  - 処理時間: [どのくらいかかったか]
  - 件数情報: [処理した件数等]

## 処理フロー

### 正常フロー
1. **要求の受付**
   - 受付確認: [要求を受け付けたことの確認]
   - 形式確認: [要求情報の形式チェック]

2. **権限の確認**
   - 認証確認: [呼び出し元の特定]
   - 認可確認: [実行権限の確認]
   - アクセス権: [データへのアクセス権確認]

3. **情報の検証**
   - 必須項目: [必須情報の存在確認]
   - 値の妥当性: [ビジネスルールに照らした確認]
   - 整合性: [他の情報との整合性確認]

4. **処理の実行**
   - メイン処理: [主要な業務処理]
   - 関連処理: [付随する処理]
   - 記録: [処理履歴の記録]

5. **結果の生成**
   - 結果集計: [処理結果のまとめ]
   - 形式変換: [応答形式への変換]
   - 付加情報: [メタ情報の追加]

### エラーフロー

#### 検証エラー時
1. **エラーの特定**
   - エラー箇所: [どの項目でエラーか]
   - エラー内容: [何が問題か]

2. **エラー情報の生成**
   - エラー種別: [エラーの分類]
   - 詳細説明: [利用者向けの説明]
   - 対処方法: [どうすれば解決するか]

#### 処理エラー時
1. **処理の中止**
   - ロールバック: [実行済み処理の取り消し]
   - 状態復元: [元の状態への復帰]

2. **エラー通知**
   - エラー内容: [何が起きたか]
   - 影響範囲: [どこまで影響するか]
   - 復旧方法: [どう対処すべきか]

## エラー定義

### ビジネスエラー
- **[権限不足エラー]**
  - エラーID: `BIZ001`
  - 発生条件: 必要な権限を持たない場合
  - メッセージ: "この操作を実行する権限がありません"
  - 対処方法: 適切な権限を持つ利用者で再実行

- **[データ不整合エラー]**
  - エラーID: `BIZ002`
  - 発生条件: ビジネスルールに違反する場合
  - メッセージ: "[具体的な違反内容]"
  - 対処方法: データを修正して再実行

- **[業務制約エラー]**
  - エラーID: `BIZ003`
  - 発生条件: 業務上の制約に違反
  - メッセージ: "[制約の説明]"
  - 対処方法: 制約を満たすよう調整

### システムエラー
- **[一時的エラー]**
  - エラーID: `SYS001`
  - 発生条件: リソース不足等の一時的問題
  - メッセージ: "一時的に処理できません"
  - 対処方法: しばらく待って再実行

- **[連携エラー]**
  - エラーID: `SYS002`
  - 発生条件: 外部システムとの連携失敗
  - メッセージ: "システム連携エラーが発生しました"
  - 対処方法: システム管理者に連絡

## 利用制限

### 利用条件
- **利用可能時間**: [24時間/営業時間内/特定時間帯]
  - 詳細: [具体的な時間帯]
  - メンテナンス: [定期メンテナンス時間]

- **同時実行数**: [同時に処理できる数]
  - 理由: [なぜ制限があるか]
  - 待機処理: [制限超過時の動作]

### 制限事項
- **呼び出し頻度**: [単位時間あたりの最大回数]
  - 単位: [秒/分/時]
  - 制限値: [具体的な回数]
  - 超過時: [制限超過時の動作]

- **データ量制限**: [一度に処理できるデータ量]
  - 最大件数: [レコード数]
  - 最大サイズ: [データサイズ]
  - 分割方法: [制限を超える場合の対処]

- **処理時間制限**: [最大処理時間]
  - タイムアウト: [制限時間]
  - 長時間処理: [代替手段]

## 関連API

### 前提API
- **[認証API]** [[AuthAPI]] [[AUTH_API]]
  - 関係: このAPI実行前に認証が必要
  - 取得情報: 認証トークン
  - 有効期限: トークンの有効期間

### 後続API
- **[結果取得API]** [[ResultAPI]] [[RESULT_API]]
  - 関係: 処理結果の詳細を取得
  - 利用タイミング: 非同期処理完了後
  - 引き継ぎ情報: 処理ID

### 代替API
- **[簡易版API]** [[SimplifiedAPI]] [[SIMPLIFIED_API]]
  - 用途: より簡単な処理が必要な場合
  - 違い: [機能の違い]
  - 使い分け: [選択基準]

## 利用例

### 基本的な利用例
1. **シナリオ**: [典型的な利用場面]
2. **要求内容**: [具体的な要求データ]
3. **期待結果**: [返される結果]
4. **後続処理**: [結果を使った処理]

### 応用例
1. **シナリオ**: [特殊な利用場面]
2. **要求内容**: [オプションを含む要求]
3. **処理の流れ**: [どのように処理されるか]
4. **活用方法**: [結果の活用例]

## 注意事項

### セキュリティ上の注意
- [機密情報の取り扱い]
- [アクセス記録の保持]
- [不正利用の防止]

### パフォーマンス上の注意
- [大量データ処理時の考慮]
- [ピーク時間の回避]
- [キャッシュの活用]

### 運用上の注意
- [定期的な利用状況確認]
- [エラー発生時の対応]
- [バージョン管理]