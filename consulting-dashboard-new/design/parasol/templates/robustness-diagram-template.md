# ロバストネス図: [ユースケース名] [[Use Case Name]] [[USE_CASE_NAME]]

## 図の概要

### 対象ユースケース
- **ユースケース**: [対象のユースケース名] [[UseCase]] [[USE_CASE]]
- **目的**: [このユースケースが達成すること]
- **主アクター**: [主要な利用者]

### 主要な流れ
[この図で表現する処理の主要な流れを1-2文で要約]

### 図の範囲
- **含む範囲**: [この図に含まれる処理]
- **含まない範囲**: [この図では扱わない処理]
- **前提**: [この図の前提条件]

## アクター

### [主アクター名] [[Primary Actor]] [[PRIMARY_ACTOR]]
- **役割**: [システムにおける役割と責任]
- **目的**: [このユースケースで達成したいこと]
- **権限**: [持っている権限レベル]
- **関与**: 
  - [境界要素1]へのアクセス
  - [境界要素2]からの結果受領

### [副アクター名] [[Secondary Actor]] [[SECONDARY_ACTOR]]
- **役割**: [補助的な役割]
- **目的**: [関与する理由]
- **権限**: [必要な権限]
- **関与**: [どの部分に関わるか]

## 境界要素

### [画面/インターフェース1] [[Boundary1]] [[BOUNDARY_1]]
- **目的**: [この境界要素の役割]
- **提供機能**: 
  - [機能1]: [説明]
  - [機能2]: [説明]
- **表示情報**:
  - [情報1]: [どんな情報か]
  - [情報2]: [どんな情報か]
- **受付操作**:
  - [操作1]: [どんな操作か]
  - [操作2]: [どんな操作か]

### [画面/インターフェース2] [[Boundary2]] [[BOUNDARY_2]]
- **目的**: [この境界要素の役割]
- **提供機能**: [主要な機能]
- **表示情報**: [表示する情報の概要]
- **受付操作**: [可能な操作]

## 制御要素

### [処理/ロジック1] [[Control1]] [[CONTROL_1]]
- **責務**: [この制御要素の主要な責任]
- **処理内容**:
  1. [処理ステップ1]
  2. [処理ステップ2]
  3. [処理ステップ3]
- **ビジネスルール**:
  - [適用ルール1]
  - [適用ルール2]
- **判断基準**: [どのような判断を行うか]

### [処理/ロジック2] [[Control2]] [[CONTROL_2]]
- **責務**: [この制御要素の責任]
- **処理内容**: [主要な処理]
- **連携**: 
  - 入力元: [どこから情報を受け取るか]
  - 出力先: [どこに結果を渡すか]

### [検証処理] [[Validation]] [[VALIDATION]]
- **責務**: 入力情報の妥当性確認
- **検証内容**:
  - 必須項目の確認
  - 形式の妥当性
  - ビジネスルールとの整合性
- **エラー処理**: 検証エラー時の通知

## エンティティ要素

### [エンティティ1] [[Entity1]] [[ENTITY_1]]
- **情報内容**: 
  - [属性1]: [説明]
  - [属性2]: [説明]
  - [属性3]: [説明]
- **責務**: [このエンティティが管理する情報]
- **永続性**: [どのように保存されるか]
- **整合性**: [保つべき制約や関係]

### [エンティティ2] [[Entity2]] [[ENTITY_2]]
- **情報内容**: [保持する主要情報]
- **責務**: [情報管理の責任]
- **関連**: [他のエンティティとの関係]
- **更新頻度**: [どのくらいの頻度で更新されるか]

## 処理の流れ

### 基本フロー
1. **開始**: アクター「[主アクター]」が「[境界1]」にアクセス
2. **入力**: 「[境界1]」で必要情報を入力
3. **検証要求**: 「[境界1]」が「[検証処理]」に入力検証を要求
4. **検証実行**: 「[検証処理]」が入力内容を検証
5. **情報取得**: 「[制御1]」が「[エンティティ1]」から必要情報を取得
6. **処理実行**: 「[制御1]」がビジネスロジックを実行
7. **情報更新**: 「[制御1]」が「[エンティティ2]」の情報を更新
8. **結果生成**: 「[制御2]」が処理結果を生成
9. **結果表示**: 「[境界2]」がアクター「[主アクター]」に結果を表示

### 代替フロー: [条件付き処理]
- **分岐点**: 基本フロー ステップ5
- **条件**: [分岐条件]
1. 「[制御1]」が条件を判定
2. 「[制御3]」で代替処理を実行
3. 基本フロー ステップ8に合流

### エラーフロー: [エラー処理]
- **発生点**: 基本フロー ステップ4
- **条件**: 検証エラー発生時
1. 「[検証処理]」がエラーを検出
2. 「[境界1]」にエラー情報を返却
3. 「[境界1]」がエラーメッセージを表示
4. アクターが修正後、ステップ2から再開

## ロバストネス図

### テキスト表現
```
[主アクター] → [境界1:入力画面] : 情報入力
            [境界1] → [検証処理] : 検証要求
                     [検証処理] → [境界1] : 検証結果
            [境界1] → [制御1:メイン処理] : 処理実行
                     [制御1] → [エンティティ1] : 情報参照
                     [制御1] → [エンティティ2] : 情報更新
                     [制御1] → [制御2:結果生成] : 結果処理
                              [制御2] → [境界2:結果画面] : 表示要求
            [境界2] → [主アクター] : 結果表示
```

### レイヤー別要素配置
```
プレゼンテーション層:
  [境界1:入力画面] -- [境界2:結果画面]

ビジネスロジック層:
  [検証処理] -- [制御1:メイン処理] -- [制御2:結果生成]

データ層:
  [エンティティ1] -- [エンティティ2]
```

### 主要な相互作用
1. **入力フェーズ**: アクター → 境界1 → 検証処理
2. **処理フェーズ**: 制御1 ↔ エンティティ群
3. **出力フェーズ**: 制御2 → 境界2 → アクター

## 設計上の注意点

### 責務の分離
- **境界要素**: 表示と入力のみを担当（ビジネスロジックを含まない）
- **制御要素**: ビジネスロジックとフロー制御（UI要素を含まない）
- **エンティティ**: 情報の保持のみ（処理ロジックを含まない）

### 結合度
- 各要素間の結合は最小限に保つ
- 境界要素は1つの制御要素とのみ通信
- エンティティは受動的（制御要素から呼ばれるのみ）

### 凝集度
- 各要素は単一の責務を持つ
- 関連する処理は同じ制御要素にまとめる
- 関連する情報は同じエンティティで管理

### 拡張性
- 新しい境界要素の追加が容易
- 制御要素の処理追加が他に影響しない
- エンティティの属性追加が独立して可能

### エラー処理
- すべての境界要素でエラー表示が可能
- 制御要素でエラーを適切にハンドリング
- エラー情報は利用者に分かりやすく伝達

## 実装への考慮事項

### パフォーマンス
- [大量データ処理時の考慮点]
- [頻繁なアクセスへの対応]
- [応答時間の要件]

### セキュリティ
- [アクセス制御の実装ポイント]
- [データ保護の考慮]
- [監査ログの必要性]

### 保守性
- [将来の機能拡張ポイント]
- [変更が予想される箇所]
- [テストしやすい設計]