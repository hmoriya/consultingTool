# リソースドメイン（Resource Domain）

## ドメイン概要
リソースドメインは、コンサルティングファームの人的資源（コンサルタント、チーム）とその能力（スキル、経験）を管理する境界づけられたコンテキストです。

## ユビキタス言語定義

### 基本型定義
```
UUID: 一意識別子（36文字）
STRING_20: 最大20文字の文字列
STRING_50: 最大50文字の文字列
STRING_100: 最大100文字の文字列
STRING_255: 最大255文字の文字列
TEXT: 長文テキスト（制限なし）
DATE: 日付（YYYY-MM-DD形式）
TIMESTAMP: 日時（ISO8601形式）
DECIMAL: 小数点数値
INTEGER: 整数
PERCENTAGE: パーセンテージ（0-100）
MONEY: 金額（通貨単位付き）
BOOLEAN: 真偽値（true/false）
ENUM: 列挙型
```

## エンティティ（Entities）

### リソース（Resource）
個々のコンサルタントを表現する中核エンティティ

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| リソースID | UUID | ○ | リソースの一意識別子 |
| 社員番号 | STRING_20 | ○ | 社内管理番号 |
| 氏名 | STRING_100 | ○ | リソースの氏名 |
| メールアドレス | EMAIL | ○ | 連絡用メールアドレス |
| 職位 | 職位レベル | ○ | 組織内での職位 |
| 部門ID | UUID | ○ | 所属部門 |
| チームID | UUID | - | 所属チーム |
| 稼働可能率 | PERCENTAGE | ○ | プロジェクト稼働可能な割合 |
| 時間単価 | MONEY | ○ | 1時間あたりの単価 |
| 入社日 | DATE | ○ | 入社年月日 |
| ステータス | リソースステータス | ○ | 現在の状態 |
| 作成日時 | TIMESTAMP | ○ | レコード作成日時 |
| 更新日時 | TIMESTAMP | ○ | 最終更新日時 |

#### ビジネスルール
- 稼働率計算（calculateUtilization）：現在の稼働率を算出
- スキルマッチング（matchSkills）：必要スキルとの適合度を計算
- アサイン可能性確認（checkAvailability）：プロジェクトへの割当可否を判定
- 単価更新（updateRate）：時間単価を更新

### チーム（Team）
プロジェクトチームを表現するエンティティ

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| チームID | UUID | ○ | チームの一意識別子 |
| チーム名 | STRING_100 | ○ | チームの名称 |
| チームコード | STRING_20 | ○ | チーム管理コード |
| リーダーID | UUID | ○ | チームリーダー |
| 設立日 | DATE | ○ | チーム設立日 |
| 解散予定日 | DATE | - | チーム解散予定日 |
| 専門分野 | 専門分野種別 | ○ | チームの専門領域 |
| ステータス | チームステータス | ○ | チームの状態 |
| 最大メンバー数 | INTEGER | ○ | 最大収容人数 |
| 現在メンバー数 | INTEGER | ○ | 現在の人数 |

### スキル（Skill）
コンサルタントが保有する技能・知識

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| スキルID | UUID | ○ | スキルの一意識別子 |
| スキル名 | STRING_100 | ○ | スキルの名称 |
| カテゴリ | スキルカテゴリ | ○ | スキルの分類 |
| レベル定義 | TEXT | ○ | 各レベルの定義 |
| 認定機関 | STRING_100 | - | 認定を行う機関 |
| 有効期限あり | BOOLEAN | ○ | 有効期限の有無 |
| 作成日時 | TIMESTAMP | ○ | レコード作成日時 |

### リソーススキル（ResourceSkill）
リソースが保有するスキルとレベル

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| リソーススキルID | UUID | ○ | 一意識別子 |
| リソースID | UUID | ○ | リソース参照 |
| スキルID | UUID | ○ | スキル参照 |
| レベル | スキルレベル | ○ | 習熟度 |
| 認定日 | DATE | - | 認定取得日 |
| 有効期限 | DATE | - | 認定の有効期限 |
| 経験年数 | DECIMAL | ○ | スキルの経験年数 |
| 最終使用日 | DATE | - | 最後に使用した日 |

### 稼働計画（AllocationPlan）
リソースのプロジェクトへの割当計画

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| 稼働計画ID | UUID | ○ | 一意識別子 |
| リソースID | UUID | ○ | 対象リソース |
| プロジェクトID | UUID | ○ | 割当先プロジェクト |
| 開始日 | DATE | ○ | 稼働開始日 |
| 終了日 | DATE | ○ | 稼働終了日 |
| 稼働率 | PERCENTAGE | ○ | プロジェクトへの稼働率 |
| 役割 | プロジェクト役割 | ○ | プロジェクト内での役割 |
| 承認状態 | 承認ステータス | ○ | 計画の承認状態 |
| 承認者ID | UUID | - | 承認した管理者 |
| 承認日時 | TIMESTAMP | - | 承認された日時 |

## 値オブジェクト（Value Objects）

### 職位レベル（PositionLevel）
```
列挙型：
- Partner: パートナー
- Director: ディレクター
- Manager: マネージャー
- SeniorConsultant: シニアコンサルタント
- Consultant: コンサルタント
- Analyst: アナリスト
- Associate: アソシエイト
```

### リソースステータス（ResourceStatus）
```
列挙型：
- Active: 稼働中
- OnLeave: 休職中
- Training: 研修中
- Resigned: 退職済
- Prospective: 入社予定
```

### チームステータス（TeamStatus）
```
列挙型：
- Active: 活動中
- Forming: 編成中
- Disbanding: 解散中
- Disbanded: 解散済
```

### スキルカテゴリ（SkillCategory）
```
列挙型：
- Technical: 技術スキル
- Business: ビジネススキル
- Industry: 業界知識
- Language: 語学
- Certification: 資格・認定
- Soft: ソフトスキル
```

### スキルレベル（SkillLevel）
```
列挙型：
- Expert: エキスパート（5）
- Advanced: 上級（4）
- Intermediate: 中級（3）
- Elementary: 初級（2）
- Beginner: 入門（1）
```

### 専門分野種別（SpecialtyType）
```
列挙型：
- Strategy: 戦略コンサルティング
- Operations: オペレーション改善
- IT: ITコンサルティング
- Finance: 財務コンサルティング
- HR: 人事コンサルティング
- Marketing: マーケティング
- RiskManagement: リスク管理
```

### 稼働期間（AllocationPeriod）
| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| 開始日 | DATE | ○ | 稼働開始日 |
| 終了日 | DATE | ○ | 稼働終了日 |
| 稼働率 | PERCENTAGE | ○ | 期間中の稼働率 |

#### 制約
- 開始日は終了日より前
- 稼働率は0-100%の範囲
- 最小稼働期間は1週間

## 集約（Aggregates）

### リソース集約（ResourceAggregate）
- **集約ルート**: リソース
- **含まれるエンティティ**: リソース、リソーススキル
- **含まれる値オブジェクト**: 職位レベル、リソースステータス、スキルレベル

### チーム集約（TeamAggregate）
- **集約ルート**: チーム
- **含まれるエンティティ**: チーム
- **含まれる値オブジェクト**: チームステータス、専門分野種別

### 稼働計画集約（AllocationAggregate）
- **集約ルート**: 稼働計画
- **含まれるエンティティ**: 稼働計画
- **含まれる値オブジェクト**: 稼働期間、承認ステータス

## ドメインサービス

### リソース管理サービス（ResourceManagementService）
リソースの採用・育成・評価を管理

**提供機能**:
- リソース登録（registerResource）：新規リソースを登録
- スキル評価（evaluateSkills）：スキルレベルを評価
- キャリアパス策定（planCareerPath）：成長計画を策定
- 稼働率最適化（optimizeUtilization）：稼働率を最適化

### チーム編成サービス（TeamFormationService）
プロジェクトチームの編成と管理

**提供機能**:
- チーム編成（formTeam）：新規チームを編成
- メンバー追加（addMember）：チームにメンバーを追加
- スキルバランス評価（evaluateSkillBalance）：チームのスキル構成を評価
- パフォーマンス測定（measurePerformance）：チームの成果を測定

### スキルマッチングサービス（SkillMatchingService）
プロジェクトニーズとリソーススキルのマッチング

**提供機能**:
- 候補者検索（findCandidates）：要件に合うリソースを検索
- 適合度計算（calculateFitScore）：マッチング度を数値化
- 推奨チーム提案（suggestTeam）：最適なチーム構成を提案
- ギャップ分析（analyzeGaps）：不足スキルを特定

## ドメインイベント

### リソース参画イベント（ResourceAssigned）
| 属性名 | 型 | 説明 |
|--------|-----|------|
| リソースID | UUID | 参画したリソース |
| プロジェクトID | UUID | 参画先プロジェクト |
| 開始日 | DATE | 参画開始日 |
| 稼働率 | PERCENTAGE | 割当稼働率 |
| 発生日時 | TIMESTAMP | イベント発生日時 |

### スキル取得イベント（SkillAcquired）
| 属性名 | 型 | 説明 |
|--------|-----|------|
| リソースID | UUID | スキル取得者 |
| スキルID | UUID | 取得したスキル |
| レベル | スキルレベル | 取得レベル |
| 認定日 | DATE | 認定取得日 |
| 発生日時 | TIMESTAMP | イベント発生日時 |

### チーム編成イベント（TeamFormed）
| 属性名 | 型 | 説明 |
|--------|-----|------|
| チームID | UUID | 編成されたチーム |
| リーダーID | UUID | チームリーダー |
| メンバーID配列 | UUID[] | チームメンバー |
| 設立日 | DATE | チーム設立日 |
| 発生日時 | TIMESTAMP | イベント発生日時 |

## ビジネスルール

### リソース管理ルール
1. **稼働率上限**: 1リソースの合計稼働率は120%まで
2. **最小稼働率**: プロジェクト参画は最低20%から
3. **スキル更新頻度**: スキル評価は年2回実施
4. **研修必須**: 年間40時間以上の研修受講必須
5. **ローテーション**: 同一プロジェクト3年以上は原則禁止

### チーム編成ルール
1. **最小構成**: チームは最低3名から編成
2. **最大規模**: 1チーム最大15名まで
3. **スキルバランス**: 各レベルの人材を含む
4. **リーダー必須**: 各チームに必ず1名のリーダー
5. **専門性確保**: チームの専門分野に精通した人材を50%以上

### スキル管理ルール
1. **レベル認定**: 上位レベルは実務経験と試験で認定
2. **有効期限**: 技術系スキルは3年ごとに更新
3. **最低保有数**: コンサルタント以上は3つ以上のスキル
4. **専門スキル**: マネージャー以上は専門スキル必須
5. **継続学習**: 年1つ以上の新規スキル取得推奨

### 稼働計画ルール
1. **事前承認**: 稼働計画は2週間前までに承認
2. **変更制限**: 開始後の稼働率変更は±20%まで
3. **最短期間**: 最短稼働期間は1ヶ月
4. **並行上限**: 同時参画は最大3プロジェクトまで
5. **休暇確保**: 四半期に最低5日の非稼働日確保

## リポジトリインターフェース

### リソースリポジトリ（ResourceRepository）
**必須メソッド**:
- IDで検索（findById）: UUID → リソース
- スキルで検索（findBySkills）: スキルID[] → リソースリスト
- 稼働可能者検索（findAvailable）: 期間、稼働率 → リソースリスト
- 保存（save）: リソース → 成功/失敗
- 削除（delete）: UUID → 成功/失敗

### チームリポジトリ（TeamRepository）
**必須メソッド**:
- IDで検索（findById）: UUID → チーム
- 専門分野で検索（findBySpecialty）: 専門分野種別 → チームリスト
- アクティブチーム取得（findActive）: → チームリスト
- 保存（save）: チーム → 成功/失敗
- 解散（disband）: UUID → 成功/失敗