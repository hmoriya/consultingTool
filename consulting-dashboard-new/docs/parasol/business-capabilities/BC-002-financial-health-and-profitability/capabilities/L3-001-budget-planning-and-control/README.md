# L3-001: Budget Planning & Control

**ä½œæˆæ—¥**: 2025-10-31
**æ‰€å±BC**: BC-002: Financial Health & Profitability
**V2ç§»è¡Œå…ƒ**: formulate-and-control-budget

---

## ğŸ“‹ What: ã“ã®èƒ½åŠ›ã®å®šç¾©

### èƒ½åŠ›ã®æ¦‚è¦
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŠã‚ˆã³çµ„ç¹”ã®äºˆç®—ã‚’è¨ˆç”»ãƒ»ç®¡ç†ã™ã‚‹èƒ½åŠ›ã€‚äºˆç®—ç­–å®šã€æ‰¿èªã€ç›£è¦–ã€å†é…åˆ†ã‚’é€šã˜ã¦ã€è²¡å‹™ã®å¥å…¨æ€§ã‚’ç¶­æŒã—ã¾ã™ã€‚

### å®Ÿç¾ã§ãã‚‹ã“ã¨
- ç²¾ç·»ãªäºˆç®—è¨ˆç”»ã®ç­–å®š
- äºˆç®—æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿæ–½
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®äºˆç®—åŸ·è¡ŒçŠ¶æ³ç›£è¦–
- äºˆç®—è¶…éã®æ—©æœŸè­¦å‘Š
- äºˆç®—ã®æŸ”è»Ÿãªå†é…åˆ†

### å¿…è¦ãªçŸ¥è­˜
- äºˆç®—ç®¡ç†æ‰‹æ³•
- è²¡å‹™ä¼šè¨ˆã®åŸºç¤
- ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚ŠæŠ€æ³•
- äºˆç®—æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹
- è²¡å‹™ãƒ¬ãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

## ğŸ”— BCè¨­è¨ˆã®å‚ç…§ï¼ˆHowï¼‰

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
- **Aggregates**: BudgetAggregate ([../../domain/README.md](../../domain/README.md#budget-aggregate))
- **Entities**: Budget, BudgetLine, BudgetAllocation, BudgetRevision
- **Value Objects**: Amount, BudgetStatus, Period, Variance

### API
- **APIä»•æ§˜**: [../../api/api-specification.md](../../api/api-specification.md)
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
  - POST /api/budgets - äºˆç®—ä½œæˆ
  - PUT /api/budgets/{id}/approve - äºˆç®—æ‰¿èª
  - GET /api/budgets/{id}/monitor - äºˆç®—ç›£è¦–
  - PUT /api/budgets/{id}/revise - äºˆç®—è¦‹ç›´ã—

è©³ç´°: [../../api/README.md](../../api/README.md)

### ãƒ‡ãƒ¼ã‚¿
- **Tables**: budgets, budget_lines, budget_allocations, budget_revisions, budget_approvals

è©³ç´°: [../../data/README.md](../../data/README.md)

---

## ğŸ› ï¸ å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### æŠ€è¡“çš„å®Ÿç¾æ–¹æ³•

#### ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³
- **äºˆç®—é…åˆ†æœ€é©åŒ–**: ç·šå½¢è¨ˆç”»æ³•ï¼ˆLPï¼‰ã«ã‚ˆã‚‹ãƒªã‚½ãƒ¼ã‚¹é…åˆ†æœ€é©åŒ–
- **äºˆç®—å·®ç•°åˆ†æ**: å®Ÿç¸¾vsäºˆç®—ã®å·®ç•°è¨ˆç®—ï¼ˆå¤‰å‹•ç‡ãƒ»çµ¶å¯¾å€¤åˆ†æï¼‰
- **äºˆç®—äºˆæ¸¬**: æ™‚ç³»åˆ—åˆ†æï¼ˆç§»å‹•å¹³å‡ã€æŒ‡æ•°å¹³æ»‘åŒ–æ³•ï¼‰ã«ã‚ˆã‚‹ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
- **ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³**:
  - State Patternï¼ˆäºˆç®—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»: draft â†’ pending â†’ approvedï¼‰
  - Strategy Patternï¼ˆç•°ãªã‚‹äºˆç®—ç­–å®šæ–¹å¼ã®åˆ‡ã‚Šæ›¿ãˆ: ã‚¼ãƒ­ãƒ™ãƒ¼ã‚¹/å¢—åˆ†äºˆç®—ï¼‰
  - Template Methodï¼ˆäºˆç®—æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰

#### æ¨å¥¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **è²¡å‹™è¨ˆç®—**: Decimal.js - é«˜ç²¾åº¦é‡‘é¡è¨ˆç®—ï¼ˆæµ®å‹•å°æ•°ç‚¹èª¤å·®å›é¿ï¼‰
- **äºˆç®—å¯è¦–åŒ–**: Recharts - äºˆç®—vså®Ÿç¸¾ã‚°ãƒ©ãƒ•ã€äºˆç®—æ¶ˆåŒ–ç‡ãƒãƒ£ãƒ¼ãƒˆ
- **äºˆæ¸¬åˆ†æ**: Simple-statistics.js - çµ±è¨ˆåˆ†æã€ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
- **Excelå‡ºå…¥åŠ›**: SheetJS (xlsx) - äºˆç®—ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- **æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: Bull Queue - æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹ã®éåŒæœŸå‡¦ç†

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

#### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **äºˆç®—é …ç›®æ•°ä¸Šé™**: 1äºˆç®—ã‚ãŸã‚Šæœ€å¤§500é …ç›®
- **ä¼šè¨ˆå¹´åº¦**: éå»5å¹´é–“ + ç¾åœ¨ + æœªæ¥3å¹´é–“ã®ãƒ‡ãƒ¼ã‚¿ä¿æŒ
- **äºˆç®—ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: 1äºˆç®—ã‚ãŸã‚Šæœ€å¤§20ãƒªãƒ“ã‚¸ãƒ§ãƒ³

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- **äºˆç®—ã‚µãƒãƒªãƒ¼**: Redis cacheï¼ˆTTL: 15åˆ†ã€äºˆç®—æ›´æ–°æ™‚ã«ç„¡åŠ¹åŒ–ï¼‰
- **å·®ç•°åˆ†æçµæœ**: ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆäºˆç®—/å®Ÿç¸¾æ›´æ–°æ™‚ã«å†è¨ˆç®—ï¼‰
- **æ‰¿èªå¾…ã¡ä¸€è¦§**: 5åˆ†é–“éš”ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°

#### æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ
- **é›†è¨ˆã‚¯ã‚¨ãƒªæœ€é©åŒ–**: Materialized Viewï¼ˆæœˆæ¬¡äºˆç®—é›†è¨ˆï¼‰ã®æ´»ç”¨
- **ãƒãƒƒãƒæ›´æ–°**: äºˆç®—é …ç›®ã®ä¸€æ‹¬æ›´æ–°ã‚’1ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§å‡¦ç†
- **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ´»ç”¨**: `budgets(fiscal_year, approval_status)`, `budget_lines(budget_id, category)`

---

## âš ï¸ å‰ææ¡ä»¶ã¨åˆ¶ç´„

### BCé–“é€£æº

#### ä¾å­˜BC
- **BC-001: Project Delivery & Quality** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäºˆç®—ã®é€£æº
  - ä½¿ç”¨API: `GET /api/bc-001/projects/{projectId}/budget-requirements` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäºˆç®—è¦ä»¶å–å¾—
  - ä½¿ç”¨API: `POST /api/bc-001/projects/{projectId}/budget-allocation` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäºˆç®—é…åˆ†
- **BC-003: Secure Access & Governance** - äºˆç®—æ‰¿èªæ¨©é™ã®æ¤œè¨¼
  - ä½¿ç”¨API: `POST /api/bc-003/permissions/validate` - æ‰¿èªæ¨©é™æ¤œè¨¼
  - ä½¿ç”¨API: `GET /api/bc-003/approval-workflows/{workflowId}` - æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å–å¾—
- **BC-007: Team Communication & Collaboration** - äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
  - ä½¿ç”¨API: `POST /api/bc-007/notifications` - äºˆç®—è¶…éã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
  - ä½¿ç”¨API: `POST /api/bc-007/alerts` - äºˆç®—æ‰¿èªä¾é ¼é€šçŸ¥

#### æä¾›APIï¼ˆä»–BCã‹ã‚‰åˆ©ç”¨ï¼‰
- **BC-001, BC-005**: äºˆç®—æ®‹é«˜ç¢ºèªã€äºˆç®—æ¶ˆåŒ–çŠ¶æ³ã®å‚ç…§

### ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§è¦ä»¶

#### ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ
- **äºˆç®—æ‰¿èª**: äºˆç®—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–° + äºˆç®—é…åˆ†ç¢ºå®š + æ‰¿èªãƒ­ã‚°è¨˜éŒ² + é€šçŸ¥é€ä¿¡ï¼ˆBC-007ï¼‰
- **äºˆç®—æ¶ˆåŒ–è¨˜éŒ²**: äºˆç®—æ®‹é«˜æ›´æ–° + æ¶ˆåŒ–å±¥æ­´è¨˜éŒ² + å·®ç•°åˆ†æ + ã‚¢ãƒ©ãƒ¼ãƒˆåˆ¤å®šï¼ˆé–¾å€¤è¶…éæ™‚ï¼‰
- **æ•´åˆæ€§ãƒ¬ãƒ™ãƒ«**: å¼·æ•´åˆæ€§ï¼ˆäºˆç®—æ®‹é«˜æ›´æ–°ï¼‰ã€çµæœæ•´åˆæ€§ï¼ˆé€šçŸ¥é€ä¿¡ï¼‰

#### ãƒ‡ãƒ¼ã‚¿åˆ¶ç´„
- äºˆç®—é …ç›®é…åˆ†ç·é¡ = ç·äºˆç®—é¡ï¼ˆ100%é…åˆ†å¿…é ˆï¼‰
- äºˆç®—æ¶ˆåŒ–é¡ â‰¤ äºˆç®—é…åˆ†é¡ï¼ˆè¶…éæ™‚ã¯æ‰¿èªå¿…é ˆï¼‰
- ä¼šè¨ˆå¹´åº¦ä¸€æ„æ€§: åŒä¸€ä¼šè¨ˆå¹´åº¦ã«è¤‡æ•°ã®æ‰¿èªæ¸ˆã¿äºˆç®—ã¯å­˜åœ¨ä¸å¯

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

#### èªè¨¼ãƒ»èªå¯
- **èªè¨¼**: JWT Bearer Tokenï¼ˆBC-003ç™ºè¡Œï¼‰
- **å¿…è¦æ¨©é™**:
  - äºˆç®—ç­–å®š: `budget:create` + è²¡å‹™æ‹…å½“è€…æ¨©é™
  - äºˆç®—æ‰¿èª: `budget:approve` + æ‰¿èªè€…æ¨©é™ï¼ˆé‡‘é¡ã«å¿œã˜ãŸéšå±¤æ‰¿èªï¼‰
  - äºˆç®—è¦‹ç›´ã—: `budget:revise` + äºˆç®—ç®¡ç†è€…æ¨©é™

#### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **æ©Ÿå¯†åº¦**: äºˆç®—æƒ…å ±ã¯Confidentialï¼ˆçµŒå–¶å±¤ãƒ»è²¡å‹™æ‹…å½“ã®ã¿ï¼‰
- **ç›£æŸ»ãƒ­ã‚°**: äºˆç®—ä½œæˆãƒ»æ‰¿èªãƒ»å¤‰æ›´ã¯å…¨ã¦è¨˜éŒ²ï¼ˆæ”¹ã–ã‚“é˜²æ­¢ï¼‰
- **æš—å·åŒ–**: äºˆç®—é‡‘é¡ã¯ä¿å­˜æ™‚æš—å·åŒ–ï¼ˆAES-256ï¼‰

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£åˆ¶ç´„

#### æœ€å¤§åŒæ™‚å‡¦ç†
- **äºˆç®—å·®ç•°åˆ†æ**: åŒæ™‚50ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’
- **äºˆç®—æ‰¿èªå‡¦ç†**: åŒæ™‚10æ‰¿èª/ç§’
- **äºˆç®—å†è¨ˆç®—**: ä¼šè¨ˆå¹´åº¦ã‚ãŸã‚Šæœ€å¤§5å›/åˆ†

#### ãƒ‡ãƒ¼ã‚¿é‡ä¸Šé™
- **äºˆç®—å±¥æ­´**: æ‰¿èªæ¸ˆã¿äºˆç®—ã¯10å¹´é–“ä¿æŒ
- **äºˆç®—ãƒªãƒ“ã‚¸ãƒ§ãƒ³**: äºˆç®—ã‚ãŸã‚Šæœ€å¤§20ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- **å·®ç•°åˆ†æå±¥æ­´**: æ—¥æ¬¡ä¿å­˜ï¼ˆå®Œäº†å¾Œ5å¹´ä¿æŒï¼‰

---

## ğŸ”— BCè¨­è¨ˆã¨ã®çµ±åˆ

### ä½¿ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

#### Aggregates
- **Budget Aggregate** ([../../domain/README.md#budget-aggregate](../../domain/README.md#budget-aggregate))
  - Budgetï¼ˆé›†ç´„ãƒ«ãƒ¼ãƒˆï¼‰: äºˆç®—ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
  - BudgetItem: äºˆç®—é …ç›®åˆ¥å†…è¨³
  - BudgetAllocation: äºˆç®—é…åˆ†å±¥æ­´
  - BudgetRevision: äºˆç®—è¦‹ç›´ã—å±¥æ­´

#### Value Objects
- **Amount**: é‡‘é¡ï¼ˆé€šè²¨å˜ä½ä»˜ãï¼‰
- **BudgetStatus**: äºˆç®—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆdraft, pending, approved, rejectedï¼‰
- **Period**: ä¼šè¨ˆæœŸé–“ï¼ˆé–‹å§‹æ—¥ãƒ»çµ‚äº†æ—¥ï¼‰
- **Variance**: äºˆç®—å·®ç•°ï¼ˆå®Ÿç¸¾-äºˆç®—ã€å¤‰å‹•ç‡ï¼‰
- **FiscalYear**: ä¼šè¨ˆå¹´åº¦ï¼ˆYYYYå½¢å¼ï¼‰

#### Domain Events
- **BudgetCreated**: äºˆç®—ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
- **BudgetSubmittedForApproval**: äºˆç®—æ‰¿èªç”³è«‹ã‚¤ãƒ™ãƒ³ãƒˆ â†’ BC-007é€šçŸ¥é€ä¿¡
- **BudgetApproved**: äºˆç®—æ‰¿èªã‚¤ãƒ™ãƒ³ãƒˆ â†’ BC-001ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäºˆç®—é€£æº
- **BudgetThresholdExceeded**: äºˆç®—è¶…éé–¾å€¤ã‚¤ãƒ™ãƒ³ãƒˆ â†’ BC-007ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
- **BudgetReallocated**: äºˆç®—å†é…åˆ†ã‚¤ãƒ™ãƒ³ãƒˆ â†’ å·®ç•°åˆ†æå†è¨ˆç®—

### å‘¼ã³å‡ºã™APIä¾‹

#### äºˆç®—ä½œæˆ
```http
POST /api/v1/bc-002/budgets
Content-Type: application/json
Authorization: Bearer {token}

{
  "fiscalYear": 2025,
  "totalAmount": 50000000,
  "currency": "JPY",
  "budgetItems": [
    {
      "category": "labor",
      "allocatedAmount": 30000000,
      "description": "äººä»¶è²»"
    },
    {
      "category": "outsource",
      "allocatedAmount": 15000000,
      "description": "å¤–æ³¨è²»"
    },
    {
      "category": "equipment",
      "allocatedAmount": 5000000,
      "description": "è¨­å‚™è²»"
    }
  ]
}
```

#### äºˆç®—æ‰¿èª
```http
PUT /api/v1/bc-002/budgets/{budgetId}/approve
Content-Type: application/json

{
  "approvedBy": "user-uuid-123",
  "comments": "2025å¹´åº¦äºˆç®—æ‰¿èª",
  "approvedAt": "2025-11-05T10:00:00Z"
}
```

#### äºˆç®—ç›£è¦–ï¼ˆå·®ç•°åˆ†æï¼‰
```http
GET /api/v1/bc-002/budgets/{budgetId}/variance-analysis?period=2025-Q1
```

#### BCé€£æº: äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼ˆBC-007ï¼‰
```http
POST /api/v1/bc-007/notifications
Content-Type: application/json

{
  "type": "budget_threshold_exceeded",
  "recipientId": "finance-manager-uuid",
  "priority": "high",
  "content": {
    "budgetId": "budget-uuid",
    "budgetItemId": "budget-item-uuid",
    "category": "å¤–æ³¨è²»",
    "threshold": 90,
    "currentConsumption": 92,
    "fiscalYear": 2025
  }
}
```

### ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

#### èª­ã¿å–ã‚Š
- **budgets ãƒ†ãƒ¼ãƒ–ãƒ«**:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: `idx_budgets_fiscal_year`ï¼ˆä¼šè¨ˆå¹´åº¦åˆ¥äºˆç®—å–å¾—ï¼‰
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: `idx_budgets_approval_status`ï¼ˆæ‰¿èªå¾…ã¡äºˆç®—ä¸€è¦§ï¼‰
  - ã‚¯ã‚¨ãƒª: æ‰¿èªæ¸ˆã¿äºˆç®—ã®æ¤œç´¢ï¼ˆfiscal_year, approval_status = 'approved'ï¼‰
- **budget_lines ãƒ†ãƒ¼ãƒ–ãƒ«**:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: `idx_budget_lines_budget_category`ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥é›†è¨ˆï¼‰
  - é›†è¨ˆã‚¯ã‚¨ãƒª: ã‚«ãƒ†ã‚´ãƒªåˆ¥é…åˆ†é¡ãƒ»æ¶ˆåŒ–é¡ã®é›†è¨ˆ
- **budget_allocations ãƒ†ãƒ¼ãƒ–ãƒ«**:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: `idx_budget_alloc_date`ï¼ˆæ™‚ç³»åˆ—é…åˆ†å±¥æ­´ï¼‰

#### æ›¸ãè¾¼ã¿
- **äºˆç®—æ‰¿èªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**:
  ```sql
  BEGIN;
  UPDATE budgets SET approval_status = 'approved', approved_by = ?, approved_date = NOW() WHERE id = ?;
  INSERT INTO budget_approvals (budget_id, approver_id, approved_at, comments) VALUES (?, ?, NOW(), ?);
  -- ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ: BudgetApproved
  COMMIT;
  ```
- **äºˆç®—æ¶ˆåŒ–è¨˜éŒ²**:
  ```sql
  UPDATE budget_lines SET consumed_amount = consumed_amount + ?, updated_at = NOW()
  WHERE id = ?;

  INSERT INTO budget_consumption_history (budget_line_id, consumed_amount, consumed_at, source)
  VALUES (?, ?, NOW(), ?);

  -- é–¾å€¤ãƒã‚§ãƒƒã‚¯: consumed_amount / allocated_amount
  -- 90%è¶…éæ™‚: BudgetThresholdExceeded ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
  ```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¢ã‚¯ã‚»ã‚¹
- **äºˆç®—ã‚µãƒãƒªãƒ¼**:
  ```
  Key: `budget:summary:{fiscalYear}`
  Value: { totalBudget: 50000000, totalConsumed: 35000000, consumptionRate: 70 }
  TTL: 900ç§’ï¼ˆ15åˆ†ï¼‰
  Invalidation: äºˆç®—æ¶ˆåŒ–è¨˜éŒ²æ™‚
  ```
- **ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆç®—æ®‹é«˜**:
  ```
  Key: `budget:balance:{budgetId}:category:{category}`
  Value: { allocated: 30000000, consumed: 28000000, remaining: 2000000 }
  TTL: 300ç§’ï¼ˆ5åˆ†ï¼‰
  Invalidation: äºˆç®—æ¶ˆåŒ–æ™‚
  ```

---

## âš™ï¸ Operations: ã“ã®èƒ½åŠ›ã‚’å®Ÿç¾ã™ã‚‹æ“ä½œ

| Operation | èª¬æ˜ | UseCases | V2ç§»è¡Œå…ƒ |
|-----------|------|----------|---------|
| **OP-001**: äºˆç®—ã‚’ç­–å®šã™ã‚‹ | åˆæœŸäºˆç®—è¨ˆç”»ã®ä½œæˆ | 2-3å€‹ | formulate-budget |
| **OP-002**: äºˆç®—ã‚’æ‰¿èªãƒ»ç¢ºå®šã™ã‚‹ | æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿæ–½ | 2å€‹ | approve-and-finalize-budget |
| **OP-003**: äºˆç®—ã‚’ç›£è¦–ãƒ»ç®¡ç†ã™ã‚‹ | åŸ·è¡ŒçŠ¶æ³ã®è¿½è·¡ | 3-4å€‹ | monitor-and-control-budget |
| **OP-004**: äºˆç®—ã‚’è¦‹ç›´ã—ãƒ»å†é…åˆ†ã™ã‚‹ | äºˆç®—ã®æŸ”è»Ÿãªèª¿æ•´ | 2-3å€‹ | revise-and-reallocate-budget |

è©³ç´°: [operations/](operations/)

---

## ğŸ“Š çµ±è¨ˆæƒ…å ±

- **Operationsæ•°**: 4å€‹
- **æ¨å®šUseCaseæ•°**: 9-12å€‹
- **V2ã‹ã‚‰ã®ç§»è¡Œ**: ãã®ã¾ã¾ç§»è¡Œ

---

## ğŸ”— V2æ§‹é€ ã¸ã®å‚ç…§

> âš ï¸ **ç§»è¡Œã®ãŠçŸ¥ã‚‰ã›**: ã“ã®L3ã¯V2æ§‹é€ ã‹ã‚‰ç§»è¡Œä¸­ã§ã™ã€‚
>
> **V2å‚ç…§å…ˆï¼ˆå‚ç…§ã®ã¿ï¼‰**:
> - [services/revenue-optimization-service/capabilities/formulate-and-control-budget/](../../../../services/revenue-optimization-service/capabilities/formulate-and-control-budget/)

---

## ğŸ“ æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°å†…å®¹ | æ›´æ–°è€… |
|------|---------|--------|
| 2025-10-31 | L3-001 READMEåˆç‰ˆä½œæˆï¼ˆPhase 2ï¼‰ | Claude |

---

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 2 - ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹æ§‹ç¯‰ä¸­
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Operationãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆã¨V2ã‹ã‚‰ã®ç§»è¡Œ
