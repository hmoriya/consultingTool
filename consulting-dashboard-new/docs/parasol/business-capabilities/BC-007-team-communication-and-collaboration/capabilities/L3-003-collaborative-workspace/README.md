# L3-003: Collaborative Workspace

**ä½œæˆæ—¥**: 2025-10-31
**æ‰€å±BC**: BC-007: Team Communication & Collaboration
**V2ç§»è¡Œå…ƒ**: provide-collaborative-environment

---

## ğŸ“‹ What: ã“ã®èƒ½åŠ›ã®å®šç¾©

### èƒ½åŠ›ã®æ¦‚è¦
å”åƒä½œæ¥­ã®ãŸã‚ã®å…±æœ‰ç’°å¢ƒã‚’æä¾›ã™ã‚‹èƒ½åŠ›ã€‚å…±æœ‰ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰ã€å…±åŒç·¨é›†ã‚’é€šã˜ã¦ã€ãƒãƒ¼ãƒ ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚

### å®Ÿç¾ã§ãã‚‹ã“ã¨
- å…±æœ‰ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä½œæˆã¨ç®¡ç†
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±åŒç·¨é›†
- ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ã¨æ¨©é™ç®¡ç†
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ç®¡ç†

### å¿…è¦ãªçŸ¥è­˜
- ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æŠ€è¡“
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†
- åŒæœŸæŠ€è¡“
- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

---

## ğŸ”— BCè¨­è¨ˆã®å‚ç…§ï¼ˆHowï¼‰

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
- **Aggregates**: WorkspaceAggregate ([../../domain/README.md](../../domain/README.md#workspace-aggregate))
- **Entities**: Workspace, SharedDocument, CollaborationSession, Version
- **Value Objects**: WorkspaceType, AccessPermission, SyncStatus

### API
- **APIä»•æ§˜**: [../../api/api-specification.md](../../api/api-specification.md)
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
  - POST /api/workspaces - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆ
  - POST /api/workspaces/{id}/documents - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰
  - PUT /api/documents/{id}/collaborate - å…±åŒç·¨é›†

è©³ç´°: [../../api/README.md](../../api/README.md)

### ãƒ‡ãƒ¼ã‚¿
- **Tables**: workspaces, shared_documents, collaboration_sessions, document_versions

è©³ç´°: [../../data/README.md](../../data/README.md)

---

## ğŸ› ï¸ å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: CRDT/OT ã«ã‚ˆã‚‹ç«¶åˆè§£æ±º
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† + å·®åˆ†ãƒ™ãƒ¼ã‚¹ä¿å­˜
- **æ¨©é™ç®¡ç†**: RBAC ã«ã‚ˆã‚‹ç´°ç²’åº¦ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **æ´»å‹•è¿½è·¡**: ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã«ã‚ˆã‚‹å¤‰æ›´å±¥æ­´

### ä¸»è¦æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: CRDT (Conflict-free Replicated Data Types)
  - CRDTå®Ÿè£…ã‚¨ãƒ³ã‚¸ãƒ³
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡æ©Ÿæ§‹ã«ã‚ˆã‚‹å¤‰æ›´é…ä¿¡
  - è‡ªå‹•ãƒãƒ¼ã‚¸ï¼ˆç«¶åˆãªã—ï¼‰
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆå¾Œã§åŒæœŸï¼‰
- **OT (Operational Transformation)**: OTå®Ÿè£…ã‚¨ãƒ³ã‚¸ãƒ³
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæ™‚ç·¨é›†æ©Ÿèƒ½
  - å¤‰æ›´æ“ä½œã®å¤‰æ›ãƒ»é©ç”¨
  - ä¸€è²«æ€§ä¿è¨¼
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ + ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæœ¬ä½“: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´: å·®åˆ†ä¿å­˜
- **æ¤œç´¢ãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨æ–‡æ¤œç´¢
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
  - ãƒ•ã‚¡ã‚»ãƒƒãƒˆæ¤œç´¢ï¼ˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åˆ¥ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚µãƒ¼ãƒãƒ¼**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡æ©Ÿæ§‹
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†åŒæœŸ
  - ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®å…±æœ‰
  - ç·¨é›†ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º
  - ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹ç®¡ç†

### å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

#### CRDT ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
```typescript
// CRDTå®Ÿè£…ä¾‹
import * as CRDT from 'crdt-engine'
import { RealtimeProvider } from 'realtime-sync'

// ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆæœŸåŒ–
const doc = new CRDT.Doc()
const text = doc.getText('content') // å…±æœ‰ãƒ†ã‚­ã‚¹ãƒˆ

// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡æ¥ç¶šï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼‰
const provider = new RealtimeProvider(
  'wss://server:1234',
  'document-123',
  doc
)

// ãƒ­ãƒ¼ã‚«ãƒ«ç·¨é›†
text.insert(0, 'Hello ')
text.insert(6, 'World')

// ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¤‰æ›´ã‚’è‡ªå‹•ãƒãƒ¼ã‚¸
doc.on('update', (update) => {
  // å¤‰æ›´ã‚’è‡ªå‹•åæ˜ ï¼ˆç«¶åˆãªã—ï¼‰
  const currentText = text.toString()
  console.log('Current text:', currentText)
})
```

#### OT ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†
```typescript
// OTå®Ÿè£…ä¾‹
import OTEngine from 'ot-engine'

const connection = new OTEngine.Connection(socket)
const doc = connection.get('documents', 'doc-123')

// ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè³¼èª­
doc.subscribe((err) => {
  if (err) throw err

  // ãƒ­ãƒ¼ã‚«ãƒ«ç·¨é›†
  doc.submitOp([
    { p: ['content', 0], si: 'Hello ' } // æŒ¿å…¥æ“ä½œ
  ])

  // ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¤‰æ›´ã‚’å—ä¿¡
  doc.on('op', (op, source) => {
    if (!source) {
      // ãƒªãƒ¢ãƒ¼ãƒˆæ“ä½œ â†’ UIæ›´æ–°
      applyOperationToEditor(op)
    }
  })
})
```

#### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
class DocumentVersionManager {
  async saveVersion(documentId, content, userId) {
    const previousVersion = await this.getLatestVersion(documentId)

    // å·®åˆ†è¨ˆç®—ï¼ˆdiff-match-patchï¼‰
    const diffs = this.diffAlgorithm.diff(
      previousVersion.content,
      content
    )

    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¿å­˜
    const version = await this.db.documentVersions.create({
      documentId,
      versionNumber: previousVersion.versionNumber + 1,
      diffs: this.diffAlgorithm.toDelta(diffs),
      authorId: userId,
      createdAt: new Date()
    })

    return version
  }

  async restoreVersion(documentId, versionNumber) {
    // æŒ‡å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§ã®å·®åˆ†ã‚’é©ç”¨
    const versions = await this.db.documentVersions.findAll({
      where: { documentId, versionNumber: { lte: versionNumber } },
      order: [['versionNumber', 'ASC']]
    })

    let content = ''
    for (const version of versions) {
      content = this.diffAlgorithm.applyDelta(content, version.diffs)
    }

    return content
  }
}
```

#### æ¨©é™ç®¡ç†ï¼ˆRBACï¼‰
```typescript
// ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ¨©é™ç®¡ç†
const PERMISSIONS = {
  owner: ['read', 'write', 'delete', 'invite', 'manage'],
  editor: ['read', 'write', 'comment'],
  commenter: ['read', 'comment'],
  viewer: ['read']
}

async function checkPermission(userId, workspaceId, action) {
  const member = await db.workspaceMembers.findOne({
    where: { userId, workspaceId }
  })

  if (!member) throw new Error('Not a workspace member')

  const allowedActions = PERMISSIONS[member.role]
  if (!allowedActions.includes(action)) {
    throw new Error(`Permission denied: ${action}`)
  }

  return true
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸæœ€é©åŒ–**:
  - å¤‰æ›´ãƒãƒƒãƒãƒ³ã‚°: è¤‡æ•°å¤‰æ›´ã‚’100msã”ã¨ã«ã¾ã¨ã‚ã¦é€ä¿¡
  - åœ§ç¸®: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åœ§ç¸®
  - Debounce: é«˜é »åº¦å¤‰æ›´ã®é–“å¼•ã
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã¿è¾¼ã¿**:
  - é…å»¶èª­ã¿è¾¼ã¿: å¤§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ®µéšçš„ãƒ­ãƒ¼ãƒ‰
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã«ã‚ˆã‚‹é »ç¹ã‚¢ã‚¯ã‚»ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥
  - CDN: é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ä¿¡
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´**:
  - å·®åˆ†åœ§ç¸®: å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åœ§ç¸®ä¿å­˜
  - ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–: 90æ—¥ä»¥ä¸Šã®å±¥æ­´ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸
- **ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**:
  - æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°: è¤‡æ•°ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚µãƒ¼ãƒãƒ¼ + ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿæ§‹
  - èª­ã¿å–ã‚Šåˆ†æ•£: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã¿å–ã‚Šãƒ¬ãƒ—ãƒªã‚«

---

## âš ï¸ å‰ææ¡ä»¶ã¨åˆ¶ç´„

### æŠ€è¡“çš„å‰ææ¡ä»¶
- **ã‚¤ãƒ³ãƒ•ãƒ©è¦ä»¶**:
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚µãƒ¼ãƒãƒ¼ï¼ˆ4GB RAM/ã‚µãƒ¼ãƒãƒ¼ï¼‰
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ï¼ˆCRDT/OT çŠ¶æ…‹åŒæœŸï¼‰
  - ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»æ¨©é™ç®¡ç†ï¼‰
  - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
  - å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¦ä»¶**:
  - ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChrome 90+, Firefox 88+, Safari 14+ï¼‰
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚µãƒãƒ¼ãƒˆå¿…é ˆ
  - JavaScript æœ‰åŠ¹
- **ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶**:
  - æœ€ä½: 8GB RAM, 4 vCPUï¼ˆåŒæœŸã‚µãƒ¼ãƒãƒ¼ï¼‰
  - æ¨å¥¨: 16GB RAM, 8 vCPUï¼ˆé«˜è² è·ç’°å¢ƒï¼‰

### ãƒ“ã‚¸ãƒã‚¹åˆ¶ç´„
- **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åˆ¶é™**:
  - ãƒ¡ãƒ³ãƒãƒ¼æ•°: æœ€å¤§100äºº/ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°: æœ€å¤§1000ä»¶/ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
  - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 100GB/ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆæœ‰æ–™ãƒ—ãƒ©ãƒ³ã¯ç„¡åˆ¶é™ï¼‰
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ¶é™**:
  - ã‚µã‚¤ã‚º: æœ€å¤§10MB/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - åŒæ™‚ç·¨é›†: æœ€å¤§10äºº/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´: æœ€å¤§100ä¸–ä»£ï¼ˆãã‚Œä»¥é™ã¯åœ§ç¸®ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**:
  - åŒæœŸé…å»¶: < 100msï¼ˆ95ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼‰
  - ç«¶åˆè§£æ±º: è‡ªå‹•ï¼ˆCRDT/OTï¼‰
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç·¨é›†: 24æ™‚é–“ä»¥å†…ã«åŒæœŸ

### ãƒ‡ãƒ¼ã‚¿åˆ¶ç´„
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå½¢å¼**: Markdown, Rich Text, Code, Spreadsheet
- **æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«**: æœ€å¤§10å€‹ã€åˆè¨ˆ50MB/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¿æŒ**: 90æ—¥é–“ï¼ˆæœ‰æ–™ãƒ—ãƒ©ãƒ³ã¯ç„¡åˆ¶é™ï¼‰
- **æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå³æ™‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

### é‹ç”¨åˆ¶ç´„
- **å¯ç”¨æ€§**: 99.9%ï¼ˆå¹´é–“ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ  < 8.76æ™‚é–“ï¼‰
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: æ—¥æ¬¡è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- **ç›£è¦–**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†æ•°ã€åŒæœŸé…å»¶ã€WebSocketæ¥ç¶šæ•°
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: E2Eæš—å·åŒ–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã€TLS 1.3å¿…é ˆ

---

## ğŸ”— BCè¨­è¨ˆã¨ã®çµ±åˆ

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«çµ±åˆ
- **Aggregate Root**: `WorkspaceAggregate`
  - é›†ç´„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: Workspace, SharedDocument, CollaborationSession, Version
  - ä¸å¤‰æ¡ä»¶: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ¡ãƒ³ãƒãƒ¼æœ€å¤§æ•°ã€åŒæ™‚ç·¨é›†ä¸Šé™ã€æ¨©é™æ•´åˆæ€§
  - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«: ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰ãƒãƒªã‚·ãƒ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### BCé–“é€£æº

#### BC-001 (Project Delivery) ã¨ã®é€£æº
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è‡ªå‹•ä½œæˆ**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `ProjectCreatedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ + ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
  - API: `POST /api/workspaces/for-project/{projectId}`
- **æˆæœç‰©ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€£æº**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `DeliverableCreatedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«æˆæœç‰©ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ 
  - API: `POST /api/workspaces/{id}/documents/from-deliverable`

#### BC-005 (Team & Resource) ã¨ã®é€£æº
- **ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `TeamCreatedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒãƒ¼ãƒ å°‚ç”¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è‡ªå‹•ä½œæˆ
  - API: `POST /api/workspaces/for-team/{teamId}`
- **ãƒ¡ãƒ³ãƒãƒ¼åŒæœŸ**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `TeamMemberAddedEvent`, `TeamMemberRemovedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ¡ãƒ³ãƒãƒ¼è‡ªå‹•è¿½åŠ /å‰Šé™¤
  - API: `POST /api/workspaces/{id}/members/sync-from-team`

#### BC-006 (Knowledge Management) ã¨ã®é€£æº
- **ãƒŠãƒ¬ãƒƒã‚¸ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `KnowledgeArticlePublishedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ãƒŠãƒ¬ãƒƒã‚¸ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰
  - API: `POST /api/workspaces/{id}/documents/from-knowledge`
- **ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ãƒ†ã‚£ãƒ–ãƒŠãƒ¬ãƒƒã‚¸ä½œæˆ**:
  - ã‚¤ãƒ™ãƒ³ãƒˆ: `CollaborativeKnowledgeSessionStartedEvent`
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®ãƒŠãƒ¬ãƒƒã‚¸å…±åŒç·¨é›†
  - API: `POST /api/workspaces/{id}/collaborative-sessions`

#### BC-007 L3-001 (Synchronous Communication) ã¨ã®é€£æº
- **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒãƒ£ãƒƒãƒˆçµ±åˆ**:
  - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç·¨é›†ä¸­ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  - @ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³é€šçŸ¥

### APIè¨­è¨ˆçµ±åˆ
- **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹API**:
  - `POST /api/workspaces` - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆ
  - `GET /api/workspaces/{id}` - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å–å¾—
  - `PUT /api/workspaces/{id}` - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ›´æ–°
  - `DELETE /api/workspaces/{id}` - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å‰Šé™¤
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆAPI**:
  - `POST /api/workspaces/{id}/documents` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
  - `GET /api/documents/{id}` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå–å¾—
  - `PUT /api/documents/{id}` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
  - `GET /api/documents/{id}/versions` - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´
- **ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³API**:
  - `POST /api/documents/{id}/collaborate` - å…±åŒç·¨é›†é–‹å§‹
  - `GET /api/documents/{id}/sessions` - ç·¨é›†ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§
  - `WebSocket`: `wss://api.example.com/collab/{documentId}` - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- **è©³ç´°**: [../../api/README.md](../../api/README.md)

### ãƒ‡ãƒ¼ã‚¿å±¤çµ±åˆ
- **ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ**:
  - `workspaces`: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æƒ…å ±
  - `workspace_members`: ãƒ¡ãƒ³ãƒãƒ¼ãƒ»æ¨©é™ç®¡ç†
  - `shared_documents`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±
  - `document_versions`: ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´
  - `collaboration_sessions`: ç·¨é›†ã‚»ãƒƒã‚·ãƒ§ãƒ³
  - `workspace_activities`: æ´»å‹•ãƒ­ã‚°
- **è©³ç´°**: [../../data/README.md](../../data/README.md)

### ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•çµ±åˆ
- **ç™ºè¡Œã‚¤ãƒ™ãƒ³ãƒˆ**:
  - `WorkspaceCreatedEvent`: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆæ™‚
  - `DocumentSharedEvent`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…±æœ‰æ™‚
  - `DocumentEditedEvent`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç·¨é›†æ™‚
  - `CollaborationSessionStartedEvent`: å…±åŒç·¨é›†é–‹å§‹æ™‚
  - `WorkspaceMemberAddedEvent`: ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ æ™‚
- **è³¼èª­ã‚¤ãƒ™ãƒ³ãƒˆ**:
  - BC-001: `ProjectCreatedEvent`, `DeliverableCreatedEvent`
  - BC-005: `TeamCreatedEvent`, `TeamMemberAddedEvent`, `TeamMemberRemovedEvent`
  - BC-006: `KnowledgeArticlePublishedEvent`

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æŠ€è¡“çµ±åˆ
- **CRDTçµ±åˆ**: CRDTå®Ÿè£…ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆJSON, Text, Array, Mapå¯¾å¿œï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡æ©Ÿæ§‹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ï¼‰
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚ˆã‚‹ãƒ­ãƒ¼ã‚«ãƒ«æ°¸ç¶šåŒ–
- **ç«¶åˆè§£æ±º**: CRDT è‡ªå‹•ãƒãƒ¼ã‚¸ï¼ˆLast-Write-Wins ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ï¼‰
- **ã‚«ãƒ¼ã‚½ãƒ«åŒæœŸ**: ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æ©Ÿæ§‹ï¼ˆçµ„ã¿è¾¼ã¿ï¼‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çµ±åˆ
- **æš—å·åŒ–**: E2Eæš—å·åŒ–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€éµç®¡ç†ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼‰
- **èªè¨¼**: JWT ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆWebSocket handshakeæ™‚æ¤œè¨¼ï¼‰
- **æ¨©é™ç®¡ç†**: RBACï¼ˆowner, editor, commenter, viewerï¼‰
- **ç›£æŸ»ãƒ­ã‚°**: å…¨å¤‰æ›´å±¥æ­´ã®è¨˜éŒ²ï¼ˆå‰Šé™¤å«ã‚€ï¼‰

---

## âš™ï¸ Operations: ã“ã®èƒ½åŠ›ã‚’å®Ÿç¾ã™ã‚‹æ“ä½œ

| Operation | èª¬æ˜ | UseCases | V2ç§»è¡Œå…ƒ |
|-----------|------|----------|---------|
| **OP-001**: å”åƒç’°å¢ƒã‚’æä¾›ã™ã‚‹ | ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ç®¡ç† | 1-2å€‹ | provide-collaborative-environment |

è©³ç´°: [operations/](operations/)

---

## ğŸ“Š çµ±è¨ˆæƒ…å ±

- **Operationsæ•°**: 1å€‹
- **æ¨å®šUseCaseæ•°**: 1-2å€‹
- **V2ã‹ã‚‰ã®ç§»è¡Œ**: ãã®ã¾ã¾ç§»è¡Œï¼ˆL4å€™è£œã¨ã—ã¦æ¤œè¨ä¸­ï¼‰

---

## ğŸ”— V2æ§‹é€ ã¸ã®å‚ç…§

> âš ï¸ **ç§»è¡Œã®ãŠçŸ¥ã‚‰ã›**: ã“ã®L3ã¯V2æ§‹é€ ã‹ã‚‰ç§»è¡Œä¸­ã§ã™ã€‚
>
> **V2å‚ç…§å…ˆï¼ˆå‚ç…§ã®ã¿ï¼‰**:
> - [services/collaboration-facilitation-service/capabilities/provide-collaborative-environment/](../../../../services/collaboration-facilitation-service/capabilities/provide-collaborative-environment/)

---

## ğŸ“ æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°å†…å®¹ | æ›´æ–°è€… |
|------|---------|--------|
| 2025-10-31 | L3-003 READMEåˆç‰ˆä½œæˆï¼ˆPhase 2ï¼‰ | Claude |

---

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 2 - ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹æ§‹ç¯‰ä¸­
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Operationãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆã¨V2ã‹ã‚‰ã®ç§»è¡Œ
