# パラソルワールド - AI協働開発プラットフォーム

**作成日**: 2025-10-31
**バージョン**: 1.0.0
**対象読者**: 全ての関係者

---

## 🌍 パラソルワールドとは

**パラソルワールド**は、AIによるソフトウェア開発を前提とした、完全なMD（Markdown）ベースの**AI協働開発プラットフォーム**です。

### 核心的な特徴

```
1. MDベースの設計書
   └─ AI解析・生成可能な形式

2. 段階的ブレークダウン
   └─ 上位設計 → パラソル上で詳細化 → ピュアなMDファイル生成

3. AI自動生成・テスト・補正ループ
   └─ 設計書 → コード生成 → テスト → 自動補正 → 設計書更新

4. パラソル配下での一元管理
   └─ 変更時はパラソル配下で補正、常に設計書が真実
```

---

## 🔄 パラソルワールドの全体フロー

```
┌─────────────────────────────────────────────────────────┐
│ 人間の役割: 価値設計とビジネスルール定義                   │
└─────────────────────────────────────────────────────────┘
                        ↓
        ┌───────────────────────────────┐
        │ Layer 1: パラソル価値デザイン  │
        │ - バリューストリーム            │
        │ - バリューステージ              │
        │ - ケーパビリティL1             │
        └───────────────────────────────┘
                        ↓
        ┌───────────────────────────────┐
        │ Layer 2: MSデザイン           │
        │ - BC設計                      │
        │ - パラソルドメイン言語 (MD)    │
        │ - API/DB設計 (MD)            │
        └───────────────────────────────┘
                        ↓
        ┌───────────────────────────────┐
        │ Layer 3: 開発設計             │
        │ - Operation定義 (MD)         │
        │ - UseCase定義 (MD)           │
        │ - Page定義 (MD)              │
        └───────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│ AIの役割: 設計からの自動生成・テスト・補正                 │
└─────────────────────────────────────────────────────────┘
                        ↓
        ┌───────────────────────────────┐
        │ AI自動生成                    │
        │ MDファイル → ソースコード      │
        │ - アーキテクチャベース生成     │
        │ - ドメイン言語からエンティティ  │
        │ - UseCase → API実装          │
        │ - Page定義 → UI実装          │
        └───────────────────────────────┘
                        ↓
        ┌───────────────────────────────┐
        │ 自動テスト実行                 │
        │ - 単体テスト                  │
        │ - 統合テスト                  │
        │ - E2Eテスト                  │
        └───────────────────────────────┘
                        ↓
            ✅ テスト成功     ❌ テスト失敗
                 ↓                  ↓
            デプロイ      ┌───────────────────┐
                         │ AI自動補正        │
                         │ - エラー分析       │
                         │ - コード修正       │
                         │ - 再テスト        │
                         └───────────────────┘
                                  ↓
                         必要に応じて設計書更新
                                  ↓
                         ┌───────────────────┐
                         │ パラソル配下で補正  │
                         │ - MDファイル更新   │
                         │ - ドメイン言語修正  │
                         │ - 設計書バージョンアップ │
                         └───────────────────┘
                                  ↓
                         AI再生成 → 再テスト
```

---

## 🎯 パラソルワールドの3つの柱

### 1. MDベース設計書（AI解析可能）

**なぜMDか**:
```
✅ AI（LLM）が理解しやすい
✅ バージョン管理が容易（Git）
✅ 人間が読みやすく、編集しやすい
✅ 差分が明確
✅ レビューが容易（Pull Request）
✅ 実装技術に依存しない

❌ UMLやExcelは:
- AIが解析しにくい
- バージョン管理が困難
- 差分が見えにくい
```

**MDファイルの構成**:
```
docs/parasol/
├── 1-VALUE-DESIGN/          # Layer 1（人間が設計）
│   └── [ビジネス価値定義].md
│
├── 2-MICROSERVICE-DESIGN/   # Layer 2（人間が設計）
│   └── bounded-contexts/
│       └── [bc-name]/
│           ├── domain-language.md      # AI生成の入力
│           ├── api-specification.md    # AI生成の入力
│           └── database-design.md      # AI生成の入力
│
└── 3-DEVELOPMENT-DESIGN/    # Layer 3（人間が設計）
    └── bounded-contexts/
        └── [bc-name]/
            └── operations/
                └── [operation-name]/
                    └── usecases/
                        ├── usecase.md   # AI生成の入力
                        └── page.md      # AI生成の入力
```

---

### 2. AI自動生成・テスト・補正ループ

**フェーズ1: AI自動生成**

```
入力:
├── domain-language.md
├── api-specification.md
├── usecase.md
└── page.md

AI処理:
├── ドメイン言語 → TypeScriptエンティティ
├── API仕様 → Next.js API Routes
├── UseCase → Server Actions / UseCaseクラス
└── Page定義 → React コンポーネント

出力:
└── src/
    ├── domain/
    ├── application/
    ├── infrastructure/
    └── presentation/
```

**フェーズ2: 自動テスト**

```
テストレベル:
1. 単体テスト
   └── ドメインロジック、バリデーション

2. 統合テスト
   └── API、DB、サービス間連携

3. E2Eテスト
   └── UseCase、画面フロー

実行:
npm run test:all
```

**フェーズ3: 自動補正**

```
テスト失敗時:
1. AI がエラーログを分析
2. 原因を特定（コードの問題 vs 設計の問題）
3. コードレベルの問題 → AI が自動修正
4. 設計レベルの問題 → 設計書更新の提案

再テスト:
修正後、自動的に再テスト実行
```

---

### 3. パラソル配下での一元管理

**設計書が常に真実（Source of Truth）**

```
原則:
- 実装はすべて設計書から生成
- 手動でコードを変更しない
- 変更はMDファイル（設計書）に反映
- MDファイル更新 → AI再生成 → 再テスト

変更フロー:
┌────────────────┐
│ 要求変更       │
└────────────────┘
        ↓
┌────────────────┐
│ MDファイル更新  │  ← パラソル配下
│ (Layer 2 or 3) │
└────────────────┘
        ↓
┌────────────────┐
│ AI再生成       │
└────────────────┘
        ↓
┌────────────────┐
│ 自動テスト     │
└────────────────┘
        ↓
    デプロイ
```

**バージョン管理**:
```
設計書のバージョン = システムのバージョン

例:
domain-language.md v1.2.3
  ↓ 生成
src/domain/entities/*.ts (generated from v1.2.3)
```

---

## 🏗️ アーキテクチャベース生成

### 生成戦略

**1. レイヤードアーキテクチャ**

```
presentation/  ← page.md から生成
    ↓
application/   ← usecase.md から生成
    ↓
domain/        ← domain-language.md から生成
    ↓
infrastructure/ ← api-specification.md, database-design.md から生成
```

**2. BC境界の厳格な適用**

```
src/contexts/
├── [bc-1]/
│   ├── domain/       # このBCのドメイン層
│   ├── application/  # このBCのアプリケーション層
│   └── ...
│
└── [bc-2]/
    ├── domain/       # 別BCのドメイン層（完全分離）
    └── ...
```

**3. 生成ルールの明確化**

```typescript
// 生成ルール例: domain-language.md → TypeScript Entity

入力（MD）:
---
### プロジェクト [Project] [PROJECT]
| 属性 | 型 | 必須 | 説明 |
|------|-----|------|------|
| id | UUID | ○ | プロジェクトID |
| name | STRING_100 | ○ | プロジェクト名 |
| status | ENUM(draft/active/completed) | ○ | 状態 |
---

出力（TypeScript）:
---
export class Project {
  private readonly _id: ProjectId;
  private _name: ProjectName;
  private _status: ProjectStatus;

  constructor(props: ProjectProps) {
    this._id = props.id;
    this._name = props.name;
    this._status = props.status;
  }

  // getters, business methods...
}
---
```

---

## 🔧 実装の実際

### AI生成ツール

**推奨ツール**:
```
1. Claude Code / Claude API
   - MDファイル解析
   - アーキテクチャに基づくコード生成
   - テスト実行とエラー分析

2. GitHub Copilot
   - コード補完

3. カスタムツール
   - パラソルMD → コード生成器
   - テスト自動実行スクリプト
```

**生成コマンド例**:
```bash
# Layer 2（BC）のドメイン層生成
npm run parasol:generate:domain -- --bc=project-planning

# Layer 3（UseCase）の生成
npm run parasol:generate:usecase -- --usecase=create-project

# Page生成
npm run parasol:generate:page -- --page=project-creation

# 全生成
npm run parasol:generate:all
```

---

## 📝 MDファイルの記述ルール

### ドメイン言語MD

```markdown
# パラソルドメイン言語: [BC名]

## エンティティ定義

### [エンティティ名] [EnglishName] [SYSTEM_NAME]

**定義**: [説明]

| 属性名 | 型 | 必須 | 説明 |
|--------|-----|------|------|
| id | UUID | ○ | 一意識別子 |
| ... | ... | ... | ... |

#### ビジネスルール
- [ルール1]
- [ルール2]

#### ドメインイベント
- [イベント名] [EventName]: [説明]
```

**AI生成時の解析**:
- テーブル構造 → プロパティ定義
- ビジネスルール → バリデーション
- ドメインイベント → イベントクラス

### UseCase MD

```markdown
# UseCase: [UseCase名]

## 基本フロー
1. ユーザーは[アクション]
2. システムは[処理]
3. ...

## 例外フロー
### E1: [エラー]
- 条件: [条件]
- 処理: [処理]
```

**AI生成時の解析**:
- 基本フロー → メインロジック
- 例外フロー → エラーハンドリング

---

## ✅ パラソルワールドの利点

### 開発速度

```
従来:
設計 → 実装 → テスト → デバッグ
[2週間] [4週間] [2週間] [1週間]
合計: 9週間

パラソルワールド:
設計 → AI生成 → 自動テスト → 自動補正
[2週間] [1時間] [1時間] [自動]
合計: 約2週間
```

### 品質保証

```
✅ 設計書とコードの完全同期
✅ アーキテクチャ違反の防止（AI生成なので）
✅ 自動テストによる継続的品質保証
✅ ドメイン言語の厳格な適用
```

### 保守性

```
✅ 設計書が常に最新（Source of Truth）
✅ 変更影響範囲の明確化
✅ AI再生成で簡単に修正適用
✅ バージョン管理が容易
```

### チーム協働

```
✅ ビジネス側: Layer 1で価値設計
✅ アーキテクト: Layer 2でドメイン設計
✅ 開発者: Layer 3で詳細設計
✅ AI: コード生成・テスト・補正
```

---

## 🚀 パラソルワールドの導入

### Phase 1: MDベース設計の確立（現在）

```
1. Layer 1-3の設計プロセス確立 ✅
2. MDテンプレートの整備 ✅
3. 設計書作成 ⏳
```

### Phase 2: AI生成ツール開発

```
1. MD → コード生成器の開発
2. テンプレートエンジンの構築
3. 生成ルールの定義
```

### Phase 3: 自動テスト基盤

```
1. テスト自動実行環境
2. AI エラー分析エンジン
3. 自動補正ロジック
```

### Phase 4: 完全自動化

```
1. CI/CD統合
2. デプロイ自動化
3. モニタリング・フィードバック
```

---

## 📚 関連ドキュメント

### 設計プロセス
- [パラソルV3設計 - 全体概要](./parasol-v3-design-overview.md)
- [Layer 1: パラソル価値デザイン](./parasol-v3-layer1-value-design.md)
- [統合設計プロセス](./parasol-v3-complete-design-breakdown-process.md)

### AI自動化（今後作成）
- AI自動生成プロセスガイド（作成予定）
- 自動テスト・補正プロセス（作成予定）

---

## 🎓 まとめ

**パラソルワールド**は、MDベースの設計書を基盤とした、AIによる完全自動開発プラットフォームです。

```
人間の役割:
├── ビジネス価値の定義
├── ドメインモデルの設計
└── ビジネスルールの定義

AIの役割:
├── コード自動生成
├── 自動テスト実行
├── 自動補正
└── 設計書との同期維持

結果:
└── 高速・高品質・保守容易なソフトウェア開発
```

**次のステップ**:
1. Layer 1-3の設計書作成
2. AI生成ツールの開発
3. 自動テスト基盤の構築

---

**パラソルワールドへようこそ！** 🌍✨
