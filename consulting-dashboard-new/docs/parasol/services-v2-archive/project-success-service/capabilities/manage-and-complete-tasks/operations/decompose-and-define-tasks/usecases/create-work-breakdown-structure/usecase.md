# ユースケース: WBS（作業分解構造）を作成する

## 基本情報
- **ユースケースID**: UC-TASK-02
- **アクター**: PM、コンサルタント
- **概要**: プロジェクト成果物を実現可能なタスクに体系的に分解し、階層的なWBS（Work Breakdown Structure）を作成してプロジェクト実行の基盤を構築する

## 事前条件
- プロジェクトが定義されている（Project.status = "defined"）
- 成果物要件が明確化されている（Deliverable.requirements = "defined"）
- プロジェクトスコープが確定している
- 必要スキルと工数見積の基準が設定されている
- WBS作成権限が確認されている

## 事後条件
### 成功時
- WBSが作成され保存されている（WorkBreakdownStructure.status = "created"）
- タスク階層が適切に構築されている（Task.hierarchy = "structured"）
- 工数見積が完了している（Task.estimatedHours != null）
- 依存関係が定義されている（Task.dependencies = "defined"）
- タスク分解の妥当性が検証されている

### 失敗時
- WBS作成失敗の詳細がログに記録されている
- 不完全なタスク分解が特定されている
- 見積エラーの原因が明確化されている
- 再作成のガイダンスが提供されている

## 基本フロー
1. **PMがWBS作成を開始する**
   - プロジェクト成果物の確認・スコープ境界の明確化
   - 分解方針の決定・分解レベルの設定

2. **システムがWBS作成支援機能を提供する**
   - → UC-AUTH-02: WBS作成権限を検証する
   - 過去プロジェクトのWBSテンプレート提供
   - 自動分解候補の提案・ベストプラクティスの表示

3. **PMとコンサルタントがタスク分解を実行する**
   - 成果物レベルでの大分類・機能単位での中分類
   - 実行可能単位での詳細分解・工数見積の実施

4. **システムがWBS検証と最適化を実行する**
   - 分解漏れの検出・重複タスクの特定
   - 工数見積の妥当性確認・依存関係の整合性チェック

5. **システムがWBS確定と登録を完了する**
   - WBSの最終確認・TaskとWorkBreakdownStructureエンティティの保存
   - → UC-NOTIFY-01: WBS作成完了通知を配信する
   - → UC-AUTH-03: WBS作成ログを記録する

## 代替フロー
### 代替フロー1: テンプレートベース作成
- 3a. 類似プロジェクトのテンプレートを活用する場合
  - 3a1. 適用可能テンプレートの選択・カスタマイズ要件の特定
  - 3a2. テンプレートの調整・プロジェクト固有要素の追加
  - 3a3. 基本フロー4（WBS検証）に進む

### 代替フロー2: 段階的詳細化
- 3b. 複雑なプロジェクトで段階的に詳細化する場合
  - 3b1. 上位レベルWBSの作成・主要マイルストーンの設定
  - 3b2. フェーズ毎の詳細分解・段階的工数見積
  - 3b3. 基本フロー4に戻る

## 例外フロー
### 例外1: 分解粒度の不適切性
- *a. タスク分解が適切でない場合
  - *a1. → UC-AUTH-03: 分解問題ログを記録する
  - *a2. 分解基準の再確認・適切な粒度の指導
  - *a3. 分解のやり直し・品質基準の適用
  - *a4. 基本フロー3に復帰

### 例外2: 工数見積の大幅乖離
- *b. 見積工数が予算や期間と大幅に乖離する場合
  - *b1. 乖離原因の分析・スコープ見直しの検討
  - *b2. ステークホルダーとの調整・制約条件の再確認
  - *b3. 調整完了後、基本フロー3に復帰

### 例外3: 依存関係の複雑化
- *c. タスク間依存関係が複雑すぎる場合
  - *c1. 依存関係の整理・シンプル化の検討
  - *c2. 並行実行可能性の再評価・クリティカルパスの見直し
  - *c3. 依存関係最適化後、基本フロー4に復帰

## 特別要件
- **性能**: WBS作成支援2秒以内、検証処理5秒以内
- **可用性**: WBS作成システム稼働率99.9%以上
- **セキュリティ**: WBSデータ暗号化、アクセス権限制御、変更履歴保存
- **精度**: 分解漏れ検出率95%以上、工数見積精度80%以上
- **ユーザビリティ**: 直感的な分解インターフェース、豊富なテンプレート

## 関連ユースケース
- **包含**: UC-AUTH-02（権限検証）、UC-AUTH-03（ログ記録）、UC-NOTIFY-01（通知配信）
- **前提**: プロジェクト定義、成果物要件明確化完了必須
- **後続**: タスクアサイン、進捗管理、リソース配分

---
*このユースケースは パラソル設計v2.0仕様 に基づいて作成されました*
