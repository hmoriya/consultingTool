# ページ定義: タスク依存関係定義画面

## 画面の目的
定義されたタスク間の論理的な依存関係・前後関係を設定し、プロジェクトの実行順序・並行性・制約条件を明確化してスケジューリングの基盤を構築する

## 利用者
- **プロジェクトマネージャー**: 全体のタスク依存関係設計・調整・最適化
- **プロジェクトリーダー**: 担当領域内のタスク関係定義・調整
- **チームリーダー**: チーム内作業の依存関係整理・効率化検討
- **上級コンサルタント**: 技術的依存関係・リスク要因の特定・回避策検討

## 画面構成

### ヘッダー部
- 対象プロジェクトの基本情報（名称・期間・進捗・責任者）
- 依存関係定義の進捗状況・完了率・残作業・品質状況
- 現在の作業フェーズ・編集権限・保存状態・同期状況
- 重要な通知・警告・確認事項・スケジュール影響

### プロジェクト構造表示部
- **WBS階層表示**:
  - プロジェクト全体のWBS構造・階層・分類
  - 各タスクの詳細情報・進捗・責任者・期間
  - フェーズ・ワークパッケージ・アクティビティの区分
- **タスク選択機能**:
  - 依存関係定義対象タスクの選択・絞り込み
  - タスク属性・分類・重要度による条件検索
  - お気に入り・最近編集したタスクの履歴表示

### 依存関係設定部
- **基本依存関係**:
  - 開始-開始（SS）・開始-終了（SF）・終了-開始（FS）・終了-終了（FF）
  - リードタイム・ラグタイム・バッファ期間・調整期間
  - 必須依存・推奨依存・最適化依存・リスク回避依存
- **詳細条件設定**:
  - 成果物受け渡し・承認完了・品質確認の前提条件
  - リソース共有・専門知識・機器設備の制約条件
  - 外部依存・クライアント承認・第三者提供の待機条件

### 依存関係ビジュアル表示部
- **ネットワーク図**:
  - タスク間の依存関係を視覚的に表現・確認
  - クリティカルパス・並行作業・ボトルネック特定
  - ズーム・パン・フィルタ・レイアウト調整機能
- **ガントチャート連携**:
  - 依存関係を反映したスケジュール表示・調整
  - リソース制約・作業負荷・期間最適化
  - what-ifシナリオ・スケジュール変更影響分析

### 制約条件管理部
- **外部制約**:
  - クライアント都合・法的要件・業界規制・季節要因
  - 第三者依存・外部サービス・インフラ制約
  - 予算承認・契約条件・調達・納期制約
- **内部制約**:
  - リソース可用性・スキル要件・機器設備・場所制約
  - 品質要件・テスト期間・レビュー・承認プロセス
  - 並行作業限界・チーム能力・作業効率・学習曲線

### 影響分析・最適化部
- **スケジュール影響**:
  - 依存関係変更によるプロジェクト期間・納期への影響
  - クリティカルパス変更・フロート時間・余裕期間
  - リスク要因・ボトルネック・最適化機会の特定
- **リソース最適化**:
  - 並行作業・リソース分散・負荷平準化の検討
  - スキル要件・専門知識・機器利用の効率化
  - 外部リソース・アウトソース・調達最適化

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| タスク一覧 | 階層ツリー表示 | ○ | WBS構造・詳細情報 |
| 依存関係マップ | ネットワーク図表示 | ○ | 視覚的関係表現 |
| 制約条件一覧 | カテゴリ別表示 | ○ | 外部・内部制約 |
| 影響分析結果 | 分析レポート表示 | ○ | スケジュール・リソース影響 |
| 最適化提案 | 推奨事項表示 | × | 改善・効率化案 |
| 変更履歴 | タイムライン表示 | × | 依存関係変更履歴 |

### データの更新頻度
- **依存関係設定**: 変更時にリアルタイム更新・反映
- **影響分析**: 依存関係変更時に自動再計算・更新
- **最適化提案**: 日次バッチ処理で分析・提案更新

## 入力項目

### 依存関係基本設定
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 先行タスク | 選択リスト | ○ | 存在するタスク | 前提となるタスク |
| 後続タスク | 選択リスト | ○ | 存在するタスク | 依存するタスク |
| 依存関係種別 | 単一選択 | ○ | FS/SS/FF/SF | 依存関係のタイプ |
| リードタイム | 数値入力 | × | 0以上の整数 | 先行完了後の待機期間 |

### 制約条件設定
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 制約種別 | 単一選択 | ○ | 制約タイプ一覧 | 外部・内部・リソース等 |
| 制約内容 | テキストエリア | ○ | 最大500文字 | 具体的な制約条件 |
| 重要度 | 単一選択 | ○ | 高・中・低 | 制約の重要性・影響度 |
| 期限・期間 | 日付範囲 | × | 有効な期間 | 制約の適用期間 |

## アクション・操作

### 主要アクション
- **依存関係追加**: 新規依存関係の定義・設定・登録
- **制約条件設定**: 外部・内部制約の定義・分類・登録
- **影響分析実行**: 依存関係変更によるスケジュール・リソース影響分析
- **最適化提案**: 並行作業・効率化・リスク軽減の提案・実行

### 副次アクション
- **依存関係複製**: 類似タスクへの依存関係パターン適用
- **テンプレート保存**: 依存関係パターンのテンプレート化・再利用
- **ガントチャート連携**: スケジューリングツールとの同期・更新
- **レポート生成**: 依存関係・制約条件・影響分析の文書化

## 画面の振る舞い

### ユーザー操作への反応
- **タスク選択時**: 関連する依存関係・制約条件の自動表示・強調
- **依存関係設定時**: 循環依存チェック・論理矛盾の検出・警告
- **制約追加時**: 影響を受けるタスク・スケジュールの自動特定・通知
- **分析実行時**: リアルタイム計算・可視化・結果のインタラクティブ表示

### 条件による表示変更
- **循環依存検出時**: エラー表示・修正案内・自動解決提案
- **クリティカルパス変更時**: 重要度表示・警告・影響範囲の強調
- **制約競合時**: 競合内容・優先度・調整案の表示・選択肢提示

## 画面遷移

### 遷移元画面
- タスク詳細定義画面: タスク詳細設定完了後の依存関係定義時
- WBS作成画面: 作業分解完了後の関係性整理時
- プロジェクト計画画面: 詳細計画策定時の依存関係確認・調整時

### 遷移先画面
- 工数見積もり画面: 依存関係確定後の詳細見積もり・計画時
- スケジュール調整画面: 依存関係を反映したスケジューリング時
- リスク分析画面: 依存関係リスク・制約リスクの詳細分析時

## エラーハンドリング
- **循環依存エラー**: 依存関係の循環検出時の警告・修正案内・自動解決支援
- **制約競合エラー**: 制約条件の競合・矛盾時の調整案内・優先度提示
- **スケジュール不整合エラー**: 依存関係とスケジュールの不整合時の修正支援
- **データ整合性エラー**: タスク削除・変更時の依存関係修正・更新案内

## アクセシビリティ要件
- キーボードナビゲーション対応（Tab移動での依存関係設定・ネットワーク図操作）
- スクリーンリーダー対応（依存関係・制約条件・分析結果の音声案内）
- 高コントラストモード対応（依存線・制約表示・警告の明確な視認性）

## レスポンシブ対応
- **デスクトップ**: 4ペイン表示（WBS・依存設定・ビジュアル・分析結果）
- **タブレット**: 3ペイン表示でタブ切り替え・スワイプ操作対応
- **モバイル**: ステップ式設定フローでの段階的依存関係定義

## 依存関係品質の保証
- **論理整合性**: 循環依存・論理矛盾の自動検出・修正支援
- **完全性**: 必要な依存関係の漏れ検出・補完提案
- **最適性**: 並行作業・効率化機会の特定・最適化提案
- **保守性**: 依存関係変更の影響追跡・更新の容易性確保