# ユースケース: 戦略的予算提案書を作成する

## 基本情報
- **ユースケースID**: UC-BUDGET-01
- **アクター**: 財務マネージャー、プロジェクトマネージャー、部門長
- **概要**: 組織戦略に整合した精度の高い予算提案書を作成し、意思決定を支援する

## 事前条件
- ユーザーが適切な財務権限を有している
- 前年度実績データが利用可能である
- 組織戦略・目標が明確に定義されている
- プロジェクト計画情報が参照可能である

## 事後条件
### 成功時
- 戦略整合性の取れた予算提案書が作成されている
- BudgetEntity（状態: draft → submitted）に変更されている
- 関係者への通知が配信されている
- 予算精度95%以上の基準を満たしている

### 失敗時
- 適切なエラーメッセージが表示されている
- BudgetEntity（状態: draft）が維持されている
- エラーログが記録されている

## 基本フロー
1. **財務マネージャーが予算策定を開始する**
   - → UC-AUTH-01: ユーザー認証を実行する
   - → UC-AUTH-02: 財務権限を検証する

2. **システムがプロジェクト情報を収集する**
   - → UC-PROJECT-01: プロジェクト基本情報を取得する
   - → UC-PROJECT-02: リソース要求詳細を取得する
   - → UC-PROJECT-03: マイルストーン情報を取得する

3. **財務マネージャーが予算項目を定義・入力する**
   - BudgetLineEntity（作成: 人件費、外注費、経費等）
   - BudgetOptimizationService による精度向上提案
   - 前年度実績との比較分析

4. **システムが戦略整合性を検証する**
   - StrategicAlignmentService による自動検証
   - 組織戦略との整合度評価（目標4.5/5.0以上）
   - 不整合箇所の特定・改善提案

5. **予算提案書を完成・提出する**
   - BudgetEntity（状態変更: draft → submitted）
   - BudgetVersionEntity（初期版の記録）
   - → UC-COMM-01: 予算提案通知を配信する

## 代替フロー
### 代替フロー1: 予算精度向上支援
- 3a. 予算精度が基準を下回る場合
  - 3a1. AIベース最適化アルゴリズムの適用
  - 3a2. 類似プロジェクト実績データの参照
  - 3a3. リスク要因の詳細分析
  - 3a4. 基本フロー4（戦略整合性検証）に戻る

### 代替フロー2: プロジェクト情報不足時の対応
- 2a. プロジェクト情報が不完全な場合
  - 2a1. → UC-COMM-03: プロジェクト情報補完会議を調整する
  - 2a2. 暫定予算案の作成（条件付き）
  - 2a3. 情報補完後の更新プロセス
  - 2a4. 基本フロー3（予算項目定義）に戻る

## 例外フロー
### 例外1: 権限不足エラー
- *a. 財務権限が不足している場合
  - *a1. → UC-AUTH-02: 上位権限者への承認依頼
  - *a2. 権限昇格プロセスの実行
  - *a3. ユースケース再開または終了

### 例外2: 戦略整合性重大違反
- *b. 予算案が組織戦略と大幅に乖離している場合
  - *b1. → UC-COMM-03: 緊急戦略調整会議を調整する
  - *b2. 戦略見直しまたは予算案抜本修正
  - *b3. エグゼクティブレベルでの意思決定

## 特別要件
- **性能**: 予算案作成プロセス完了時間24時間以内
- **可用性**: システム稼働率99.5%以上
- **セキュリティ**: 財務データの暗号化、アクセスログ記録
- **精度**: 予算精度95%以上達成
- **ユーザビリティ**: 直感的なUI、ガイド機能提供

## 関連ユースケース
- **包含**: UC-AUTH-01, UC-AUTH-02, UC-PROJECT-01〜03, UC-COMM-01, UC-COMM-03
- **拡張**: UC-BUDGET-02（予算審査・承認）
- **汎化**: なし

---
*このユースケースは パラソル設計v2.0仕様 に基づいて作成されました*