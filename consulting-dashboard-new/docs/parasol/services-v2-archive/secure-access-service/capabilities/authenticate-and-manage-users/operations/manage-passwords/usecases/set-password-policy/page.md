# ページ定義: ポリシー設定ページ

**バージョン**: 2.0.0
**更新日**: 2025-10-21
**設計方針**: 設定重視・影響範囲表示

## 画面の目的
セキュリティ管理者が組織全体のパスワードセキュリティポリシーを直感的に設定し、変更による影響範囲をリアルタイムで確認しながら、適切なセキュリティレベルを維持する。

## 利用者
- **主要利用者**: セキュリティ管理者（組織のパスワードポリシー管理責任者）
- **副次利用者**: システム管理者（ポリシー適用の技術的支援）、監査担当者（ポリシー変更履歴の確認）

## 画面構成

### ヘッダー部
- **ページタイトル**: 「パスワードポリシー設定」
- **組織情報表示**: 「[組織名] - 対象ユーザー: 1,250人」
- **最終更新情報**: 「前回更新: 2024-09-15 by admin@company.com」
- **ヘルプリンク**: ポリシー設定ガイド・業界標準推奨値

### メインコンテンツ部

#### セクション1: 現在のポリシー概要
- **現在の設定サマリー**:
  - ポリシー適用状況: 「有効 | 最小8文字 | 複雑性: 中」
  - 準拠率表示: 「現在の準拠率: 78% (975/1,250 ユーザー)」
  - リスクレベル: 「セキュリティレベル: 中 🟡」

#### セクション2: ポリシー詳細設定

##### サブセクション2-1: 基本要件
- **最小文字数設定**:
  - スライダー: 6文字 〜 32文字（現在値表示付き）
  - 推奨値表示: 「推奨: 12文字以上（NIST準拠）」
  - 影響表示: 「変更により157人が影響を受けます」

- **複雑性要件チェックボックス**:
  - ☑️ 大文字を含む (A-Z)
  - ☑️ 小文字を含む (a-z)
  - ☑️ 数字を含む (0-9)
  - ☑️ 記号を含む (!@#$%^&*)
  - 📊 複雑性スコア設定: 60-100 (現在: 80)

##### サブセクション2-2: セキュリティ制御
- **パスワード有効期間**:
  - 選択肢: 「30日 | 60日 | 90日 | 無期限」
  - 現在設定: 90日
  - 注意事項: 「短すぎる期間はユーザビリティを低下させます」

- **履歴管理**:
  - 履歴保持数: 1〜10世代（現在: 5世代）
  - 説明: 「過去のパスワードの再利用を防止」

##### サブセクション2-3: 適用方針
- **適用モード選択**:
  - 🔵 即座適用（全ユーザー）
  - 🟢 段階適用（猶予期間付き）
  - 🟡 テストモード（一部ユーザー先行）

- **猶予期間設定**（段階適用選択時）:
  - 期間: 7日 | 30日 | 60日 | 90日
  - スケジュール表示: 「通知 → 警告 → 強制適用」

#### セクション3: 影響分析（リアルタイム更新）

##### サブセクション3-1: 影響ユーザー分析
- **準拠状況変化**:
  - 現在の準拠率: 78% (975人)
  - 新ポリシー適用後: 45% (563人) ⚠️
  - 要対応ユーザー: 687人

- **影響レベル表示**:
  - 🔴 高影響 (準拠率30%未満): 「大幅な変更が必要です」
  - 🟡 中影響 (準拠率30-70%): 「段階的適用を推奨します」
  - 🟢 低影響 (準拠率70%以上): 「即座適用が可能です」

##### サブセクション3-2: リスク評価
- **セキュリティ効果**:
  - セキュリティレベル向上: 中 → 高
  - 推定攻撃耐性: +45%向上
  - 法的コンプライアンス: ISO27001準拠

- **運用インパクト**:
  - ヘルプデスク問い合わせ予測: +200% (2週間)
  - 教育必要ユーザー数: 687人
  - 推定対応工数: 80時間

### アクションエリア
- **設定適用ボタン**:
  - ラベル: 「ポリシーを適用する」
  - 色: 影響レベルに応じて変化（高影響時は橙色）
  - 確認ダイアログ: 「687人のユーザーに影響します。続行しますか？」

- **プレビューボタン**:
  - ラベル: 「設定をプレビュー」
  - 機能: 変更なしで影響分析のみ実行

- **リセットボタン**:
  - ラベル: 「設定をリセット」
  - 機能: 現在の設定値に戻す

### サイドバー部（右側）

#### ユーザー支援情報
- **業界標準推奨値**:
  - NIST推奨: 最小12文字、複雑性中
  - ISO27001準拠: 最小8文字、複雑性高
  - 自社リスクレベル: 中（推奨設定表示）

- **設定例テンプレート**:
  - 🏢 保守的企業: 高セキュリティ設定
  - 🚀 スタートアップ: バランス重視設定
  - 🏛️ 金融機関: 最高セキュリティ設定

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 更新頻度 | 説明 |
|-----------|---------|---------|------|
| 影響ユーザー数 | 数値+パーセンテージ | リアルタイム | 設定変更時に即座更新 |
| 準拠率分析 | プログレスバー+数値 | リアルタイム | 現在値と予測値を比較表示 |
| セキュリティレベル | アイコン+テキスト | リアルタイム | 低・中・高・最高の4段階 |
| ポリシー履歴 | テーブル形式 | ページロード時 | 過去の変更履歴（直近10件） |

## 入力項目

### フォーム一覧
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 最小文字数 | スライダー | ○ | 6-32文字の範囲 | リアルタイム影響計算 |
| 複雑性要件 | チェックボックス | × | 最低1つ選択必須 | 組み合わせ検証 |
| 有効期間 | 選択リスト | ○ | 30-365日の範囲 | 無期限オプション有 |
| 履歴保持数 | 数値入力 | ○ | 1-10の範囲 | メモリ使用量警告 |
| 適用モード | ラジオボタン | ○ | 1つ選択必須 | 依存オプション制御 |

### 入力検証ルール
- **リアルタイム検証**: 設定変更500ms後に影響分析実行
- **組み合わせ検証**: 複雑性要件と最小文字数の整合性チェック
- **ビジネスルール検証**: 現在より弱いポリシーへの変更時警告
- **ユーザビリティチェック**: 過度に厳しい設定時の使いやすさ警告

## アクション・操作

### 主要アクション
- **ポリシー適用実行**:
  - トリガー: 適用ボタンクリック
  - 確認: 影響範囲の最終確認ダイアログ
  - 実行後: 適用状況モニタリング画面に遷移

- **リアルタイム影響分析**:
  - トリガー: 任意の設定値変更
  - 応答時間: 2秒以内
  - 表示更新: 影響ユーザー数、準拠率、リスクレベル

### 副次アクション
- **テンプレート適用**: 業界標準設定の一括適用
- **エクスポート**: 現在設定のCSV/JSON出力
- **インポート**: 設定ファイルからの一括読み込み
- **設定比較**: 現在設定と新設定の差分表示

### 管理機能
- **変更履歴表示**: 過去の設定変更とその影響の確認
- **ロールバック**: 直前の設定への復旧
- **スケジュール設定**: 将来日時での自動適用

## 画面の振る舞い

### ユーザー操作への反応
- **設定値変更時**: 即座に影響分析実行、視覚的フィードバック
- **高影響設定時**: 警告色での表示、推奨事項の自動表示
- **テンプレート選択時**: 全設定値の一括更新、変更点のハイライト
- **適用実行時**: プログレス表示、リアルタイム適用状況更新

### 条件による表示変更
- **高セキュリティモード**: 追加のセキュリティ設定オプション表示
- **テストモード選択時**: 対象ユーザー選択UI の表示
- **段階適用選択時**: 猶予期間設定とスケジュール表示
- **準拠率低下時**: 警告バナーと対応推奨事項の表示

## 画面遷移

### 遷移元画面
- **セキュリティダッシュボード**: ポリシー管理メニュー
- **システム設定**: セキュリティ設定セクション
- **監査画面**: ポリシー変更が必要な問題から
- **アラート通知**: ポリシー違反検出時の修正アクション

### 遷移先画面
- **適用状況モニタリング**: ポリシー適用実行後
- **ユーザー通知管理**: 影響ユーザーへの通知設定
- **教育資料管理**: ポリシー変更に伴う教育コンテンツ作成
- **セキュリティダッシュボード**: 設定完了後の確認
- **監査ログ**: 変更履歴の詳細確認

## エラーハンドリング

### エラー表示方法
- **設定値矛盾**: 該当フィールドを赤枠表示、具体的改善提案を表示
- **権限不足**: 「ポリシー変更権限がありません」モーダル表示
- **システム負荷高**: 「現在処理中です。しばらく待ってから再試行してください」
- **適用失敗**: エラー詳細と復旧手順を段階的に表示

### 対処法ガイド
- **権限問題**: システム管理者への連絡方法
- **技術的問題**: エラーコードと対応手順の表示
- **設定ガイダンス**: 設定値の推奨事項と業界標準の案内

## アクセシビリティ要件

### キーボードナビゲーション
- タブ順序: 設定セクション → 影響分析 → アクション
- ショートカット: Ctrl+S で設定保存、Ctrl+P でプレビュー

### スクリーンリーダー対応
- 設定値変更時の音声フィードバック「影響ユーザー数が変更されました」
- 複雑なデータ表示のテキスト要約
- エラーメッセージの即座読み上げ

### 色覚障害への配慮
- 影響レベル表示: 色だけでなくアイコンと文字で併用
- グラフ・チャート: パターンや形状での区別併用

## レスポンシブ対応

### デスクトップ（1200px以上）
- 3カラムレイアウト: 設定 | 影響分析 | 支援情報
- データ詳細の横並び表示

### タブレット（768px-1199px）
- 2カラムレイアウト: 設定と影響分析を左右配置
- 支援情報をアコーディオン形式で下部配置

### モバイル（767px以下）
- 1カラム縦積み: 設定 → 影響分析 → アクション
- 設定セクションをタブ形式で分割
- 影響分析を簡略表示（詳細は展開式）

## パフォーマンス要件

### レスポンス時間
- 影響分析計算: 2秒以内
- 設定値検証: 500ms以内
- ページ初期表示: 3秒以内

### データ処理
- 1000ユーザーまでの影響分析: リアルタイム
- 10000ユーザー以上: バックグラウンド処理

---
*このページ定義は、UC-PASS-02「パスワードポリシーを設定する」と1対1対応し、セキュリティガバナンスと運用効率を両立したインターフェースを実現しています*