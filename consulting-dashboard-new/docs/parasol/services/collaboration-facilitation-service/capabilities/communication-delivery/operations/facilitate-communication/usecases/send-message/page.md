# ページ定義: メッセージ送信確認ページ

## 画面の目的
作成済みメッセージの最終確認を行い、確実にチャネルメンバーに送信することで、円滑なコミュニケーションを促進する

## 利用者
- **チャネルメンバー**: メッセージを送信する主要な利用者
- **チャネル管理者**: チャネル内でのコミュニケーション監視

## 画面構成

### ヘッダー部
- チャネル名表示（現在の投稿先チャネル）
- オンラインメンバー数表示
- 送信キャンセルボタン

### メインコンテンツ部
- **メッセージプレビューエリア**: 送信予定メッセージの表示
  - テキスト内容の最終確認表示
  - ファイル添付がある場合のプレビュー表示
  - メンション対象者のハイライト表示
  - スレッド返信の場合、親メッセージの引用表示
- **送信確認エリア**: 送信操作の制御
  - 送信確認メッセージ（「以下の内容でメッセージを送信しますか？」）
  - 送信ボタン（プライマリアクション）
  - 戻るボタン（編集画面に戻る）
- **送信状況表示エリア**: 処理状況のリアルタイム表示
  - 送信進行状況インジケーター
  - 配信状況（「3人中2人に配信完了」等）
  - エラー時の詳細メッセージ表示

### サイドバー部
- **配信対象一覧**: メッセージが届くメンバーの確認
  - チャネルメンバー一覧（アクティブ状態表示）
  - メンション対象者のハイライト表示
  - 通知設定オフのメンバー表示

### フッター部
- 送信予定時刻表示
- データ使用量表示（ファイル添付時）

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| メッセージ内容 | テキスト表示 | ○ | 送信予定のメッセージ本文 |
| 添付ファイル | プレビュー/アイコン | × | ファイルの種類と容量 |
| メンション対象 | ハイライト表示 | × | @マークで指定されたユーザー |
| 送信先チャネル | チャネル名 | ○ | 投稿先チャネルの確認 |
| 配信対象者数 | 数値表示 | ○ | メッセージが届くメンバー数 |
| 送信予定時刻 | 日時表示 | ○ | 送信ボタンクリック時の時刻 |

### データの更新頻度
- **配信状況**: リアルタイム（送信中のみ）
- **メンバー状態**: 30秒間隔で更新
- **送信予定時刻**: 画面表示時に1回設定

## 入力項目

### 操作項目一覧
| 操作項目 | 操作形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 送信確認 | ボタンクリック | ○ | 権限チェック | メッセージの送信実行 |
| 送信キャンセル | ボタンクリック | × | なし | 編集画面に戻る |
| 編集に戻る | リンククリック | × | なし | メッセージ作成画面に戻る |

## アクション・操作

### 主要アクション
- **メッセージ送信**: メッセージをチャネルに投稿し、全メンバーに配信
- **送信キャンセル**: 送信処理を中断し、編集画面に戻る
- **編集に戻る**: メッセージ作成画面に戻り、内容の修正を可能にする

### 副次アクション
- **プレビュー展開**: ファイル添付の詳細プレビュー表示
- **メンション確認**: メンション対象者の詳細情報表示
- **配信状況確認**: 送信進行状況の詳細表示

## 画面の振る舞い

### ユーザー操作への反応
- **送信ボタンクリック**時:
  - 送信確認ダイアログ表示
  - 権限・チャネル状態の最終確認
  - 送信処理開始とプログレス表示
- **キャンセルボタンクリック**時:
  - 確認なしで編集画面に即座に戻る
- **ファイルプレビューホバー**時:
  - ファイル詳細情報（サイズ、形式、アップロード日時）表示

### 条件による表示変更
- **スレッド返信の場合**: 親メッセージを引用形式で表示
- **メンション含有の場合**: メンション対象者を特別ハイライト
- **ファイル添付の場合**: ファイルプレビューエリアを展開表示
- **権限不足の場合**: 送信ボタンを無効化し、理由を表示

## 画面遷移

### 遷移元画面
- メッセージ作成ページ: 送信ボタンクリック時
- メッセージ編集ページ: 修正後の再送信時

### 遷移先画面
- メッセージ表示ページ: 送信成功時
- メッセージ作成ページ: キャンセル・編集戻り時
- エラー表示ページ: 送信失敗時

## エラーハンドリング
- **送信権限エラー**: 権限不足の説明と管理者連絡方法を表示
- **ネットワークエラー**: 再試行ボタンとオフライン送信オプション提供
- **チャネルアーカイブエラー**: チャネル状態変更の通知と代替手段提示
- **ファイル容量エラー**: 容量制限の説明と圧縮オプション提案

## アクセシビリティ要件
- 送信ボタンのキーボードナビゲーション対応（Enterキー）
- スクリーンリーダーでの送信状況読み上げ対応
- 送信処理中の視覚的・音声的フィードバック提供

## レスポンシブ対応
- **デスクトップ**: 横並びレイアウト（プレビュー・確認・配信対象）
- **タブレット**: 縦積みレイアウト（プレビュー上部、確認下部）
- **モバイル**: シンプル表示（プレビュー・送信ボタンのみ、詳細は展開式）

## パフォーマンス要件
- **初期表示**: 300ms以内
- **送信処理**: 2秒以内（95パーセンタイル）
- **状況更新**: 100ms以内のリアルタイム反映

---
*このページ定義は新仕様v2.0のユースケース・ページ分解指向設計に基づいています*