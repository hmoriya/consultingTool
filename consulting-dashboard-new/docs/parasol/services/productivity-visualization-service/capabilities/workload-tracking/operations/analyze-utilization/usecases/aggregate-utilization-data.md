# ユースケース: 稼働率データを集計する

## 基本情報
- **ユースケースID**: UC-PVS-003-001
- **アクター**: コンサルタント、PM、マネージャー、分析担当者
- **概要**: 記録された工数データから稼働率・利用率・効率性の各種指標を集計・算出し、分析可能な形式で提供する

## 事前条件
- 分析権限を持つユーザーがログインしている
- 稼働率分析システムが正常に稼働している
- 工数データが十分な期間にわたって蓄積されている
- 分析対象の組織・プロジェクト・期間が明確に定義されている

## 事後条件
### 成功時
- 指定条件による稼働率データが正確に集計されている
- 集計結果が分析可能な形式で格納・表示されている
- 集計処理の履歴・ログが記録されている
- 関係者に集計完了が通知されている

### 失敗時
- 集計エラーの原因が特定・記録されている
- 部分的な集計結果が保護されている
- エラー対応手順が実行されている

## 基本フロー
1. ユーザーが稼働率分析画面にアクセスする
2. システムが利用可能な分析条件・期間・対象を表示する
3. ユーザーが集計対象・期間・詳細レベル・出力形式を選択する
4. システムが選択条件の妥当性・データ可用性を検証する
5. システムが工数データから稼働率指標を算出・集計する
6. システムが集計結果を分析可能な形式で構造化する
7. システムが集計結果を表示・保存・通知する
8. ユーザーが集計結果を確認・承認・活用する

## 代替フロー
### 代替フロー1: 大量データ集計の最適化処理
- 5a. 集計対象データが大量・複雑な場合
  - 5a1. システムが集計処理を分散・並列化して実行
  - 5a2. 進捗状況をリアルタイムで表示・更新
  - 5a3. 部分集計結果を段階的に表示・提供
  - 5a4. 基本フロー6に戻る

### 代替フロー2: 自動定期集計の実行
- 1a. 定期集計スケジュールによる自動実行の場合
  - 1a1. システムが事前定義された条件・設定を読み込み
  - 1a2. 自動的に集計処理を開始・実行
  - 1a3. 集計完了後、関係者に結果を自動配信
  - 1a4. 基本フロー8に戻る

### 代替フロー3: リアルタイム集計の継続更新
- 7a. リアルタイム監視・更新が設定されている場合
  - 7a1. 新規工数データの追加・更新を検知
  - 7a2. 影響する集計結果を自動的に再計算
  - 7a3. 変更箇所をハイライト表示・通知
  - 7a4. 基本フロー8に戻る

## 例外フロー
### 例外1: データ不整合・品質問題の検出
- 5a. 工数データに不整合・品質問題が発見された場合
  - 5a1. システムが問題データ・内容・影響範囲を特定・報告
  - 5a2. 集計処理を一時停止・問題データを隔離・保護
  - 5a3. データ修正・承認を経て集計処理を再開
  - 5a4. 修正後、基本フロー5から集計処理を再実行

### 例外2: システムリソース・性能限界
- 5a. 集計処理がシステムリソース限界に達した場合
  - 5a1. システムが処理負荷・リソース使用状況を監視・分析
  - 5a2. 集計処理を最適化・分散・スケジュール調整
  - 5a3. 必要に応じてバッチ処理・オフライン処理に移行
  - 5a4. 処理完了後、基本フロー7から結果表示を実行

### 例外3: 集計結果の異常・矛盾検出
- 6a. 集計結果に異常値・矛盾が検出された場合
  - 6a1. システムが異常・矛盾の内容・原因を分析・特定
  - 6a2. 異常データを隔離・検証・修正を実行
  - 6a3. 集計ロジック・アルゴリズムの検証・調整
  - 6a4. 修正後、基本フロー5から集計処理を再実行

## 特別要件
### データ品質・正確性要件
- 精度：集計結果の誤差率1%以下・高精度・信頼性・客観性確保
- 完全性：全工数データの100%網羅・欠損なし・完全・包括的集計
- 整合性：集計結果間・データ間の完全整合性・一貫性・論理的妥当性
- 最新性：リアルタイム・準リアルタイム更新・最新状況・即時反映

### システム性能・効率性要件
- 処理速度：大量データ集計の高速処理・短時間・効率・生産性向上
- スケーラビリティ：組織拡大・データ増加への対応・成長・発展・持続
- 同時処理：複数ユーザー・複数集計の並行処理・安定・品質・満足
- リソース効率：CPU・メモリ・ストレージの最適活用・効率・経済性

### 分析品質・価値創造要件
- 多面性：複数角度・観点・次元からの包括的・多角的・深い分析・洞察
- 比較性：時系列・部門間・プロジェクト間・個人間の比較・相対・絶対評価
- 予測性：トレンド・パターン・将来予測・計画・戦略・意思決定支援
- 実用性：分析結果の実用・活用・改善・価値創造・成果・効果・貢献

## 関連ユースケース
### 包含関係
- 工数データを検証・前処理する
- 集計アルゴリズムを実行する
- 結果データを構造化・保存する
- 集計履歴・ログを記録する

### 拡張関係
- 工数を記録する（データ入力ユースケース）
- 分析結果を可視化する（分析活用ユースケース）
- 改善計画を策定する（意思決定支援ユースケース）

### 汎化関係
- データ分析を実行する（上位概念）

## ビジネスルール
### 集計対象・範囲定義ルール
- 期間設定：日次・週次・月次・四半期・年次・カスタム期間の柔軟・適応設定
- 組織範囲：個人・チーム・部門・全社・クライアント別・プロジェクト別・多階層
- データ種別：確定・暫定・予定・実績・計画・目標の区別・適切・選択・活用
- 除外条件：休暇・研修・非稼働・特殊事情の除外・調整・公正・適切・処理

### 集計計算・指標定義ルール
- 稼働率計算：実稼働時間÷標準労働時間×100・標準・統一・客観・公正
- 利用率計算：課金時間÷総稼働時間×100・収益・効率・価値・貢献・測定
- 効率性指標：成果÷投入工数・生産性・品質・価値・競争力・持続・成長
- 集計単位：時間・日・週・月・プロジェクト・タスク・多次元・柔軟・適応

### データ品質・検証ルール
- 異常値検出：統計的・論理的・経験的異常値の自動検出・報告・対応・品質
- 欠損データ：未記録・不完全データの補完・推定・除外・適切・処理・品質
- 重複除去：重複・矛盾データの検出・統合・除去・整理・整合・品質・信頼
- 精度保証：計算精度・丸め誤差・累積誤差の管理・制御・品質・信頼・価値

## データ要件
### 入力データ
- 工数記録：日時・プロジェクト・タスク・時間・作業者・詳細・品質・完全性
- 組織情報：部門・チーム・役職・権限・階層・関係・構造・所属・責任・範囲
- プロジェクト情報：期間・予算・目標・状況・品質・成果・価値・重要・優先
- 稼働基準：標準労働時間・休日・特別日・制度・規則・基準・公正・統一

### 出力データ
- 稼働率指標：個人・チーム・部門・プロジェクト・期間別・多次元・詳細・包括
- 利用率分析：課金・非課金・種別・効率・収益・価値・貢献・競争力・持続
- 効率性評価：生産性・品質・成果・価値・改善・成長・発展・革新・創造・未来
- 比較分析：過去・計画・目標・他部門・業界・標準・ベンチマーク・相対・絶対

## 成功指標
- 集計精度：誤差率1%以下・データ品質95%以上・信頼性・客観性・科学性
- 処理性能：大量データ処理時間50%短縮・効率・速度・生産性・満足・価値
- 利用率：集計機能利用率80%以上・普及・活用・価値・効果・成果・貢献・満足
- 意思決定支援：集計結果活用による改善実施率70%以上・価値・効果・成果・貢献