# ページ定義: レビュー実行画面

## 画面の目的
レビュアーが成果物の品質を効率的かつ体系的にレビューし、建設的で具体的なフィードバックを提供する

## 利用者
- **レビュアー**: 成果物の品質評価と改善提案を実施
- **PM**: レビュー進捗の確認と品質管理
- **品質管理者**: レビュー基準の適切な適用を監督

## 画面構成

### ヘッダー部
- レビュー対象成果物の基本情報
- レビュー依頼内容と重点観点
- レビュー進捗インジケーター（完了/総項目数）
- レビュー期限と経過時間

### 左サイドパネル（レビュー構造）
- **レビュー項目一覧**:
  - カテゴリー別レビュー項目（内容・構成・表現・形式）
  - 各項目の評価状況（未着手・進行中・完了）
  - 重要度マーキング（必須・推奨・任意）
- **成果物構造ナビ**:
  - セクション別ナビゲーション
  - 各セクションのレビュー状況
  - ブックマーク・問題箇所への直接ジャンプ

### メインレビュー部
- **成果物ビューアー**:
  - 全画面表示とページ送り
  - ズーム・回転・注釈機能
  - ハイライト・マーキング機能
- **レビューコメント入力**:
  - 箇所指定コメント（行・段落・ページ単位）
  - 分類タグ付け（修正必須・推奨・質問・称賛）
  - 定型コメントテンプレート
  - 音声コメント録音機能

### 右サイドパネル（レビュー支援）
- **レビュー基準・ガイド**:
  - 項目別チェック基準
  - 良い例・悪い例の参考
  - 業界標準・ベストプラクティス
- **レビュー履歴・参考情報**:
  - 過去の類似成果物レビュー
  - 同一作成者の傾向分析
  - AI による品質分析結果

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| 成果物メタ情報 | 情報パネル | ○ | タイトル・作成者・バージョン等 |
| レビュー進捗率 | プログレスバー | ○ | 完了済み項目の割合 |
| コメント数 | カウンター | ○ | 入力済みコメントの総数 |
| 問題指摘数 | 重要度別表示 | ○ | 修正必須・推奨・質問の件数 |
| レビュー時間 | タイマー表示 | ○ | 実際のレビュー所要時間 |
| 類似レビュー参考 | リンクリスト | × | 関連する過去レビュー事例 |

### データの更新頻度
- **レビュー進捗**: リアルタイム更新
- **コメント保存**: 自動保存（30秒間隔）
- **参考情報**: 成果物読み込み時に更新

## 入力項目

### コメント入力
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| コメント本文 | リッチテキスト | ○ | 最大1000文字 | 具体的な指摘・提案内容 |
| 問題分類 | 単一選択 | ○ | 5種類から選択 | 修正必須・推奨・質問・情報・称賛 |
| 重要度 | 3段階選択 | ○ | 高・中・低 | 修正の緊急度・重要性 |
| 対象箇所 | 範囲選択 | ○ | 自動取得 | コメント対象の具体的位置 |

### 評価入力
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| 項目別評価 | 5段階評価 | ○ | 1-5の範囲 | 各レビュー項目の点数 |
| 総合評価 | 5段階評価 | ○ | 1-5の範囲 | 成果物全体の品質評価 |
| 推奨判定 | 3択選択 | ○ | 承認・条件付承認・要修正 | レビュー結果の判定 |
| 総評コメント | テキストエリア | ○ | 最大2000文字 | 全体的な評価と提案 |

## アクション・操作

### 主要アクション
- **レビュー完了**: 全項目評価完了後の総合判定提出
- **一時保存**: 途中経過の保存
- **コメント追加**: 新規コメントの入力・保存
- **修正提案**: 具体的な修正案の提示

### 副次アクション
- **コメント整理**: 類似コメントの統合・分類
- **テンプレート保存**: よく使用するコメントのテンプレート化
- **他レビュアー確認**: 複数レビュー時の他者コメント参照
- **レビュー一時中断**: 作業中断時の状態保存

## 画面の振る舞い

### ユーザー操作への反応
- **成果物クリック時**: 該当箇所にコメント入力欄を表示
- **コメント入力時**: リアルタイム文字数カウントと保存状況表示
- **評価変更時**: 総合スコアの自動再計算
- **問題指摘時**: 関連する改善提案を自動表示

### 条件による表示変更
- **必須項目未完了の場合**: 完了ボタンを無効化し未完了項目を強調
- **重大問題発見時**: 警告表示と即座の報告を促すメッセージ
- **高品質成果物の場合**: 称賛コメントのテンプレート提案

## 画面遷移

### 遷移元画面
- レビュー依頼通知: レビュー開始時
- レビュー一覧画面: 進行中レビューの再開時
- レビュー中断画面: 作業再開時

### 遷移先画面
- レビュー完了画面: レビュー提出完了後
- レビュー一時保存画面: 作業中断時
- コメント詳細編集画面: コメント詳細編集時

## エラーハンドリング
- **自動保存エラー**: ネットワーク問題時のローカル保存とアラート
- **成果物読み込みエラー**: ファイル破損・アクセス権限問題の対応案内
- **コメント投稿エラー**: 入力内容の一時保持と再送機能

## アクセシビリティ要件
- キーボードショートカット対応（Ctrl+S保存、Ctrl+Enter投稿等）
- 音声入力対応（コメント音声録音・音声認識）
- 高コントラストモード対応（重要度・問題分類の明確化）

## レスポンシブ対応
- **デスクトップ**: 3ペイン表示（ナビ・成果物・コメント）
- **タブレット**: 成果物中心の表示でナビとコメントは切り替え
- **モバイル**: 全画面成果物表示とドロワー式コメント入力