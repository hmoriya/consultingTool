# ページ定義: プロジェクト計画作成画面

## 画面の目的
新規プロジェクトのスコープ、スケジュール、予算、体制を効率的に定義し、包括的な計画書を作成することで、プロジェクトの成功確率を高め、関係者の合意形成を促進する。

## 利用者
- **主要利用者**: PM（プロジェクトマネージャー）
  - 役割: プロジェクト計画の策定責任者として、詳細な計画書を作成
  - 利用目的: 効率的で正確な計画策定、承認可能な品質の計画書作成
- **副次利用者**: エグゼクティブ、シニアコンサルタント
  - 役割: 計画のレビューと助言提供
  - 利用目的: 計画内容の確認と品質向上のための助言

## 画面構成

### ヘッダー部
- プロジェクト計画作成タイトル
- 保存状況インジケーター（下書き保存中/保存済み）
- 進捗インジケーター（ステップ1/5のような表示）

### メインコンテンツ部
- **プロジェクト基本情報セクション**: プロジェクト名称、目的、期間、予算概算の入力
- **スコープ定義セクション**: プロジェクトスコープと主要成果物の定義
- **WBS（作業分解構造）セクション**: タスク階層とマイルストーンの設定
- **スケジュール策定セクション**: 詳細スケジュールとクリティカルパスの確認
- **チーム編成セクション**: 必要スキル・人員の定義とメンバー候補選定
- **予算詳細セクション**: コスト配分と予算明細の設定
- **リスク評価セクション**: 初期リスク項目と対策の定義

### サイドバー部
- 計画作成ガイダンス
- テンプレート選択オプション
- 類似プロジェクト参照
- 保存履歴
- ヘルプリンク

### フッター部
- 下書き保存ボタン
- プレビューボタン
- 承認申請ボタン
- キャンセルボタン

## データ表示

### 表示データ一覧
| データ項目 | 表示形式 | 必須 | 説明 |
|-----------|---------|------|------|
| プロジェクト名称 | テキスト入力 | ○ | 一意で識別可能な名称 |
| プロジェクト目的 | テキストエリア | ○ | ビジネス価値と達成目標 |
| 開始予定日 | 日付選択 | ○ | プロジェクト開始日 |
| 終了予定日 | 日付選択 | ○ | プロジェクト完了予定日 |
| 予算概算 | 数値入力 | ○ | 総予算額（通貨単位付き） |
| WBSテンプレート | 選択リスト | × | 過去プロジェクトのテンプレート |
| タスク一覧 | 階層テーブル | × | 作業分解構造 |
| マイルストーン | タイムライン | × | 主要チェックポイント |
| チーム構成 | 人員配置図 | × | ロール別の人員計画 |
| リスク項目 | リスト表示 | × | 識別済みリスクと対策 |

### データの更新頻度
- **プロジェクト基本情報**: リアルタイム保存（入力時）
- **WBS・タスク**: 手動保存（保存ボタン押下時）
- **スケジュール**: 自動計算（依存関係変更時）
- **リスク評価**: システム推奨（定期更新）

## 入力項目

### フォーム一覧
| 入力項目 | 入力形式 | 必須 | バリデーション | 説明 |
|---------|---------|------|---------------|------|
| プロジェクト名称 | テキスト（100文字以内） | ○ | 一意性チェック | 組織内で一意の名称 |
| プロジェクト目的 | テキストエリア（500文字以内） | ○ | 最小10文字 | 明確な目的記述 |
| 開始予定日 | 日付入力 | ○ | 未来日付のみ | 実行可能な開始日 |
| 終了予定日 | 日付入力 | ○ | 開始日以降 | 合理的な期間設定 |
| 予算概算 | 数値入力 | ○ | 正数・上限チェック | 承認済み予算枠内 |
| スコープ記述 | テキストエリア（1000文字以内） | ○ | 最小50文字 | 具体的なスコープ定義 |
| 主要成果物 | リスト入力 | ○ | 最低1件 | 測定可能な成果物 |
| WBSレベル | 選択（3-7レベル） | ○ | 3レベル以上 | 適切な階層深度 |
| タスク名称 | テキスト（50文字以内） | × | 重複チェック | 識別可能なタスク名 |
| タスク工数 | 数値入力（時間） | × | 正数のみ | 現実的な工数見積もり |

## アクション・操作

### 主要アクション
- **下書き保存**: 入力内容を一時保存し、後で編集継続を可能にする
- **テンプレート適用**: 類似プロジェクトのテンプレートを選択して基本構造を自動生成
- **スケジュール自動計算**: タスクの依存関係に基づいてクリティカルパスを算出
- **リスク自動評価**: システムがプロジェクト特性に基づいて初期リスクを提案
- **承認申請**: 完成した計画書を承認ワークフローに提出

### 副次アクション
- **プレビュー表示**: 計画書の仕上がりを確認
- **PDF出力**: 計画書をPDF形式で出力
- **メンバー招待**: 計画段階でのメンバー仮アサイン
- **類似プロジェクト検索**: 参考になる過去プロジェクトの検索
- **進捗保存**: 作業進捗の保存と再開

## 画面の振る舞い

### ユーザー操作への反応
- **基本情報入力完了**時: WBSテンプレート候補を自動表示、次ステップボタンを活性化
- **WBS変更**時: スケジュールを自動再計算、工数合計を更新表示
- **予算入力**時: 予算配分グラフをリアルタイム更新、超過時は警告表示
- **チーム編成変更**時: スキルギャップ分析を実行、不足スキルをハイライト
- **保存操作**時: 保存状況をインジケーターで表示、完了時に確認メッセージ

### 条件による表示変更
- **大規模プロジェクト**（1000万円以上）の場合: 段階的承認オプションを表示
- **外部パートナー関与**の場合: 法務レビュー必須項目を追加表示
- **個人情報取扱**の場合: セキュリティレビュー項目を表示
- **テンプレート選択**時: 選択したテンプレートに応じてフォーム項目を動的変更
- **リスク高評価**時: 追加の対策入力欄を表示

## 画面遷移

### 遷移元画面
- プロジェクト一覧画面: 「新規プロジェクト作成」ボタンからの遷移
- ダッシュボード: 「プロジェクト計画作成」ウィジェットからの遷移
- プロジェクト提案承認画面: 提案承認後の自動遷移

### 遷移先画面
- プロジェクト一覧画面: キャンセル時または保存完了時の遷移
- 承認ワークフロー画面: 承認申請時の遷移
- プロジェクト詳細画面: 計画承認後の遷移
- プレビュー画面: プレビューボタン押下時の遷移

## エラーハンドリング
- **バリデーションエラー**: 入力欄に隣接して具体的なエラーメッセージを表示、修正方法を提示
- **予算超過エラー**: 予算セクションに警告アイコンと超過額を表示、スコープ調整を提案
- **スキル不足エラー**: チーム編成セクションに不足スキルを赤字で表示、外部パートナー検討を提案
- **保存失敗**: 画面上部に一時的な通知を表示、再試行ボタンを提供
- **セッションタイムアウト**: 自動保存機能で作業内容を保護、ログイン画面への安全な遷移

## アクセシビリティ要件
- **キーボードナビゲーション**: タブキーでの項目間移動、エンターキーでの保存操作
- **スクリーンリーダー対応**: 全入力項目にラベル付き、セクション見出しの階層化
- **色覚障害への配慮**: エラー表示は色だけでなくアイコンと文字で表現
- **フォントサイズ調整**: ブラウザ設定に応じた文字サイズの拡大縮小対応

## レスポンシブ対応
- **デスクトップ**: 横並び2カラムレイアウトで効率的な入力環境
- **タブレット**: 縦スクロール1カラムレイアウト、タッチ操作に最適化されたボタンサイズ
- **モバイル**: ステップ分割表示で画面毎に集中、スワイプでのステップ移動対応

## 特別要件

### パフォーマンス要件
- **初期表示**: 3秒以内でフォーム表示完了
- **自動保存**: 5秒間の無操作後に自動実行
- **計算処理**: スケジュール再計算は2秒以内で完了

### セキュリティ要件
- **アクセス制御**: PM権限またはプロジェクト作成権限を持つユーザーのみアクセス可能
- **データ保護**: 入力データの暗号化保存、セッション管理の厳格化
- **監査ログ**: 全操作を記録、計画変更履歴の完全追跡

### 操作性要件
- **直感的操作**: 初回利用者でも迷わない画面構成とガイダンス
- **効率性**: 経験者は最短ルートで計画作成が可能
- **信頼性**: 操作ミスを防ぐ確認ダイアログと取り消し機能