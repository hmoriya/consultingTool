# ユースケース: 最適なプロジェクトチームを編成する

**ユースケースID**: UC-LAUNCH-03
**バージョン**: 2.0.0
**更新日**: 2025-10-10
**設計方針**: パラソルv2.0仕様 + AI スキルマッチング + チーム最適化

## 📋 基本情報
- **主アクター**: PM（プロジェクトマネージャー）
- **副アクター**: システム（AI スキルマッチング）、リソースマネージャー（リソース調整）
- **概要**: 確定したプロジェクト計画に基づき、スキル・経験・稼働状況を総合的に分析して最適なプロジェクトチームを編成する

## 🎯 事前条件
- UC2（包括的プロジェクト計画策定）が完了し、Project.status="Planning"
- 必要スキル・リソース要件が明確化されている
- 組織内メンバーのスキル・稼働情報が最新化されている
- プロジェクト期間・予算が確定している

## ✅ 事後条件

### 成功時
- ProjectMember エンティティが複数作成（PM + チームメンバー）
- スキルマッチング適合率90%以上を達成
- チーム構成が予算・期間制約内で最適化される
- UC4（プロジェクト承認獲得）の実行準備完了

### 失敗時
- ProjectMember は作成されず、Project は Planning 状態維持
- リソース不足・スキルギャップが特定される
- 代替チーム編成案・外部調達案の検討が必要

## 🔄 基本フロー

1. **PMがチーム編成を開始する**
   - プロジェクト計画・スキル要件の確認
   - チーム編成フォームへのアクセス・要件自動入力

2. **システムがスキルマッチング分析を実行する**
   - 内部処理: talent-optimization-service.UC-SKILL-01 利用
   - 組織内メンバーのスキル・経験・稼働状況分析
   - プロジェクト要件との適合度算出

3. **PMが推奨メンバーを確認・選定する**
   - AI推奨チーム構成の確認・評価
   - メンバー個別スキル・経験・過去実績の詳細確認
   - 代替候補・バックアップメンバーの検討

4. **システムがチーム最適化を実行する**
   - 内部処理: ProjectPlanningCoordinator.coordinateResourceAllocation()
   - チームバランス・コミュニケーション効率の分析
   - 稼働率・負荷分散の最適化

5. **PMが役割・責任を定義する**
   - メンバー別役割（PM/Leader/Member/Observer）設定
   - 責任範囲・成果物責任の明確化
   - アサイン率・期間・報告ラインの詳細設定

6. **システムがチーム実現可能性を検証する**
   - 内部処理: ProjectPlanningCoordinator.validateResourceFeasibility()
   - メンバー可用性・他プロジェクト制約の確認
   - チーム編成リスク・代替案の評価

7. **PMがチーム編成を確定する**
   - 最終チーム構成の確認・調整
   - ProjectMember エンティティの作成・Project更新
   - チームキックオフ準備・コミュニケーション開始

## 🔀 代替フロー

### 代替フロー1: スキルギャップによる外部調達
- **分岐点**: 基本フロー ステップ3
- **条件**: 必要スキルが組織内で不足している
- **代替処理**:
  1. システムが外部パートナー・フリーランス候補を提示
  2. PMが外部調達コスト・期間・品質を評価
  3. 混成チーム構成で基本フロー ステップ4に進む

### 代替フロー2: 稼働制約による段階編成
- **分岐点**: 基本フロー ステップ4
- **条件**: キーメンバーの稼働が部分的に制限
- **代替処理**:
  1. PMがフェーズ別・期間別メンバー配置を検討
  2. 段階的チーム編成・ジョブローテーションの計画
  3. 調整されたチーム構成で基本フロー ステップ5に進む

## ⚠️ 例外フロー

### 例外1: 重要メンバー確保不可
- **発生点**: 基本フロー ステップ6
- **条件**: プロジェクト成功に必須のキーメンバーが確保困難
- **処理**:
  1. システムが代替スキル・育成計画・外部調達を提示
  2. プロジェクト期間延長・スコープ調整の検討
  3. UC2（計画見直し）またはプロジェクト中止の判断

### 例外2: チーム編成コスト超過
- **発生点**: 基本フロー ステップ5
- **条件**: チーム人件費が予算を大幅超過
- **処理**:
  1. システムがコスト削減案・スキル代替案を提示
  2. ジュニアメンバー育成・段階的スキルアップの検討
  3. 予算再申請またはチーム構成見直し

## 🏗️ パラソルドメイン連携

### 操作エンティティ
- **ProjectMember**: 複数作成（projectId, userId, role, allocationRate, startDate, endDate）
- **TeamComposition**: チーム構成詳細（skillBalance, communicationMatrix, riskFactors）
- **Project**: チーム情報更新（teamSize, skillCoverage, teamFormationStatus）

### 集約操作
- **ProjectAggregate**: チームメンバー統合・制約検証
- **不変条件確認**: アサイン率合計≤100%、必須ロール存在、予算制約

### ドメインサービス利用
- **ProjectPlanningCoordinator**:
  - `coordinateResourceAllocation()`: リソース配分調整
  - `validateResourceFeasibility()`: リソース実現可能性検証
- **ProjectSuccessCoordinator**:
  - `optimizeTeamComposition()`: チーム構成最適化
  - `ensureStakeholderAlignment()`: ステークホルダー整合性確保

## 🔗 他サービス連携（ユースケース利用型）

### 必須連携
- **[talent-optimization-service]**:
  - `UC-SKILL-01: スキルマッチングを実行する` → 適合度分析
  - `UC-RESOURCE-01: 最適なチームを編成する` → チーム最適化
  - `UC-ALLOCATION-01: リソース配分を最適化する` → 稼働調整
- **[secure-access-service]**:
  - `UC-AUTH-02: プロジェクト権限を検証する` → メンバー権限確認

### オプション連携
- **[collaboration-facilitation-service]**:
  - `UC-COLLABORATE-01: チームコラボレーションを促進する` → チーム構築支援
- **[knowledge-co-creation-service]**:
  - `UC-PRACTICE-01: ベストプラクティスを適用する` → 成功チーム事例

## 📊 成功指標・KPI
- **スキルマッチング適合率**: 90%以上（目標: 95%以上）
- **チーム編成時間**: 平均3時間以内（AI支援により60%短縮）
- **チーム安定性**: メンバー変更率5%以下（編成品質の指標）
- **プロジェクト成功率**: チーム編成品質と成功率の相関分析

## 📝 特別要件

### パフォーマンス要件
- スキルマッチング: 1分以内
- チーム最適化: 30秒以内
- メンバー検索: 5秒以内

### セキュリティ要件
- メンバー個人情報の適切な保護
- スキル情報アクセスの制限・ログ記録
- チーム構成情報の機密性確保

### 品質要件
- スキルマッチング精度の継続的向上
- チーム構成推奨の根拠明示
- メンバー評価の客観性・公平性

## 🔄 関連ユースケース
- **前提**: UC2（包括的プロジェクト計画策定）の正常完了
- **後続**: UC4（プロジェクト承認獲得）への遷移
- **代替**: UC3-Alt（代替チーム編成・外部調達検討）
- **例外**: UC2（計画見直し）またはプロジェクト中止判断

---
*このユースケースは、AI スキルマッチングとチーム最適化を実現するパラソルv2.0設計指針に基づいています*