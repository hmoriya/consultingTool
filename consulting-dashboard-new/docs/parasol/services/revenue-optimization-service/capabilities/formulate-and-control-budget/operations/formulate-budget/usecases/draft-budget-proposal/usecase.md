# ユースケース: 予算提案を策定する

## 基本情報
- **ユースケースID**: UC-REVENUE-01
- **アクター**: 財務責任者、部門責任者、予算担当者、経営企画、アナリスト
- **概要**: 組織戦略と事業計画に基づき包括的な予算提案を策定し、財務目標達成と資源最適配分を実現するための詳細な予算案を作成する

## 事前条件
- 事業計画・戦略が確定している
- 前年度実績データが整備されている
- 予算策定権限が確認されている
- 予算策定ガイドライン・方針が定義されている
- 市場予測・経済環境分析が完了している

## 事後条件
### 成功時
- 予算提案が策定されている（BudgetProposal.status = "draft"）
- 収益・コスト・投資計画が詳細化されている
- 財務指標・KPIが設定されている
- 部門別・プロジェクト別予算配分が確定している
- 審査用資料が準備されている

### 失敗時
- 策定失敗の詳細理由がログに記録されている
- データ不整合や制約違反が明確化されている
- 不足情報や修正要求項目が特定されている
- 再策定のためのガイダンスが提供されている

## 基本フロー
1. **アクターが予算策定プロセスを開始する**
   - 策定方針・目標の確認・予算期間・スコープの設定
   - 策定スケジュールの確認・関係者との調整

2. **システムが策定環境と分析機能を提供する**
   - → UC-AUTH-02: 予算策定権限を検証する
   - 予算策定ツールの準備・過去実績・ベンチマークデータの取得
   - 予測モデル・分析テンプレートの初期化

3. **システムが包括的な予算分析と計画を実行する**
   - 収益予測・市場分析・競合分析
   - コスト分析・効率化計画・投資優先度評価

4. **システムが詳細予算案の作成と検証を実行する**
   - 部門別・プロジェクト別予算配分・月次・四半期予算計画
   - 財務指標計算・シナリオ分析・リスク評価

5. **システムが予算提案の完成と提出準備を完了する**
   - 予算案の最終確認・審査用資料の作成
   - → UC-NOTIFY-01: 予算策定完了通知を配信する
   - → UC-AUTH-03: 予算策定ログを記録する

## 代替フロー
### 代替フロー1: 段階的策定
- 3a. 大規模組織で段階的策定が必要な場合
  - 3a1. 部門別先行策定・優先事業の詳細策定
  - 3a2. 段階的統合・全体最適化・調整
  - 3a3. 基本フロー4（詳細作成・検証）に進む

### 代替フロー2: シナリオベース策定
- 3b. 複数シナリオでの予算策定が必要な場合
  - 3b1. 楽観・標準・悲観シナリオの設定・各シナリオ別予算案作成
  - 3b2. シナリオ間比較・リスク分析・推奨案の選定
  - 3b3. 基本フロー4に戻る

## 例外フロー
### 例外1: データ不整合検出
- *a. 予算策定で基礎データの不整合が検出された場合
  - *a1. → UC-AUTH-03: データ不整合ログを記録する
  - *a2. 不整合詳細の分析・データ修正・再集計
  - *a3. データ修正完了後、基本フロー3に復帰

### 例外2: 制約条件違反
- *b. 組織制約や財務制約に違反した場合
  - *b1. 制約違反の記録・制約条件の再確認
  - *b2. 予算案の調整・制約内での最適化
  - *b3. 制約充足後、基本フロー4に復帰

### 例外3: 承認前差し戻し
- *c. 事前レビューで重大な問題が検出された場合
  - *c1. 問題詳細の記録・修正方針の検討
  - *c2. 予算案の大幅修正・再検証・品質確認
  - *c3. 修正完了後、基本フロー4に復帰

## 特別要件
- **性能**: 基本策定60分以内、詳細分析120分以内、検証処理30分以内
- **可用性**: 策定システム稼働率99.5%以上、策定期間中24時間対応
- **セキュリティ**: 予算データ暗号化、アクセス制御、機密情報保護、版管理
- **精度**: 予測精度90%以上、計算精度100%、制約充足100%
- **拡張性**: 複数年度対応、複数通貨対応、複雑な組織構造対応

## 関連ユースケース
- **包含**: UC-AUTH-02（権限検証）、UC-AUTH-03（ログ記録）、UC-NOTIFY-01（通知配信）
- **前提**: 事業計画・財務方針確定完了必須
- **後続**: UC-REVENUE-02（予算審査・承認）、予算執行、予算統制

---
*このユースケースは パラソル設計v2.0仕様 に基づいて作成されました*
