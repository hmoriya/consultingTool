# ユースケース: アカウント申請を承認する

## 基本情報
- **ユースケースID**: UC-AUTH-04
- **アクター**: システム管理者、セキュリティ管理者、人事管理者
- **概要**: 新規アカウント申請の審査・承認を行い、組織セキュリティポリシーに基づいたアクセス権限を付与する

## 事前条件
- アカウント申請が提出されている（AccountApplication.status = "pending"）
- 申請審査権限が確認されている
- 組織セキュリティポリシーが定義されている
- 申請者の身元確認が完了している
- 必要書類が提出されている

## 事後条件
### 成功時
- アカウント申請が承認されている（AccountApplication.status = "approved"）
- ユーザーアカウントが作成されている（User.status = "active"）
- 適切なロールと権限が付与されている
- 申請者に承認通知が配信されている
- セキュリティ監査ログが記録されている

### 失敗時
- 申請却下の詳細理由がログに記録されている
- 不足情報や修正項目が明確化されている
- 申請者に却下理由が通知されている
- 再申請の手順が案内されている

## 基本フロー
1. **システム管理者がアカウント申請の審査を開始する**
   - 申請一覧の確認・優先度判定
   - 申請内容の詳細確認・必要書類の検証

2. **システムが審査環境と検証機能を提供する**
   - → UC-AUTH-02: アカウント承認権限を検証する
   - 申請審査フォームの表示・身元確認データの照会
   - セキュリティリスク評価の実行

3. **管理者が包括的な申請審査を実行する**
   - 身元確認・セキュリティ要件の検証
   - 職務要件と必要権限の評価・組織ポリシー適合性の確認

4. **システムが承認判定処理を実行する**
   - 承認・却下判定の記録・アカウント作成処理
   - ロール・権限の自動付与・セキュリティ設定の適用

5. **システムが承認結果の配信と記録を完了する**
   - 申請者・関係者への結果通知・アカウント情報の配信
   - → UC-NOTIFY-01: アカウント承認通知を配信する
   - → UC-AUTH-03: 承認処理ログを記録する

## 代替フロー
### 代替フロー1: 条件付き承認
- 3a. 軽微な修正で承認可能な場合
  - 3a1. 条件付き承認の実行・修正要求事項の明確化
  - 3a2. 修正期限の設定・フォローアップ計画の作成
  - 3a3. 基本フロー4（承認判定処理）に進む

### 代替フロー2: 段階的権限付与
- 4a. 高権限申請で段階的付与が適切な場合
  - 4a1. 初期権限の設定・段階的昇格計画の作成
  - 4a2. 評価期間の設定・定期レビューの計画
  - 4a3. 基本フロー5（結果配信）に戻る

## 例外フロー
### 例外1: セキュリティリスク検出
- *a. 申請にセキュリティリスクが検出された場合
  - *a1. → UC-AUTH-03: セキュリティリスクログを記録する
  - *a2. リスク詳細の分析・セキュリティ部門への相談
  - *a3. リスク対策完了後、基本フロー3に復帰

### 例外2: 身元確認不備
- *b. 身元確認に不備がある場合
  - *b1. 不備詳細の記録・追加確認書類の要求
  - *b2. 申請者への再提出依頼・期限設定
  - *b3. 書類再提出後、基本フロー3に復帰

### 例外3: 承認権限不足
- *c. 特定レベルの承認権限が不足している場合
  - *c1. 権限不足の記録・上位承認者への引き継ぎ
  - *c2. エスカレーション・特別承認手続きの実行
  - *c3. 権限確保後、基本フロー4に復帰

## 特別要件
- **性能**: 承認処理3秒以内、通知配信5秒以内、アカウント作成10秒以内
- **可用性**: 承認システム稼働率99.9%以上、24時間365日利用可能
- **セキュリティ**: 承認データ暗号化、多要素認証、アクセス制御、完全な監査証跡
- **精度**: 身元確認精度100%、セキュリティリスク検出精度98%以上
- **コンプライアンス**: 法規制準拠、業界標準遵守、内部統制要件満足

## 関連ユースケース
- **包含**: UC-AUTH-02（権限検証）、UC-AUTH-03（ログ記録）、UC-NOTIFY-01（通知配信）
- **前提**: アカウント申請提出・書類準備完了必須
- **後続**: 初回ログイン支援、権限設定、定期レビュー

---
*このユースケースは パラソル設計v2.0仕様 に基づいて作成されました*
