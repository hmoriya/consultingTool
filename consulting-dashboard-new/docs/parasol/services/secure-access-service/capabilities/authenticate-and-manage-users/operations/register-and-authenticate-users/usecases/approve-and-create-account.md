[38;2;141;161;185m───────┬────────────────────────────────────────────────────────────────────────[0m
       [38;2;141;161;185m│ [0m[1mSTDIN[0m
[38;2;141;161;185m───────┼────────────────────────────────────────────────────────────────────────[0m
[38;2;141;161;185m   1[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m# ユースケース: アカウントを承認・作成する[0m
[38;2;141;161;185m   2[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m   3[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 基本情報[0m
[38;2;141;161;185m   4[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **ユースケースID**: UC-SEC-002[0m
[38;2;141;161;185m   5[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **アクター**: 管理者, システム, 申請者[0m
[38;2;141;161;185m   6[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **概要**: 管理者がユーザーアカウント申請を審査・承認し、システムが正式なアカウントを作成して申請者に通知する[0m
[38;2;141;161;185m   7[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m   8[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 事前条件[0m
[38;2;141;161;185m   9[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーアカウント申請が受理されている[0m
[38;2;141;161;185m  10[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 管理者が適切な権限を保持している[0m
[38;2;141;161;185m  11[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- アカウント作成機能が有効になっている[0m
[38;2;141;161;185m  12[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 組織のアカウント承認ポリシーが設定されている[0m
[38;2;141;161;185m  13[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  14[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 事後条件[0m
[38;2;141;161;185m  15[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 成功時[0m
[38;2;141;161;185m  16[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 新しいユーザーアカウントが作成される[0m
[38;2;141;161;185m  17[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 初期パスワードが生成される[0m
[38;2;141;161;185m  18[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 申請者にアカウント情報通知が送信される[0m
[38;2;141;161;185m  19[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーアカウントが「アクティブ」状態になる[0m
[38;2;141;161;185m  20[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 承認ログが記録される[0m
[38;2;141;161;185m  21[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  22[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 失敗時[0m
[38;2;141;161;185m  23[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- アカウントが作成されない[0m
[38;2;141;161;185m  24[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 申請が却下状態になる[0m
[38;2;141;161;185m  25[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 申請者に却下理由通知が送信される[0m
[38;2;141;161;185m  26[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 却下ログが記録される[0m
[38;2;141;161;185m  27[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  28[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 基本フロー[0m
[38;2;141;161;185m  29[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m1. 管理者がアカウント申請管理画面にアクセスする[0m
[38;2;141;161;185m  30[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m2. システムが承認待ちの申請一覧を表示する[0m
[38;2;141;161;185m  31[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m3. 管理者が特定の申請を選択して詳細を確認する[0m
[38;2;141;161;185m  32[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m4. システムが申請者情報と申請理由を詳細表示する[0m
[38;2;141;161;185m  33[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m5. 管理者が申請内容の妥当性を審査する[0m
[38;2;141;161;185m  34[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m6. 管理者が承認決定を行う[0m
[38;2;141;161;185m  35[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m7. システムが新しいユーザーアカウントを作成する[0m
[38;2;141;161;185m  36[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m8. システムが安全な初期パスワードを生成する[0m
[38;2;141;161;185m  37[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m9. システムが適切なロールと権限を設定する[0m
[38;2;141;161;185m  38[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m10. システムが申請者にアカウント情報通知メールを送信する[0m
[38;2;141;161;185m  39[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m11. システムが管理者に承認完了確認を表示する[0m
[38;2;141;161;185m  40[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  41[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 代替フロー[0m
[38;2;141;161;185m  42[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー1: 申請内容の不備による修正要求[0m
[38;2;141;161;185m  43[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 5a. 管理者が申請内容に不備を発見した場合[0m
[38;2;141;161;185m  44[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a1. 管理者が修正要求を選択する[0m
[38;2;141;161;185m  45[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a2. 管理者が具体的な修正内容を入力する[0m
[38;2;141;161;185m  46[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a3. システムが申請者に修正要求通知を送信する[0m
[38;2;141;161;185m  47[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a4. 申請状態を「修正待ち」に変更する[0m
[38;2;141;161;185m  48[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  49[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー2: 申請の却下[0m
[38;2;141;161;185m  50[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 6a. 管理者が申請を却下する場合[0m
[38;2;141;161;185m  51[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a1. 管理者が却下理由を入力する[0m
[38;2;141;161;185m  52[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a2. システムが申請状態を「却下」に変更する[0m
[38;2;141;161;185m  53[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a3. システムが申請者に却下通知を送信する[0m
[38;2;141;161;185m  54[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a4. 再申請可能な場合の手順を案内する[0m
[38;2;141;161;185m  55[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  56[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー3: 一括承認処理[0m
[38;2;141;161;185m  57[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 3a. 管理者が複数の申請を一括承認する場合[0m
[38;2;141;161;185m  58[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 3a1. 管理者が承認対象の申請を複数選択する[0m
[38;2;141;161;185m  59[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 3a2. システムが一括承認の確認画面を表示する[0m
[38;2;141;161;185m  60[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 3a3. 管理者が一括承認を実行する[0m
[38;2;141;161;185m  61[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 3a4. 各申請に対して基本フロー7-11を実行する[0m
[38;2;141;161;185m  62[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  63[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー4: 条件付き承認[0m
[38;2;141;161;185m  64[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 6a. 管理者が条件付きで承認する場合[0m
[38;2;141;161;185m  65[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a1. 管理者が承認条件を入力する[0m
[38;2;141;161;185m  66[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a2. システムが条件付きアカウントを作成する[0m
[38;2;141;161;185m  67[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a3. システムが申請者に条件と制限事項を通知する[0m
[38;2;141;161;185m  68[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a4. 条件満了時の自動レビュー機能を設定する[0m
[38;2;141;161;185m  69[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  70[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 例外フロー[0m
[38;2;141;161;185m  71[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外1: システムエラーによる作成失敗[0m
[38;2;141;161;185m  72[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 7a. アカウント作成中にシステムエラーが発生した場合[0m
[38;2;141;161;185m  73[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a1. システムがトランザクションをロールバックする[0m
[38;2;141;161;185m  74[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a2. 申請状態を「承認待ち」に戻す[0m
[38;2;141;161;185m  75[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a3. 管理者にエラー通知を送信する[0m
[38;2;141;161;185m  76[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a4. エラーログを記録し、技術者に連絡する[0m
[38;2;141;161;185m  77[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  78[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外2: メールアドレス重複エラー[0m
[38;2;141;161;185m  79[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 8a. アカウント作成時にメールアドレス重複を検出した場合[0m
[38;2;141;161;185m  80[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a1. システムが重複エラーメッセージを表示する[0m
[38;2;141;161;185m  81[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a2. 既存アカウントとの統合オプションを提示する[0m
[38;2;141;161;185m  82[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a3. 管理者が統合または別メールアドレス使用を決定する[0m
[38;2;141;161;185m  83[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a4. 決定に応じて適切な処理を実行する[0m
[38;2;141;161;185m  84[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  85[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外3: 通知メール送信失敗[0m
[38;2;141;161;185m  86[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 10a. アカウント情報通知メールの送信に失敗した場合[0m
[38;2;141;161;185m  87[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 10a1. システムがメール送信エラーをログに記録する[0m
[38;2;141;161;185m  88[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 10a2. 管理者にメール送信失敗を通知する[0m
[38;2;141;161;185m  89[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 10a3. 代替連絡手段での通知を実行する[0m
[38;2;141;161;185m  90[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 10a4. アカウントは作成済みである旨を管理画面に表示する[0m
[38;2;141;161;185m  91[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  92[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 特別要件[0m
[38;2;141;161;185m  93[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **セキュリティ**: パスワードは暗号化して保存し、平文では記録しない[0m
[38;2;141;161;185m  94[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **監査性**: 全ての承認・却下決定を詳細ログと共に記録[0m
[38;2;141;161;185m  95[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **可用性**: 承認処理は業務時間内に24時間以内完了[0m
[38;2;141;161;185m  96[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **整合性**: アカウント作成はトランザクション処理で整合性を保証[0m
[38;2;141;161;185m  97[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  98[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 関連ユースケース[0m
[38;2;141;161;185m  99[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **包含**: 「ユーザーアカウントを申請する」の後続処理[0m
[38;2;141;161;185m 100[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **拡張**: 「ロールと権限を設定する」（詳細権限設定時）[0m
[38;2;141;161;185m 101[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **汎化**: なし[0m
[38;2;141;161;185m───────┴────────────────────────────────────────────────────────────────────────[0m
