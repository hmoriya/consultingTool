[38;2;141;161;185m───────┬────────────────────────────────────────────────────────────────────────[0m
       [38;2;141;161;185m│ [0m[1mSTDIN[0m
[38;2;141;161;185m───────┼────────────────────────────────────────────────────────────────────────[0m
[38;2;141;161;185m   1[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m# ユースケース: ログインする[0m
[38;2;141;161;185m   2[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m   3[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 基本情報[0m
[38;2;141;161;185m   4[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **ユースケースID**: UC-SEC-003[0m
[38;2;141;161;185m   5[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **アクター**: ユーザー, システム[0m
[38;2;141;161;185m   6[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **概要**: ユーザーがメールアドレスとパスワードを使用してシステムに安全にログインし、認証されたセッションを開始する[0m
[38;2;141;161;185m   7[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m   8[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 事前条件[0m
[38;2;141;161;185m   9[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーアカウントが作成されている[0m
[38;2;141;161;185m  10[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーアカウントがアクティブ状態である[0m
[38;2;141;161;185m  11[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーが有効なメールアドレスとパスワードを保持している[0m
[38;2;141;161;185m  12[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- システムのログイン機能が利用可能である[0m
[38;2;141;161;185m  13[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  14[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 事後条件[0m
[38;2;141;161;185m  15[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 成功時[0m
[38;2;141;161;185m  16[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーが認証される[0m
[38;2;141;161;185m  17[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 安全なセッションが開始される[0m
[38;2;141;161;185m  18[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 認証トークン（JWT）が発行される[0m
[38;2;141;161;185m  19[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ユーザーがシステムにアクセス可能になる[0m
[38;2;141;161;185m  20[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ログイン成功ログが記録される[0m
[38;2;141;161;185m  21[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  22[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 失敗時[0m
[38;2;141;161;185m  23[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 認証が拒否される[0m
[38;2;141;161;185m  24[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- セッションが開始されない[0m
[38;2;141;161;185m  25[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- エラーメッセージが表示される[0m
[38;2;141;161;185m  26[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- ログイン失敗ログが記録される[0m
[38;2;141;161;185m  27[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 必要に応じてアカウントがロックされる[0m
[38;2;141;161;185m  28[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  29[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 基本フロー[0m
[38;2;141;161;185m  30[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m1. ユーザーがログインページにアクセスする[0m
[38;2;141;161;185m  31[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m2. システムがログインフォームを表示する[0m
[38;2;141;161;185m  32[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m3. ユーザーがメールアドレスを入力する[0m
[38;2;141;161;185m  33[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m4. ユーザーがパスワードを入力する[0m
[38;2;141;161;185m  34[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m5. ユーザーが「ログイン」ボタンをクリックする[0m
[38;2;141;161;185m  35[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m6. システムがメールアドレスの存在を確認する[0m
[38;2;141;161;185m  36[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m7. システムがパスワードの正当性を検証する[0m
[38;2;141;161;185m  37[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m8. システムがアカウント状態（アクティブ、ロック等）を確認する[0m
[38;2;141;161;185m  38[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m9. システムが認証トークン（JWT）を生成する[0m
[38;2;141;161;185m  39[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m10. システムがセッションを開始する[0m
[38;2;141;161;185m  40[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m11. システムがユーザーをダッシュボードページにリダイレクトする[0m
[38;2;141;161;185m  41[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  42[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 代替フロー[0m
[38;2;141;161;185m  43[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー1: 初回ログイン時のパスワード変更[0m
[38;2;141;161;185m  44[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 8a. システムが初回ログインを検出した場合[0m
[38;2;141;161;185m  45[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a1. システムがパスワード変更画面を表示する[0m
[38;2;141;161;185m  46[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a2. ユーザーが新しいパスワードを設定する[0m
[38;2;141;161;185m  47[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a3. システムがパスワードポリシー適合性を検証する[0m
[38;2;141;161;185m  48[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a4. システムがパスワードを更新する[0m
[38;2;141;161;185m  49[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a5. 基本フロー9に進む[0m
[38;2;141;161;185m  50[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  51[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー2: 「ログイン状態を保持」オプション[0m
[38;2;141;161;185m  52[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 5a. ユーザーが「ログイン状態を保持」を選択した場合[0m
[38;2;141;161;185m  53[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a1. システムが長期有効なトークンを生成する[0m
[38;2;141;161;185m  54[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a2. システムがセキュアなCookieを設定する[0m
[38;2;141;161;185m  55[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 5a3. 次回アクセス時に自動ログインを実行する[0m
[38;2;141;161;185m  56[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  57[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー3: 多要素認証（MFA）有効時[0m
[38;2;141;161;185m  58[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 8a. ユーザーアカウントでMFAが有効な場合[0m
[38;2;141;161;185m  59[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a1. システムがMFA認証画面を表示する[0m
[38;2;141;161;185m  60[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a2. ユーザーが認証コードを入力する[0m
[38;2;141;161;185m  61[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a3. システムが認証コードを検証する[0m
[38;2;141;161;185m  62[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a4. 成功時に基本フロー9に進む[0m
[38;2;141;161;185m  63[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  64[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 代替フロー4: パスワード期限切れ[0m
[38;2;141;161;185m  65[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 8a. システムがパスワード期限切れを検出した場合[0m
[38;2;141;161;185m  66[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a1. システムが「パスワードの有効期限が切れています」を表示する[0m
[38;2;141;161;185m  67[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a2. システムがパスワードリセット手順を案内する[0m
[38;2;141;161;185m  68[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a3. ユーザーがパスワードリセットを実行する場合、該当ユースケースに遷移する[0m
[38;2;141;161;185m  69[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  70[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 例外フロー[0m
[38;2;141;161;185m  71[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外1: メールアドレス未登録[0m
[38;2;141;161;185m  72[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 6a. システムが未登録のメールアドレスを検出した場合[0m
[38;2;141;161;185m  73[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a1. システムが「メールアドレスまたはパスワードが間違っています」を表示する[0m
[38;2;141;161;185m  74[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a2. システムが失敗試行をログに記録する[0m
[38;2;141;161;185m  75[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a3. システムがアカウント申請手順を案内する[0m
[38;2;141;161;185m  76[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 6a4. 基本フロー3に戻る[0m
[38;2;141;161;185m  77[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  78[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外2: パスワード不一致[0m
[38;2;141;161;185m  79[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 7a. システムがパスワードの不一致を検出した場合[0m
[38;2;141;161;185m  80[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a1. システムが「メールアドレスまたはパスワードが間違っています」を表示する[0m
[38;2;141;161;185m  81[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a2. システムが失敗回数をカウントする[0m
[38;2;141;161;185m  82[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a3. 失敗回数が3回未満の場合、残り試行回数を表示する[0m
[38;2;141;161;185m  83[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a4. 失敗回数が5回の場合、例外3に進む[0m
[38;2;141;161;185m  84[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7a5. 基本フロー3に戻る[0m
[38;2;141;161;185m  85[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  86[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外3: アカウントロック[0m
[38;2;141;161;185m  87[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 7b. 連続5回のログイン失敗を検出した場合[0m
[38;2;141;161;185m  88[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7b1. システムがアカウントを一時ロックする[0m
[38;2;141;161;185m  89[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7b2. システムが「アカウントがロックされました」を表示する[0m
[38;2;141;161;185m  90[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7b3. システムがユーザーにロック通知メールを送信する[0m
[38;2;141;161;185m  91[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7b4. システムが管理者にロック通知を送信する[0m
[38;2;141;161;185m  92[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 7b5. システムが30分後の自動アンロック時刻を表示する[0m
[38;2;141;161;185m  93[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m  94[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m### 例外4: アカウント無効化[0m
[38;2;141;161;185m  95[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- 8a. システムが無効化されたアカウントを検出した場合[0m
[38;2;141;161;185m  96[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a1. システムが「アカウントが無効化されています」を表示する[0m
[38;2;141;161;185m  97[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a2. システムが管理者への連絡方法を案内する[0m
[38;2;141;161;185m  98[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m  - 8a3. システムが無効化理由が表示可能な場合は理由を表示する[0m
[38;2;141;161;185m  99[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m 100[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 特別要件[0m
[38;2;141;161;185m 101[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **セキュリティ**: パスワードは暗号化して送信し、平文では記録しない[0m
[38;2;141;161;185m 102[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **パフォーマンス**: ログイン処理は3秒以内に完了[0m
[38;2;141;161;185m 103[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **可用性**: ログイン機能は99.9%の稼働率を維持[0m
[38;2;141;161;185m 104[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **監査性**: 全てのログイン試行を詳細ログと共に記録[0m
[38;2;141;161;185m 105[0m   [38;2;141;161;185m│[0m 
[38;2;141;161;185m 106[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m## 関連ユースケース[0m
[38;2;141;161;185m 107[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **包含**: なし[0m
[38;2;141;161;185m 108[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **拡張**: 「多要素認証を実行する」（MFA有効時）、「パスワードをリセットする」（忘れた場合）[0m
[38;2;141;161;185m 109[0m   [38;2;141;161;185m│[0m [38;2;227;234;242m- **汎化**: なし[0m
[38;2;141;161;185m───────┴────────────────────────────────────────────────────────────────────────[0m
