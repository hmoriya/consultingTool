# ユースケース: メンバーを新規登録する

## ユースケース概要

### 目的
新入社員や新規参画メンバーの基本情報、スキル、経歴を正確に登録し、組織のメンバー情報を最新に保つことで、プロジェクトアサインや人材活用の意思決定を支援する。

### アクター
- **主アクター**: 人事管理者
  - 説明: メンバー情報の登録責任者
- **副アクター**: マネージャー、新規メンバー本人
  - 説明: 情報提供者、承認者

### 事前条件
1. 新規メンバーの入社手続きが完了している
2. 人事管理者がシステムにログインしている
3. 必要な基本情報（氏名、メールアドレス、所属部門等）が準備されている

### 事後条件
1. メンバー情報がシステムに正確に登録される
2. プロファイルが作成され、検索・参照可能になる
3. 関連するマネージャーに登録完了通知が送信される
4. メンバー本人にアカウント情報が通知される

### トリガー
新規メンバーの入社、または外部パートナーの参画時に人事管理者が登録作業を開始する

## 基本フロー

1. 人事管理者がシステムにログインし、「新規メンバー登録」を選択する
2. 人事管理者がメンバーの基本情報（氏名、メールアドレス、所属部門、役職、入社日）を入力する
3. システムが入力内容のバリデーションを実行し、重複チェックを行う
4. 人事管理者がメンバーのスキル情報（最低3つのスキル、レベル、取得日）を入力する
5. 人事管理者が経歴情報（過去のプロジェクト履歴、役割、期間）を入力する
6. 人事管理者が資格情報（資格名、取得日、有効期限）を必要に応じて入力する
7. システムがプロファイル完成度を計算し、必須項目の充足状況を表示する
8. 人事管理者が入力内容を確認し、登録を実行する
9. システムがメンバーIDを生成し、プロファイルを作成する
10. システムが関連するマネージャーに登録完了通知を送信する
11. システムがメンバー本人にアカウント作成通知を送信する

## 代替フロー

### 代替フロー1: 既存メンバーの重複検出
- **3a**. システムが既存メンバーとの重複を検出した場合
  - **3a1**. システムが重複候補を表示し、確認を求める
  - **3a2**. 人事管理者が重複ではないことを確認し、続行を指示する
  - **3a3**. 基本フロー4に戻る

### 代替フロー2: 情報不足による保留
- **7a**. 必須項目が不足している場合
  - **7a1**. システムが不足項目をハイライト表示する
  - **7a2**. 人事管理者が下書き保存を選択する
  - **7a3**. システムが後日完了予定として保存する
  - **7a4**. 人事管理者に完了期限リマインダーを設定する

### 代替フロー3: 段階的登録
- **4a**. スキル情報が不明な場合
  - **4a1**. 人事管理者が「後で本人が入力」オプションを選択する
  - **4a2**. システムがメンバー本人に情報入力依頼を送信する
  - **4a3**. 基本フロー6に進む

## 例外フロー

### 例外1: バリデーションエラー
- **3a**. 入力データの形式が不正な場合
  - **3a1**. システムが具体的なエラーメッセージを表示する
  - **3a2**. 人事管理者が該当項目を修正する
  - **3a3**. 基本フロー3を再実行する

### 例外2: メール送信失敗
- **10a**. 通知メールの送信に失敗した場合
  - **10a1**. システムがエラーログに記録する
  - **10a2**. 人事管理者に手動での連絡を促すアラートを表示する
  - **10a3**. 再送信オプションを提供する

### 例外3: システムエラー
- **9a**. データベース保存時にエラーが発生した場合
  - **9a1**. システムが入力データを一時保存する
  - **9a2**. エラー詳細を管理者に通知する
  - **9a3**. 人事管理者に復旧後の再実行を案内する

## 特別要件

### 品質要件
- **データ精度**: 必須項目100%入力、情報の正確性保証
- **処理時間**: 登録完了まで5分以内
- **通知配信**: 登録完了から30分以内に関係者への通知完了

### パフォーマンス要件
- **レスポンス時間**: 各ステップの画面遷移2秒以内
- **同時登録**: 最大20名の並行登録処理に対応
- **データ容量**: 添付ファイル（証明書等）1人あたり10MB以内

### セキュリティ要件
- **アクセス制御**: 人事管理者権限の確認必須
- **データ保護**: 個人情報の暗号化保存
- **監査ログ**: 全登録操作の完全記録

## 関連ユースケース

### 包含関係
- **バリデーション実行**: 入力データの妥当性確認機能を利用
- **重複チェック**: 既存メンバー検索機能を利用
- **通知送信**: メール配信システムを利用

### 拡張関係
- **メンバー情報更新**: 登録後の情報変更に発展
- **スキル評価**: 登録されたスキル情報の詳細評価に発展
- **プロジェクトアサイン**: 登録完了後の配属検討に発展

### 汎化関係
- **メンバー管理**: より一般的なメンバー管理パターンを特化

## ビジネスルール

### 必須ルール
1. 氏名、メールアドレス、所属部門、役職、入社日は必須入力
2. メールアドレスは組織内で一意である必要がある
3. スキル情報は最低3つの登録が必要
4. 登録は入社後3営業日以内に完了させる

### 品質ルール
1. プロファイル完成度80%以上で本登録とする
2. 経歴情報は直近5年分の記録を推奨
3. 資格情報は有効期限付きのもののみ登録

### 承認ルール
1. 管理職レベル以上の登録は部門長の事前承認が必要
2. 外部パートナーの登録は契約書の事前確認が必要
3. 個人情報取扱いに関する同意書の確認が必要

## データ仕様

### 入力データ
- **基本情報**: 氏名（必須、50文字以内）、メールアドレス（必須、RFC準拠）、所属部門（必須、選択式）、役職（必須、選択式）、入社日（必須、日付形式）
- **スキル情報**: スキル名（必須、30文字以内）、レベル（必須、1-5段階）、取得日（任意、日付形式）
- **経歴情報**: プロジェクト名（任意、100文字以内）、役割（任意、50文字以内）、期間（任意、開始-終了日）
- **資格情報**: 資格名（任意、100文字以内）、取得日（任意、日付形式）、有効期限（任意、日付形式）

### 出力データ
- **メンバーID**: システム生成の一意識別子
- **プロファイル**: 統合されたメンバー情報
- **完成度スコア**: パーセンテージ表示
- **登録日時**: システム記録のタイムスタンプ