# ユースケース: リソース配分を作成する

## 基本情報
- **ユースケースID**: UC-RESOURCE-04
- **アクター**: リソースマネージャー、PMO、エグゼクティブ、プロジェクトマネージャー
- **概要**: 組織の人的・物的リソースを最適に配分し、プロジェクトニーズと組織目標を両立する効率的な配分計画を作成する

## 事前条件
- リソース要求が整理されている（ResourceRequest.status = "consolidated"）
- 利用可能リソースが更新されている
- 配分ポリシーが定義されている
- 予算制約が明確化されている
- 配分権限が確認されている

## 事後条件
### 成功時
- リソース配分計画が作成されている（ResourceAllocation.status = "draft"）
- 配分効率性が評価されている
- 競合・制約が識別されている
- 代替案が検討されている
- 承認プロセスへの移行権限が付与されている

### 失敗時
- 配分作成失敗の詳細理由がログに記録されている
- 制約・競合の詳細が特定されている
- 代替アプローチが提案されている
- 要求調整の推奨事項が提供されている

## 基本フロー
1. **リソースマネージャーが配分作成プロセスを開始する**
   - リソース要求の統合確認・配分方針の設定
   - 制約条件の整理・最適化目標の明確化

2. **システムが配分作成環境と分析機能を提供する**
   - → UC-AUTH-02: リソース配分作成権限を検証する
   - 配分作成インターフェースの準備・リソースデータベースへのアクセス
   - 最適化アルゴリズムの初期化

3. **システムが包括的なリソース分析を実行する**
   - リソース需給分析・スキルマッチング評価
   - 制約条件の確認・競合の特定

4. **システムが最適配分案の生成・評価を実行する**
   - 配分アルゴリズムの実行・効率性指標の算出
   - 複数シナリオの生成・リスク評価

5. **システムが配分計画の完成と記録を完了する**
   - 配分計画の最終化・配分履歴の保存
   - → UC-NOTIFY-01: 配分計画完成通知を配信する
   - → UC-AUTH-03: 配分作成ログを記録する

## 代替フロー
### 代替フロー1: 段階的配分
- 3a. 大規模組織で段階的配分が必要な場合
  - 3a1. 配分優先順位の設定・段階別配分計画の策定
  - 3a2. 高優先度リソースの先行配分・段階別最適化
  - 3a3. 基本フロー4（配分案生成）に進む

### 代替フロー2: 制約重視配分
- 3b. 厳しい制約条件下での配分が必要な場合
  - 3b1. 制約の重み付け・制約充足最優先の配分
  - 3b2. 制約内最適解の算出・妥協案の検討
  - 3b3. 基本フロー4に戻る

## 例外フロー
### 例外1: リソース競合検出
- *a. 複数プロジェクト間でリソース競合が発生した場合
  - *a1. → UC-AUTH-03: 競合検出ログを記録する
  - *a2. 競合解決方法の提案・優先度調整・交渉支援
  - *a3. 競合解決後、基本フロー4に復帰

### 例外2: 配分不可能判定
- *b. 要求に対してリソースが根本的に不足している場合
  - *b1. 不足分析の実行・代替リソースの調査
  - *b2. 要求調整の提案・外部調達の検討・スケジュール変更案
  - *b3. 調整完了後、基本フロー3に復帰

### 例外3: 配分権限不足
- *c. 特定リソースへの配分権限が不足している場合
  - *c1. 権限確認・上位承認者への相談
  - *c2. 代理配分・権限申請・暫定配分
  - *c3. 権限確保後、基本フロー3に復帰

## 特別要件
- **性能**: 配分計算5秒以内、大規模配分30秒以内、配分表示2秒以内
- **可用性**: 配分システム稼働率99.5%以上、24時間365日利用可能
- **セキュリティ**: 配分データ暗号化、アクセス制御、機密情報保護、監査証跡
- **精度**: 配分最適化精度95%以上、制約充足率100%、競合検出精度98%以上
- **ユーザビリティ**: 直感的な配分インターフェース、ビジュアル表示、シミュレーション

## 関連ユースケース
- **包含**: UC-AUTH-02（権限検証）、UC-AUTH-03（ログ記録）、UC-NOTIFY-01（通知配信）
- **前提**: リソース要求統合・分析完了必須
- **後続**: 配分承認、配分実行、パフォーマンス監視

---
*このユースケースは パラソル設計v2.0仕様 に基づいて作成されました*
