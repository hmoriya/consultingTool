# ユースケース: スキル別需要を集計する

## 基本情報
- **ユースケースID**: UC-TAL-012-002
- **アクター**: リソースマネージャー、データアナリスト、人事管理者
- **概要**: 収集されたプロジェクト計画情報から、スキル・役割・期間別の人材需要を体系的に集計・分析し、予測の基礎データを作成する

## 事前条件
- プロジェクト計画データが収集・整理されている
- スキル分類・標準化ルールが定義されている
- 集計対象期間・範囲が決定されている
- 集計システム・アルゴリズムが準備されている
- 過去の集計・実績データが利用可能である

## 事後条件
### 成功時
- スキル別・期間別の需要集計が完了している
- 需要の時系列変化・トレンドが可視化されている
- 集計データの品質・信頼性が確認されている
- 次段階の需給ギャップ分析が実行可能になっている

### 失敗時
- 集計エラー・異常値が特定・記録されている
- 代替集計方法・補正手法が検討されている
- 集計プロセス・ルールの改善点が明確になっている

## 基本フロー
1. リソースマネージャーが集計対象・パラメータを設定する
2. システムが収集済みプロジェクト計画データを抽出する
3. システムがスキル要件を標準分類・正規化・統合する
4. システムが期間・フェーズ別の需要分布を計算する
5. システムがスキル別・月次の需要集計を実行する
6. データアナリストが集計結果の品質・妥当性を検証する
7. システムが需要トレンド・パターンを分析・可視化する
8. リソースマネージャーが異常値・例外ケースを確認・調整する
9. システムが確定集計データを需給分析システムに連携する
10. リソースマネージャーが次段階のギャップ分析プロセスを開始する

## 代替フロー
### 代替フロー1: 不確定プロジェクト重み付け
- 5a. 確度・受注確率が異なるプロジェクトを含む場合
  - 5a1. プロジェクトの受注確率・実現可能性を評価する
  - 5a2. 確率重み付けによる需要調整・補正を実施する
  - 5a3. 楽観・現実・悲観シナリオでの集計を実行する
  - 5a4. 基本フロー6に戻る

### 代替フロー2: スキル推定・補完
- 3a. 詳細スキル要件が不明・不足している場合
  - 3a1. 類似プロジェクト・過去実績からスキル要件を推定する
  - 3a2. 業界・技術・規模による推定モデルを適用する
  - 3a3. 専門家判断・経験則による補完を実施する
  - 3a4. 基本フロー4に戻る

### 代替フロー3: 段階的・動的集計
- 5a. プロジェクトの段階的展開・動的変化を考慮する場合
  - 5a1. プロジェクト展開シナリオ・変化パターンを分析する
  - 5a2. フェーズ・マイルストーン別の需要変化を計算する
  - 5a3. 動的・確率的需要モデルによる集計を実行する
  - 5a4. 基本フロー6に戻る

## 例外フロー
### 例外1: 集計異常・エラー
- 5a. 集計処理中に異常値・エラーが発生した場合
  - 5a1. エラー原因・影響範囲を詳細分析・特定する
  - 5a2. データ修正・補正・除外による対応を実施する
  - 5a3. 集計アルゴリズム・ルールの見直し・調整を実行
  - 5a4. 修正後、基本フロー5から再実行

### 例外2: スキル分類・標準化問題
- 3a. スキル分類・標準化で重大な問題・矛盾が発見された場合
  - 3a1. 分類・標準化ルールの問題点を詳細分析する
  - 3a2. 新技術・新領域への分類拡張・更新を実施する
  - 3a3. 過去データとの整合性・継続性を確保する
  - 3a4. 更新されたルールで基本フロー3から再実行

### 例外3: データ品質・信頼性問題
- 6a. 集計結果の品質・信頼性に重大な疑義がある場合
  - 6a1. 品質問題の詳細分析・根本原因特定を実施する
  - 6a2. 元データの再検証・修正・補完を実行する
  - 6a3. 集計手法・アルゴリズムの改善・精度向上を実施
  - 6a4. 品質確保後、基本フロー5から再実行

## 特別要件
### 精度・信頼性要件
- 集計精度：過去実績との比較で±10%以内の精度
- データ完全性：対象プロジェクトの95%以上を集計対象
- 一貫性：時系列・スキル間での論理的一貫性確保
- 透明性：集計プロセス・根拠の完全な記録・説明

### 柔軟性・適応性要件
- スキル進化：新技術・新スキルへの柔軟・迅速な対応
- 粒度調整：粗い・細かい集計粒度への柔軟な対応
- シナリオ対応：複数シナリオ・条件での集計実行
- リアルタイム：データ変更・更新への迅速な再集計

### 効率性・拡張性要件
- 処理効率：大量データの高速・効率的処理
- 自動化：定型・繰り返し集計の完全自動化
- 拡張性：組織拡大・データ増加への対応
- 統合性：他システム・プロセスとの seamless 統合

## 関連ユースケース
### 包含関係
- スキル分類・標準化を実行する
- 需要分布計算を実行する
- 集計品質検証を実行する
- トレンド分析・可視化を実行する

### 拡張関係
- 需給ギャップを分析する（集計後の分析・評価）
- プロジェクト計画を収集する（集計前のデータ準備）
- スキル管理を実行する（スキル分類・標準の管理）
- 需要予測を実行する（集計データを活用した予測）

### 汎化関係
- 組織データ分析・集計を実行する（上位概念）

## ビジネスルール
### 集計対象・範囲
- 対象期間：向こう12ヶ月間の月次集計
- 最小単位：1人月以上の需要を集計対象
- スキル粒度：大分類・中分類・小分類の階層集計
- 確度閾値：受注確率30%以上のプロジェクトを含む

### 集計方法・アルゴリズム
- 基本集計：単純合計・平均・最大・最小・分散
- 重み付け：確率・重要度・優先度による重み付け
- 平滑化：移動平均・指数平滑法による変動吸収
- 補正：季節性・トレンド・外部要因による補正

### 品質・精度基準
- 完全性：必須スキル要件の90%以上を分類・集計
- 正確性：手動検証・過去実績との乖離15%以内
- 一貫性：時系列・階層間での論理的整合性確保
- 鮮度：データ更新から24時間以内の集計更新

## データ要件
### 入力データ
- 統合プロジェクト計画データ（全対象プロジェクト）
- スキル分類・標準化マスタ（技術・業務・役割分類）
- 期間・フェーズ情報（開始・終了・マイルストーン）
- 確度・重み情報（受注確率・重要度・優先度）
- 過去実績データ（比較・検証・補正用データ）

### 出力データ
- スキル別需要集計表（月次・スキル・レベル別集計）
- 需要トレンド・パターン分析（時系列・変化・予測）
- 集計品質レポート（完全性・正確性・信頼性指標）
- 異常・例外レポート（異常値・要注意項目・対応方針）
- 次期分析用データ（需給ギャップ分析用の標準データ）

## 成功指標
- 集計完了率：対象データの100%を期限内に集計完了
- 集計精度：過去実績・手動検証との乖離10%以内
- 処理効率：前回比での処理時間30%短縮・自動化率向上
- データ品質：完全性95%以上・一貫性90%以上
- 分析活用率：集計データの需給分析・予測での活用率

## 集計分析・手法詳細
### スキル分類・標準化
- **技術スキル階層**: 言語・フレームワーク・ツール・プラットフォーム
- **業務スキル階層**: 業界・機能・プロセス・専門領域
- **役割・レベル階層**: 役職・責任・経験・専門性レベル
- **複合・横断スキル**: 複数分類にまたがる複合的スキル

#### 分類マッピング例
```
技術スキル:
├── プログラミング言語
│   ├── Java → Java Developer (中級・上級)
│   ├── Python → Data Scientist, AI Engineer
│   └── JavaScript → Frontend Developer, Fullstack
├── クラウド・インフラ
│   ├── AWS → Cloud Architect, DevOps Engineer
│   └── Azure → Cloud Engineer, システム基盤
└── データ・AI
    ├── 機械学習 → ML Engineer, Data Scientist
    └── BI・分析 → Business Analyst, Data Analyst
```

### 需要集計・計算手法
- **基本集計**: ΣΣ(プロジェクトi × スキルj × 期間k)
- **確率重み付け**: 需要 × 受注確率 × 実現可能性
- **時間分散**: 期間内での需要分散・ピーク・平準化
- **スキル代替**: 類似・関連スキルでの代替可能性考慮

#### 集計計算式例
```
月次スキル需要(s,m) = Σ[プロジェクトp in 月m] (
    人数(p,s) × 稼働率(p,s) × 受注確率(p) ×
    期間重複率(p,m) × スキル重要度(s,p)
)

where:
- s: スキル種別
- m: 対象月
- p: プロジェクト
- 期間重複率: 該当月とプロジェクト期間の重複割合
```

### トレンド・パターン分析
- **季節性分析**: 年間・四半期・月次の需要パターン
- **成長・トレンド**: 長期的な需要増減・変化傾向
- **周期性・変動**: 景気・技術サイクルによる需要変動
- **相関・依存**: スキル間・業界間の需要相関関係

### 品質保証・検証
- **論理チェック**: 数値範囲・合計・比率の論理的妥当性
- **整合性チェック**: 時系列・階層間・関連データとの整合性
- **異常値検出**: 統計的異常値・期待値からの大幅乖離
- **専門家検証**: 業界・技術専門家による妥当性確認

## 高度な集計・分析機能
### 機械学習・AI活用
- **需要パターン学習**: 過去データからの需要パターン自動学習
- **スキル類似度**: 自然言語処理による類似スキル自動分類
- **異常検知**: 機械学習による集計異常・データ品質問題検知
- **予測補完**: AIによる不足データ・スキル要件の予測補完

### 高度な統計・分析手法
- **時系列分析**: ARIMA・状態空間モデルによる需要予測
- **クラスター分析**: スキル・プロジェクト類似性によるクラスタリング
- **主成分分析**: 高次元スキルデータの次元削減・要因分析
- **ネットワーク分析**: スキル・プロジェクト間の関係・影響分析

### 可視化・ダッシュボード
- **ヒートマップ**: スキル×期間の需要強度・密度可視化
- **時系列グラフ**: 需要トレンド・変化・予測の時系列表示
- **階層ツリーマップ**: スキル階層・需要規模の視覚的表現
- **インタラクティブダッシュボード**: ドリルダウン・フィルタリング機能