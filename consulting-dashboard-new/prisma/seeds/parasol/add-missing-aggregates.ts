#!/usr/bin/env npx tsx
/**
 * æ®‹ã‚Šã®4ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆå®šç¾©ã‚’è¿½åŠ ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
 */

import { PrismaClient } from '@prisma/parasol-client'
import fs from 'fs'
import path from 'path'

const prisma = new PrismaClient()

// å„ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
const _domainLanguageFiles = {
  'productivity-visualization': path.join(__dirname, 'domain-languages/productivity-visualization-v2.md'),
  'collaboration-facilitation': path.join(__dirname, 'domain-languages/collaboration-facilitation-v2.md'),
  'knowledge-cocreation': path.join(__dirname, 'domain-languages/knowledge-cocreation-v2.md'),
  'revenue-optimization': path.join(__dirname, 'domain-languages/revenue-optimization-v2.md')
}

async function updateService(_serviceName: string, domainLanguageContent: string) {
  try {
    console.log(`ğŸ“ Updating ${_serviceName}...`)
    
    const service = await prisma.services.findFirst({
      where: { name: _serviceName }
    })
    
    if (!service) {
      console.log(`âš ï¸  Service ${_serviceName} not found, skipping...`)
      return
    }
    
    await prisma.services.update({
      where: { id: service.id },
      data: {
        domainLanguageDefinition: domainLanguageContent,
        domainLanguage: JSON.stringify({
          generatedFrom: 'domain-language-v1.2.0',
          generatedAt: new Date().toISOString(),
          version: '1.2.0',
          features: [
            'explicit-value-object-relations',
            'aggregate-value-objects', 
            'relationship-definitions',
            'ddd-pattern-checklist',
            'all-entities-have-aggregates'
          ]
        }),
        updatedAt: new Date()
      }
    })
    
    console.log(`âœ… ${_serviceName} updated successfully`)
  } catch (_error) {
    console.error(`âŒ Error updating ${_serviceName}:`, error)
    throw _error
  }
}

async function main() {
  console.log('ğŸ”„ Adding aggregate definitions to remaining services...\n')
  
  try {
    // ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
    const domainLangDir = path.join(__dirname, 'domain-languages')
    if (!fs.existsSync(domainLangDir)) {
      fs.mkdirSync(domainLangDir, { recursive: true })
    }
    
    // 1. ç”Ÿç”£æ€§å¯è¦–åŒ–ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èª
    const productivityDomainLanguage = `# ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èª: å·¥æ•°ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0  
**æ›´æ–°æ—¥**: 2025-01-29

## ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚è¦
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å·¥æ•°ã‚’æ­£ç¢ºã«è¨˜éŒ²ã—ã€ç”Ÿç”£æ€§ã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ã§æ”¹å–„ã‚’ä¿ƒé€²ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³

## ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªå®šç¾©

### åŸºæœ¬å‹å®šç¾©
\`\`\`
UUID: ä¸€æ„è­˜åˆ¥å­ï¼ˆ36æ–‡å­—ï¼‰
STRING_20: æœ€å¤§20æ–‡å­—ã®æ–‡å­—åˆ—
STRING_50: æœ€å¤§50æ–‡å­—ã®æ–‡å­—åˆ—
STRING_100: æœ€å¤§100æ–‡å­—ã®æ–‡å­—åˆ—
STRING_255: æœ€å¤§255æ–‡å­—ã®æ–‡å­—åˆ—
TEXT: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆï¼ˆåˆ¶é™ãªã—ï¼‰
DATE: æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
TIME: æ™‚é–“ï¼ˆHH:MMå½¢å¼ï¼‰
TIMESTAMP: æ—¥æ™‚ï¼ˆISO8601å½¢å¼ï¼‰
DECIMAL: å°æ•°ç‚¹æ•°å€¤
INTEGER: æ•´æ•°
BOOLEAN: çœŸå½å€¤ï¼ˆtrue/falseï¼‰
ENUM: åˆ—æŒ™å‹
\`\`\`

### ã‚«ã‚¹ã‚¿ãƒ å‹å®šç¾©
\`\`\`
ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã®çŠ¶æ…‹ (åŸºæœ¬å‹: ENUM)
  - draft: ä¸‹æ›¸ã
  - submitted: æå‡ºæ¸ˆã¿
  - approved: æ‰¿èªæ¸ˆã¿
  - rejected: å´ä¸‹
  - revised: ä¿®æ­£ä¸­

ä½œæ¥­ã‚«ãƒ†ã‚´ãƒª: ä½œæ¥­ã®åˆ†é¡ (åŸºæœ¬å‹: ENUM)
  - development: é–‹ç™º
  - meeting: ä¼šè­°
  - documentation: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
  - review: ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - support: ã‚µãƒãƒ¼ãƒˆ
  - management: ç®¡ç†
  - other: ãã®ä»–
\`\`\`

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntitiesï¼‰

### ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet] [TIMESHEET]
èª¬æ˜: æœŸé–“å˜ä½ã§ã®å·¥æ•°è¨˜éŒ²ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆID [TimesheetId] [TIMESHEET_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã®ä¸€æ„è­˜åˆ¥å­
- è¨˜éŒ²è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [RecorderRef] [RECORDER_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã‚’è¨˜éŒ²ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼
  - é–¢é€£: ãƒ¦ãƒ¼ã‚¶ãƒ¼ [User] â†’ ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet]ï¼ˆ1..*ï¼‰
- å¯¾è±¡é€± [TargetWeek] [TARGET_WEEK]
  - å‹: é€±æƒ…å ± [WeekInfo] [WEEK_INFO]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: å¯¾è±¡ã¨ãªã‚‹é€±ã®æƒ…å ±
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [Status] [STATUS]
  - å‹: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [TimesheetStatus] [TIMESHEET_STATUS]
  - èª¬æ˜: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã®çŠ¶æ…‹
- åˆè¨ˆæ™‚é–“ [TotalHours] [TOTAL_HOURS]
  - å‹: ä½œæ¥­æ™‚é–“ [WorkHours] [WORK_HOURS]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: é€±ã®åˆè¨ˆä½œæ¥­æ™‚é–“

ä¸å¤‰æ¡ä»¶:
- åˆè¨ˆæ™‚é–“ã¯æ˜ç´°ã®åˆè¨ˆã¨ä¸€è‡´ã™ã‚‹
- æ‰¿èªæ¸ˆã¿ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã¯å¤‰æ›´ä¸å¯

æŒ¯ã‚‹èˆã„:
- ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆæå‡º [SubmitTimesheet] [SUBMIT_TIMESHEET]
  - ç›®çš„: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã‚’æå‡ºã™ã‚‹
  - å…¥åŠ›: ãªã—
  - å‡ºåŠ›: æå‡ºçµæœ
  - äº‹å‰æ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=ä¸‹æ›¸ãã€ã‚¨ãƒ³ãƒˆãƒªãŒ1ä»¶ä»¥ä¸Š
  - äº‹å¾Œæ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=æå‡ºæ¸ˆã¿

#### ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
- ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆæå‡ºæ¸ˆã¿ [TimesheetSubmitted] [TIMESHEET_SUBMITTED]ï¼šã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆæå‡ºæ™‚

#### é›†ç´„ãƒ«ãƒ¼ãƒˆ
ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆé›†ç´„ã®ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

### å·¥æ•°ã‚¨ãƒ³ãƒˆãƒª [TimeEntry] [TIME_ENTRY]
èª¬æ˜: å€‹åˆ¥ã®ä½œæ¥­è¨˜éŒ²ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- ã‚¨ãƒ³ãƒˆãƒªID [EntryId] [ENTRY_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ã‚¨ãƒ³ãƒˆãƒªã®ä¸€æ„è­˜åˆ¥å­
- ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆID [TimesheetId] [TIMESHEET_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: æ‰€å±ã™ã‚‹ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [ProjectRef] [PROJECT_REF]
  - å‹: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID [ProjectId] [PROJECT_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: ä½œæ¥­å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
  - é–¢é€£: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ [Project] â†’ å·¥æ•°ã‚¨ãƒ³ãƒˆãƒª [TimeEntry]ï¼ˆ1..*ï¼‰
- ä½œæ¥­æ—¥ [WorkDate] [WORK_DATE]
  - å‹: DATE [DATE] [DATE]
  - èª¬æ˜: ä½œæ¥­å®Ÿæ–½æ—¥
- ä½œæ¥­æ™‚é–“ [WorkHours] [WORK_HOURS]
  - å‹: ä½œæ¥­æ™‚é–“ [WorkHours] [WORK_HOURS]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: å®Ÿä½œæ¥­æ™‚é–“

## å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰

### é€±æƒ…å ± [WeekInfo] [WEEK_INFO]
- å®šç¾©: ç‰¹å®šã®é€±ã‚’è¡¨ç¾ã™ã‚‹æƒ…å ±
- å±æ€§:
  - å¹´ [year] [YEAR]: INTEGER
  - é€±ç•ªå· [weekNumber] [WEEK_NUMBER]: INTEGERï¼ˆ1-53ï¼‰
  - é–‹å§‹æ—¥ [startDate] [START_DATE]: DATE
  - çµ‚äº†æ—¥ [endDate] [END_DATE]: DATE
- åˆ¶ç´„: é€±ç•ªå·ã¯1-53ã®ç¯„å›²
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet]
- ä¾‹: 2025å¹´ç¬¬5é€±ï¼ˆ2025-01-27ã€œ2025-02-02ï¼‰

### ä½œæ¥­æ™‚é–“ [WorkHours] [WORK_HOURS]
- å®šç¾©: ä½œæ¥­æ™‚é–“ã‚’è¡¨ç¾
- å±æ€§:
  - æ™‚é–“ [hours] [HOURS]: DECIMALï¼ˆ0-24ï¼‰
  - åˆ† [minutes] [MINUTES]: INTEGERï¼ˆ0-59ï¼‰
- åˆ¶ç´„: 1æ—¥24æ™‚é–“ä»¥å†…ã€0ä»¥ä¸Š
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet]ã€å·¥æ•°ã‚¨ãƒ³ãƒˆãƒª [TimeEntry]
- ä¾‹: 8æ™‚é–“30åˆ†

## é›†ç´„ï¼ˆAggregatesï¼‰

### ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆé›†ç´„ [TimesheetAggregate] [TIMESHEET_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: 
  - å·¥æ•°ã‚¨ãƒ³ãƒˆãƒª [TimeEntry]ï¼šã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã«å«ã¾ã‚Œã‚‹ä½œæ¥­è¨˜éŒ²ï¼ˆ0..*ï¼‰
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - é€±æƒ…å ± [WeekInfo]ï¼šå¯¾è±¡é€±ã®æƒ…å ±ã¨ã—ã¦ä½¿ç”¨
  - ä½œæ¥­æ™‚é–“ [WorkHours]ï¼šåˆè¨ˆæ™‚é–“ã€å€‹åˆ¥ä½œæ¥­æ™‚é–“ã§ä½¿ç”¨
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã¨å·¥æ•°ã‚¨ãƒ³ãƒˆãƒªã¯åŒä¸€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- **ä¸å¤‰æ¡ä»¶**: 
  - ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã®åˆè¨ˆæ™‚é–“ã¯å…¨ã‚¨ãƒ³ãƒˆãƒªã®åˆè¨ˆã¨ä¸€è‡´
  - æ‰¿èªæ¸ˆã¿ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã¯ç·¨é›†ä¸å¯
  - åŒä¸€æ—¥ã«åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¨ãƒ³ãƒˆãƒªã¯1ã¤ã¾ã§
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - é›†ç´„å¤–ã‹ã‚‰ã¯ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆIDã®ã¿ã§å‚ç…§
  - å·¥æ•°ã‚¨ãƒ³ãƒˆãƒªã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯ç¦æ­¢

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹

### ç¨¼åƒç‡è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ [UtilizationCalculationService] [UTILIZATION_CALCULATION_SERVICE]
ç¨¼åƒç‡ã®è¨ˆç®—ã¨åˆ†æã‚’è¡Œã†ã‚µãƒ¼ãƒ“ã‚¹

#### æä¾›æ©Ÿèƒ½
- å€‹äººç¨¼åƒç‡è¨ˆç®— [CalculatePersonalUtilization] [CALCULATE_PERSONAL_UTILIZATION]
  - ç›®çš„: å€‹äººã®ç¨¼åƒç‡ã‚’è¨ˆç®—
  - å…¥åŠ›: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã€æœŸé–“
  - å‡ºåŠ›: ç¨¼åƒç‡ãƒ¬ãƒãƒ¼ãƒˆ
  - åˆ¶ç´„: æ‰¿èªæ¸ˆã¿ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã®ã¿å¯¾è±¡

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ

### ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆæå‡ºæ¸ˆã¿ [TimesheetSubmitted] [TIMESHEET_SUBMITTED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆãŒæå‡ºã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆID [timesheetId]: UUID
  - è¨˜éŒ²è€…ID [recorderId]: UUID
  - å¯¾è±¡é€± [targetWeek]: WeekInfo

## ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«

### ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆè¨˜éŒ²ãƒ«ãƒ¼ãƒ«
1. **é€±ç· ã‚ãƒ«ãƒ¼ãƒ«**: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆã¯é€±å˜ä½ï¼ˆæœˆæ›œé–‹å§‹ã€æ—¥æ›œçµ‚äº†ï¼‰ã§ä½œæˆ
2. **æå‡ºæœŸé™**: ç¿Œé€±æœˆæ›œæ—¥ã®æ­£åˆã¾ã§
3. **æœ€å¤§æ™‚é–“åˆ¶é™**: 1æ—¥ã®ä½œæ¥­æ™‚é–“ã¯24æ™‚é–“ä»¥å†…

### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- 1001: ä½œæ¥­æ™‚é–“è¶…éã‚¨ãƒ©ãƒ¼
- 1002: æå‡ºæœŸé™è¶…éã‚¨ãƒ©ãƒ¼

## ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒª [TimesheetRepository] [TIMESHEET_REPOSITORY]
é›†ç´„: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆé›†ç´„ [TimesheetAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ [Timesheet]
- save(timesheet: ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ): void

æ¤œç´¢æ“ä½œ:
- findByUserAndWeek(userId: UUID, week: WeekInfo): ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ãƒˆ

## DDDãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- [x] ä¸€æ„è­˜åˆ¥å­ã‚’æŒã¤
- [x] ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’æŒã¤
- [x] ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚€
- [x] å¿…ãšä½•ã‚‰ã‹ã®é›†ç´„ã«å±ã—ã¦ã„ã‚‹

### å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- [x] ä¸å¤‰æ€§ã‚’ä¿ã¤
- [x] è­˜åˆ¥å­ã‚’æŒãŸãªã„
- [x] ç­‰ä¾¡æ€§ã§æ¯”è¼ƒã•ã‚Œã‚‹
- [x] ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæ˜ç¢º

### é›†ç´„
- [x] é›†ç´„ãƒ«ãƒ¼ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•ŒãŒæ˜ç¢º
- [x] ä¸å¤‰æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åŒ…å«ã—ã¦ã„ã‚‹
- [x] å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é›†ç´„ãƒ«ãƒ¼ãƒˆçµŒç”±ã®ã¿`
    
    fs.writeFileSync(
      path.join(domainLangDir, 'productivity-visualization-v2.md'),
      productivityDomainLanguage
    )
    
    // SQLite ã«ç›´æ¥æ›´æ–°
    await updateService('productivity-visualization', productivityDomainLanguage)
    
    // 2. ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¿ƒé€²ã‚µãƒ¼ãƒ“ã‚¹
    const collaborationDomainLanguage = `# ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èª: é€šçŸ¥ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ³

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0  
**æ›´æ–°æ—¥**: 2025-01-29

## ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚è¦
ãƒãƒ¼ãƒ å†…ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿ƒé€²ã—ã€é‡è¦ãªæƒ…å ±ã‚’ã‚¿ã‚¤ãƒ ãƒªãƒ¼ã«é…ä¿¡ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³

## ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªå®šç¾©

### åŸºæœ¬å‹å®šç¾©
\`\`\`
UUID: ä¸€æ„è­˜åˆ¥å­ï¼ˆ36æ–‡å­—ï¼‰
STRING_50: æœ€å¤§50æ–‡å­—ã®æ–‡å­—åˆ—
STRING_100: æœ€å¤§100æ–‡å­—ã®æ–‡å­—åˆ—
STRING_255: æœ€å¤§255æ–‡å­—ã®æ–‡å­—åˆ—
TEXT: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆï¼ˆåˆ¶é™ãªã—ï¼‰
TIMESTAMP: æ—¥æ™‚ï¼ˆISO8601å½¢å¼ï¼‰
BOOLEAN: çœŸå½å€¤ï¼ˆtrue/falseï¼‰
ENUM: åˆ—æŒ™å‹
JSON: JSONå½¢å¼ãƒ‡ãƒ¼ã‚¿
\`\`\`

### ã‚«ã‚¹ã‚¿ãƒ å‹å®šç¾©
\`\`\`
é€šçŸ¥ã‚¿ã‚¤ãƒ—: é€šçŸ¥ã®ç¨®é¡ (åŸºæœ¬å‹: ENUM)
  - task_assigned: ã‚¿ã‚¹ã‚¯å‰²å½“
  - project_update: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ›´æ–°
  - approval_request: æ‰¿èªä¾é ¼
  - mention: ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³
  - announcement: ãŠçŸ¥ã‚‰ã›
  - reminder: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

é€šçŸ¥å„ªå…ˆåº¦: é€šçŸ¥ã®é‡è¦åº¦ (åŸºæœ¬å‹: ENUM)
  - low: ä½
  - medium: ä¸­
  - high: é«˜
  - urgent: ç·Šæ€¥

é…ä¿¡ãƒãƒ£ãƒãƒ«: é…ä¿¡æ–¹æ³• (åŸºæœ¬å‹: ENUM)
  - in_app: ã‚¢ãƒ—ãƒªå†…é€šçŸ¥
  - email: ãƒ¡ãƒ¼ãƒ«
  - slack: Slack
  - teams: Microsoft Teams
\`\`\`

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntitiesï¼‰

### é€šçŸ¥ [Notification] [NOTIFICATION]
èª¬æ˜: ã‚·ã‚¹ãƒ†ãƒ å†…ã§ç™ºç”Ÿã™ã‚‹é€šçŸ¥ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- é€šçŸ¥ID [NotificationId] [NOTIFICATION_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: é€šçŸ¥ã®ä¸€æ„è­˜åˆ¥å­
- ã‚¿ã‚¤ãƒˆãƒ« [Title] [TITLE]
  - å‹: STRING_255 [STRING_255] [STRING_255]
  - èª¬æ˜: é€šçŸ¥ã®ã‚¿ã‚¤ãƒˆãƒ«
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [Message] [MESSAGE]
  - å‹: TEXT [TEXT] [TEXT]
  - èª¬æ˜: é€šçŸ¥ã®æœ¬æ–‡
- é€šçŸ¥ã‚¿ã‚¤ãƒ— [Type] [TYPE]
  - å‹: é€šçŸ¥ã‚¿ã‚¤ãƒ— [NotificationType] [NOTIFICATION_TYPE]
  - èª¬æ˜: é€šçŸ¥ã®ç¨®é¡
- å„ªå…ˆåº¦ [Priority] [PRIORITY]
  - å‹: é€šçŸ¥å„ªå…ˆåº¦ [NotificationPriority] [NOTIFICATION_PRIORITY]
  - èª¬æ˜: é€šçŸ¥ã®é‡è¦åº¦
- å—ä¿¡è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [RecipientRef] [RECIPIENT_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: é€šçŸ¥ã®å—ä¿¡è€…
  - é–¢é€£: ãƒ¦ãƒ¼ã‚¶ãƒ¼ [User] â†’ é€šçŸ¥ [Notification]ï¼ˆ1..*ï¼‰
- é…ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [DeliveryStatus] [DELIVERY_STATUS]
  - å‹: é…ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [DeliveryStatus] [DELIVERY_STATUS]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: å„ãƒãƒ£ãƒãƒ«ã®é…ä¿¡çŠ¶æ³
- æ—¢èª­ãƒ•ãƒ©ã‚° [IsRead] [IS_READ]
  - å‹: BOOLEAN [BOOLEAN] [BOOLEAN]
  - èª¬æ˜: æ—¢èª­çŠ¶æ…‹
- ä½œæˆæ—¥æ™‚ [CreatedAt] [CREATED_AT]
  - å‹: TIMESTAMP [TIMESTAMP] [TIMESTAMP]
  - èª¬æ˜: é€šçŸ¥ä½œæˆæ—¥æ™‚

ä¸å¤‰æ¡ä»¶:
- ä½œæˆå¾Œã¯å†…å®¹ã®å¤‰æ›´ä¸å¯
- é…ä¿¡å¾Œã®ãƒãƒ£ãƒãƒ«å¤‰æ›´ä¸å¯

#### ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
- é€šçŸ¥é…ä¿¡æ¸ˆã¿ [NotificationDelivered] [NOTIFICATION_DELIVERED]ï¼šé€šçŸ¥é…ä¿¡æ™‚
- é€šçŸ¥æ—¢èª­æ¸ˆã¿ [NotificationRead] [NOTIFICATION_READ]ï¼šæ—¢èª­åŒ–æ™‚

#### é›†ç´„ãƒ«ãƒ¼ãƒˆ
ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯é€šçŸ¥é›†ç´„ã®ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [Message] [MESSAGE]
èª¬æ˜: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID [MessageId] [MESSAGE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¸€æ„è­˜åˆ¥å­
- é€ä¿¡è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [SenderRef] [SENDER_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡è€…
  - é–¢é€£: ãƒ¦ãƒ¼ã‚¶ãƒ¼ [User] â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [Message]ï¼ˆ1..*ï¼‰
- å†…å®¹ [Content] [CONTENT]
  - å‹: TEXT [TEXT] [TEXT]
  - èª¬æ˜: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡
- ã‚¹ãƒ¬ãƒƒãƒ‰ID [ThreadId] [THREAD_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: æ‰€å±ã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰
- é€ä¿¡æ—¥æ™‚ [SentAt] [SENT_AT]
  - å‹: TIMESTAMP [TIMESTAMP] [TIMESTAMP]
  - èª¬æ˜: é€ä¿¡æ—¥æ™‚

## å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰

### é…ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [DeliveryStatus] [DELIVERY_STATUS]
- å®šç¾©: å„ãƒãƒ£ãƒãƒ«ã®é…ä¿¡çŠ¶æ³ã‚’è¡¨ç¾
- å±æ€§:
  - ãƒãƒ£ãƒãƒ« [channel] [CHANNEL]: é…ä¿¡ãƒãƒ£ãƒãƒ«
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [status] [STATUS]: ENUMï¼ˆpending, delivered, failedï¼‰
  - é…ä¿¡æ—¥æ™‚ [deliveredAt] [DELIVERED_AT]: TIMESTAMP
  - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [errorMessage] [ERROR_MESSAGE]: STRING_500ï¼ˆä»»æ„ï¼‰
- åˆ¶ç´„: é…ä¿¡æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯å¤‰æ›´ä¸å¯
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: é€šçŸ¥ [Notification]

### ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ [Mention] [MENTION]
- å®šç¾©: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¾
- å±æ€§:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [userId] [USER_ID]: UUID
  - ä½ç½® [position] [POSITION]: INTEGER
- åˆ¶ç´„: åŒä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã§é‡è¤‡ä¸å¯
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [Message]ã€ã‚³ãƒ¡ãƒ³ãƒˆ [Comment]

## é›†ç´„ï¼ˆAggregatesï¼‰

### é€šçŸ¥é›†ç´„ [NotificationAggregate] [NOTIFICATION_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: é€šçŸ¥ [Notification]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: ãªã—
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - é…ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [DeliveryStatus]ï¼šå„ãƒãƒ£ãƒãƒ«ã®é…ä¿¡çŠ¶æ³
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: é€šçŸ¥å˜ä½“ã§å®Œçµ
- **ä¸å¤‰æ¡ä»¶**: 
  - é…ä¿¡å¾Œã®å†…å®¹å¤‰æ›´ä¸å¯
  - æ—¢èª­å¾Œã®æœªèª­åŒ–ä¸å¯
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - é€šçŸ¥IDã®ã¿ã§å‚ç…§

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰é›†ç´„ [MessageThreadAggregate] [MESSAGE_THREAD_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰ [MessageThread]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: 
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ [Message]ï¼šã‚¹ãƒ¬ãƒƒãƒ‰å†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ1..*ï¼‰
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ [Mention]ï¼šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯åŒä¸€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- **ä¸å¤‰æ¡ä»¶**: 
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ™‚ç³»åˆ—é †åºã‚’ä¿è¨¼
  - å‰Šé™¤ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ç·¨é›†ä¸å¯
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - ã‚¹ãƒ¬ãƒƒãƒ‰IDã§ã‚¢ã‚¯ã‚»ã‚¹
  - å€‹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹

### é€šçŸ¥é…ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ [NotificationDeliveryService] [NOTIFICATION_DELIVERY_SERVICE]
é€šçŸ¥ã‚’é©åˆ‡ãªãƒãƒ£ãƒãƒ«ã«é…ä¿¡ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹

#### æä¾›æ©Ÿèƒ½
- é€šçŸ¥é…ä¿¡ [DeliverNotification] [DELIVER_NOTIFICATION]
  - ç›®çš„: é€šçŸ¥ã‚’æŒ‡å®šãƒãƒ£ãƒãƒ«ã«é…ä¿¡
  - å…¥åŠ›: é€šçŸ¥IDã€é…ä¿¡ãƒãƒ£ãƒãƒ«
  - å‡ºåŠ›: é…ä¿¡çµæœ
  - åˆ¶ç´„: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã«åŸºã¥ãé…ä¿¡

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ

### é€šçŸ¥é…ä¿¡æ¸ˆã¿ [NotificationDelivered] [NOTIFICATION_DELIVERED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: é€šçŸ¥ãŒé…ä¿¡ã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - é€šçŸ¥ID [notificationId]: UUID
  - å—ä¿¡è€…ID [recipientId]: UUID
  - ãƒãƒ£ãƒãƒ« [channel]: é…ä¿¡ãƒãƒ£ãƒãƒ«

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ¸ˆã¿ [MessageSent] [MESSAGE_SENT]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID [messageId]: UUID
  - é€ä¿¡è€…ID [senderId]: UUID
  - ã‚¹ãƒ¬ãƒƒãƒ‰ID [threadId]: UUID

## ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«

### é€šçŸ¥é…ä¿¡ãƒ«ãƒ¼ãƒ«
1. **å„ªå…ˆåº¦åˆ¥é…ä¿¡**: ç·Šæ€¥é€šçŸ¥ã¯å…¨ãƒãƒ£ãƒãƒ«ã«å³åº§é…ä¿¡
2. **å–¶æ¥­æ™‚é–“è€ƒæ…®**: ä½å„ªå…ˆåº¦ã¯å–¶æ¥­æ™‚é–“å†…ã«é…ä¿¡
3. **é…ä¿¡ãƒªãƒˆãƒ©ã‚¤**: å¤±æ•—æ™‚ã¯3å›ã¾ã§å†è©¦è¡Œ

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ«
1. **ç·¨é›†æœŸé™**: é€ä¿¡å¾Œ5åˆ†ä»¥å†…ã®ã¿ç·¨é›†å¯èƒ½
2. **å‰Šé™¤åˆ¶é™**: è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿å‰Šé™¤å¯èƒ½
3. **ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³é€šçŸ¥**: ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è‡ªå‹•é€šçŸ¥

### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- 1001: é…ä¿¡ãƒãƒ£ãƒãƒ«æœªè¨­å®šã‚¨ãƒ©ãƒ¼
- 1002: å—ä¿¡è€…ä¸åœ¨ã‚¨ãƒ©ãƒ¼
- 2001: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·¨é›†æœŸé™è¶…éã‚¨ãƒ©ãƒ¼

## ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### é€šçŸ¥ãƒªãƒã‚¸ãƒˆãƒª [NotificationRepository] [NOTIFICATION_REPOSITORY]
é›†ç´„: é€šçŸ¥é›†ç´„ [NotificationAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): é€šçŸ¥ [Notification]
- save(notification: é€šçŸ¥): void

æ¤œç´¢æ“ä½œ:
- findUnreadByUser(userId: UUID): é€šçŸ¥[]
- findByUserAndDateRange(userId: UUID, start: Date, end: Date): é€šçŸ¥[]

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰ãƒªãƒã‚¸ãƒˆãƒª [MessageThreadRepository] [MESSAGE_THREAD_REPOSITORY]
é›†ç´„: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰é›†ç´„ [MessageThreadAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰ [MessageThread]
- save(thread: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰): void

æ¤œç´¢æ“ä½œ:
- findByParticipant(userId: UUID): ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰[]

## DDDãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- [x] ä¸€æ„è­˜åˆ¥å­ã‚’æŒã¤
- [x] ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’æŒã¤
- [x] ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚€
- [x] å¿…ãšä½•ã‚‰ã‹ã®é›†ç´„ã«å±ã—ã¦ã„ã‚‹

### å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- [x] ä¸å¤‰æ€§ã‚’ä¿ã¤
- [x] è­˜åˆ¥å­ã‚’æŒãŸãªã„
- [x] ç­‰ä¾¡æ€§ã§æ¯”è¼ƒã•ã‚Œã‚‹
- [x] ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæ˜ç¢º

### é›†ç´„
- [x] é›†ç´„ãƒ«ãƒ¼ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•ŒãŒæ˜ç¢º
- [x] ä¸å¤‰æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åŒ…å«ã—ã¦ã„ã‚‹
- [x] å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é›†ç´„ãƒ«ãƒ¼ãƒˆçµŒç”±ã®ã¿`

    fs.writeFileSync(
      path.join(domainLangDir, 'collaboration-facilitation-v2.md'),
      collaborationDomainLanguage
    )
    
    await updateService('collaboration-facilitation', collaborationDomainLanguage)
    
    // 3. ãƒŠãƒ¬ãƒƒã‚¸å…±å‰µã‚µãƒ¼ãƒ“ã‚¹
    const knowledgeDomainLanguage = `# ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èª: ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0  
**æ›´æ–°æ—¥**: 2025-01-29

## ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚è¦
çµ„ç¹”ã®çŸ¥è­˜ã‚’ä½“ç³»çš„ã«ç®¡ç†ã—ã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã§åŠ¹æœçš„ã«å…±æœ‰ãƒ»æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€çµ„ç¹”å…¨ä½“ã®çŸ¥çš„è³‡ç”£ã‚’æœ€å¤§åŒ–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³

## ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªå®šç¾©

### åŸºæœ¬å‹å®šç¾©
\`\`\`
UUID: ä¸€æ„è­˜åˆ¥å­ï¼ˆ36æ–‡å­—ï¼‰
STRING_50: æœ€å¤§50æ–‡å­—ã®æ–‡å­—åˆ—
STRING_100: æœ€å¤§100æ–‡å­—ã®æ–‡å­—åˆ—
STRING_255: æœ€å¤§255æ–‡å­—ã®æ–‡å­—åˆ—
STRING_500: æœ€å¤§500æ–‡å­—ã®æ–‡å­—åˆ—
TEXT: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆï¼ˆåˆ¶é™ãªã—ï¼‰
MARKDOWN: Markdownå½¢å¼ã®ãƒ†ã‚­ã‚¹ãƒˆ
DATE: æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
TIMESTAMP: æ—¥æ™‚ï¼ˆISO8601å½¢å¼ï¼‰
INTEGER: æ•´æ•°
BOOLEAN: çœŸå½å€¤ï¼ˆtrue/falseï¼‰
ENUM: åˆ—æŒ™å‹
JSON: JSONå½¢å¼ãƒ‡ãƒ¼ã‚¿
\`\`\`

### ã‚«ã‚¹ã‚¿ãƒ å‹å®šç¾©
\`\`\`
è¨˜äº‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: è¨˜äº‹ã®å…¬é–‹çŠ¶æ…‹ (åŸºæœ¬å‹: ENUM)
  - draft: ä¸‹æ›¸ã
  - published: å…¬é–‹
  - archived: ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
  - deleted: å‰Šé™¤æ¸ˆã¿

çŸ¥è­˜ã‚«ãƒ†ã‚´ãƒª: çŸ¥è­˜ã®åˆ†é¡ (åŸºæœ¬å‹: ENUM)
  - technical: æŠ€è¡“
  - business: ãƒ“ã‚¸ãƒã‚¹
  - process: ãƒ—ãƒ­ã‚»ã‚¹
  - best_practice: ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
  - lesson_learned: æ•™è¨“
  - reference: ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

è©•ä¾¡ã‚¿ã‚¤ãƒ—: è©•ä¾¡ã®ç¨®é¡ (åŸºæœ¬å‹: ENUM)
  - helpful: å½¹ç«‹ã¤
  - not_helpful: å½¹ç«‹ãŸãªã„
  - outdated: å¤ã„æƒ…å ±
  - incorrect: èª¤æƒ…å ±
\`\`\`

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntitiesï¼‰

### è¨˜äº‹ [Article] [ARTICLE]
èª¬æ˜: ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®è¨˜äº‹ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- è¨˜äº‹ID [ArticleId] [ARTICLE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: è¨˜äº‹ã®ä¸€æ„è­˜åˆ¥å­
- ã‚¿ã‚¤ãƒˆãƒ« [Title] [TITLE]
  - å‹: STRING_255 [STRING_255] [STRING_255]
  - èª¬æ˜: è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
- å†…å®¹ [Content] [CONTENT]
  - å‹: MARKDOWN [MARKDOWN] [MARKDOWN]
  - èª¬æ˜: è¨˜äº‹ã®æœ¬æ–‡ï¼ˆMarkdownå½¢å¼ï¼‰
- è¦ç´„ [Summary] [SUMMARY]
  - å‹: STRING_500 [STRING_500] [STRING_500]
  - èª¬æ˜: è¨˜äº‹ã®è¦ç´„
- ã‚«ãƒ†ã‚´ãƒª [Category] [CATEGORY]
  - å‹: çŸ¥è­˜ã‚«ãƒ†ã‚´ãƒª [KnowledgeCategory] [KNOWLEDGE_CATEGORY]
  - èª¬æ˜: è¨˜äº‹ã®åˆ†é¡
- ã‚¿ã‚° [Tags] [TAGS]
  - å‹: ã‚¿ã‚°ãƒªã‚¹ãƒˆ [TagList] [TAG_LIST]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: è¨˜äº‹ã«ä»˜ä¸ã•ã‚ŒãŸã‚¿ã‚°
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [Status] [STATUS]
  - å‹: è¨˜äº‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [ArticleStatus] [ARTICLE_STATUS]
  - èª¬æ˜: è¨˜äº‹ã®å…¬é–‹çŠ¶æ…‹
- è‘—è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [AuthorRef] [AUTHOR_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: è¨˜äº‹ã®è‘—è€…
  - é–¢é€£: ãƒ¦ãƒ¼ã‚¶ãƒ¼ [User] â†’ è¨˜äº‹ [Article]ï¼ˆ1..*ï¼‰
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ [Metadata] [METADATA]
  - å‹: è¨˜äº‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ [ArticleMetadata] [ARTICLE_METADATA]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: è¨˜äº‹ã®ä»˜åŠ æƒ…å ±

ä¸å¤‰æ¡ä»¶:
- å…¬é–‹å¾Œã¯ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚«ãƒ†ã‚´ãƒªã®å¤‰æ›´ã«åˆ¶é™
- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿è¨˜äº‹ã¯ç·¨é›†ä¸å¯

æŒ¯ã‚‹èˆã„:
- è¨˜äº‹å…¬é–‹ [PublishArticle] [PUBLISH_ARTICLE]
  - ç›®çš„: è¨˜äº‹ã‚’å…¬é–‹çŠ¶æ…‹ã«ã™ã‚‹
  - å…¥åŠ›: ãªã—
  - å‡ºåŠ›: å…¬é–‹çµæœ
  - äº‹å‰æ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=ä¸‹æ›¸ã
  - äº‹å¾Œæ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=å…¬é–‹ã€å…¬é–‹æ—¥æ™‚è¨­å®š

#### ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
- è¨˜äº‹å…¬é–‹æ¸ˆã¿ [ArticlePublished] [ARTICLE_PUBLISHED]ï¼šè¨˜äº‹å…¬é–‹æ™‚
- è¨˜äº‹æ›´æ–°æ¸ˆã¿ [ArticleUpdated] [ARTICLE_UPDATED]ï¼šè¨˜äº‹æ›´æ–°æ™‚

#### é›†ç´„ãƒ«ãƒ¼ãƒˆ
ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯è¨˜äº‹é›†ç´„ã®ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

### ãƒªãƒ“ã‚¸ãƒ§ãƒ³ [Revision] [REVISION]
èª¬æ˜: è¨˜äº‹ã®å¤‰æ›´å±¥æ­´ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- ãƒªãƒ“ã‚¸ãƒ§ãƒ³ID [RevisionId] [REVISION_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®ä¸€æ„è­˜åˆ¥å­
- è¨˜äº‹ID [ArticleId] [ARTICLE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: æ‰€å±ã™ã‚‹è¨˜äº‹
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå· [Version] [VERSION]
  - å‹: INTEGER [INTEGER] [INTEGER]
  - èª¬æ˜: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ï¼ˆé€£ç•ªï¼‰
- å†…å®¹ [Content] [CONTENT]
  - å‹: MARKDOWN [MARKDOWN] [MARKDOWN]
  - èª¬æ˜: ãã®æ™‚ç‚¹ã®è¨˜äº‹å†…å®¹
- å¤‰æ›´è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [EditorRef] [EDITOR_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: å¤‰æ›´ã‚’è¡Œã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼
- å¤‰æ›´æ—¥æ™‚ [EditedAt] [EDITED_AT]
  - å‹: TIMESTAMP [TIMESTAMP] [TIMESTAMP]
  - èª¬æ˜: å¤‰æ›´æ—¥æ™‚

### ã‚³ãƒ¡ãƒ³ãƒˆ [Comment] [COMMENT]
èª¬æ˜: è¨˜äº‹ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- ã‚³ãƒ¡ãƒ³ãƒˆID [CommentId] [COMMENT_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ã‚³ãƒ¡ãƒ³ãƒˆã®ä¸€æ„è­˜åˆ¥å­
- è¨˜äº‹ID [ArticleId] [ARTICLE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: ã‚³ãƒ¡ãƒ³ãƒˆå¯¾è±¡ã®è¨˜äº‹
- å†…å®¹ [Content] [CONTENT]
  - å‹: TEXT [TEXT] [TEXT]
  - èª¬æ˜: ã‚³ãƒ¡ãƒ³ãƒˆæœ¬æ–‡
- æŠ•ç¨¿è€…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [CommenterRef] [COMMENTER_REF]
  - å‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID [UserId] [USER_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿è€…
- æŠ•ç¨¿æ—¥æ™‚ [PostedAt] [POSTED_AT]
  - å‹: TIMESTAMP [TIMESTAMP] [TIMESTAMP]
  - èª¬æ˜: æŠ•ç¨¿æ—¥æ™‚

## å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰

### ã‚¿ã‚°ãƒªã‚¹ãƒˆ [TagList] [TAG_LIST]
- å®šç¾©: è¨˜äº‹ã«ä»˜ä¸ã•ã‚Œã‚‹ã‚¿ã‚°ã®é›†åˆ
- å±æ€§:
  - ã‚¿ã‚° [tags] [TAGS]: STRING_50ã®é…åˆ—
- åˆ¶ç´„: æœ€å¤§10å€‹ã€é‡è¤‡ä¸å¯ã€å°æ–‡å­—ã®ã¿
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: è¨˜äº‹ [Article]
- ä¾‹: ["react", "typescript", "best-practice"]

### è¨˜äº‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ [ArticleMetadata] [ARTICLE_METADATA]
- å®šç¾©: è¨˜äº‹ã®ä»˜åŠ æƒ…å ±
- å±æ€§:
  - é–²è¦§æ•° [viewCount] [VIEW_COUNT]: INTEGER
  - ã„ã„ã­æ•° [likeCount] [LIKE_COUNT]: INTEGER
  - æœ€çµ‚æ›´æ–°æ—¥ [lastUpdated] [LAST_UPDATED]: TIMESTAMP
  - å…¬é–‹æ—¥ [publishedAt] [PUBLISHED_AT]: TIMESTAMP
  - æ¨å®šèª­äº†æ™‚é–“ [readingTime] [READING_TIME]: INTEGERï¼ˆåˆ†ï¼‰
- åˆ¶ç´„: ã™ã¹ã¦0ä»¥ä¸Šã®å€¤
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: è¨˜äº‹ [Article]

### æ¤œç´¢ã‚¯ã‚¨ãƒª [SearchQuery] [SEARCH_QUERY]
- å®šç¾©: è¨˜äº‹æ¤œç´¢ã®æ¡ä»¶
- å±æ€§:
  - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ [keywords] [KEYWORDS]: STRING_255
  - ã‚«ãƒ†ã‚´ãƒª [categories] [CATEGORIES]: çŸ¥è­˜ã‚«ãƒ†ã‚´ãƒªã®é…åˆ—
  - ã‚¿ã‚° [tags] [TAGS]: STRING_50ã®é…åˆ—
  - æœŸé–“ [dateRange] [DATE_RANGE]: æ—¥ä»˜ç¯„å›²
- åˆ¶ç´„: å°‘ãªãã¨ã‚‚1ã¤ã®æ¡ä»¶ãŒå¿…è¦
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: ãªã—ï¼ˆæ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ç”¨ï¼‰

## é›†ç´„ï¼ˆAggregatesï¼‰

### è¨˜äº‹é›†ç´„ [ArticleAggregate] [ARTICLE_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: è¨˜äº‹ [Article]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: 
  - ãƒªãƒ“ã‚¸ãƒ§ãƒ³ [Revision]ï¼šè¨˜äº‹ã®å¤‰æ›´å±¥æ­´ï¼ˆ0..*ï¼‰
  - ã‚³ãƒ¡ãƒ³ãƒˆ [Comment]ï¼šè¨˜äº‹ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆ0..*ï¼‰
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - ã‚¿ã‚°ãƒªã‚¹ãƒˆ [TagList]ï¼šè¨˜äº‹ã®ã‚¿ã‚°
  - è¨˜äº‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ [ArticleMetadata]ï¼šè¨˜äº‹ã®çµ±è¨ˆæƒ…å ±
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: è¨˜äº‹æœ¬ä½“ã®æ›´æ–°ã¯å˜ç‹¬ã€å±¥æ­´ã¯åˆ¥ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- **ä¸å¤‰æ¡ä»¶**: 
  - å…¬é–‹è¨˜äº‹ã¯å¿…ãš1ã¤ä»¥ä¸Šã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æŒã¤
  - ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã¯é€£ç¶š
  - å‰Šé™¤æ¸ˆã¿è¨˜äº‹ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ä¸å¯
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - é›†ç´„å¤–ã‹ã‚‰ã¯è¨˜äº‹IDã®ã¿ã§å‚ç…§
  - ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã¨ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯ç¦æ­¢

### FAQé›†ç´„ [FAQAggregate] [FAQ_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: FAQ [FAQ]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: ãªã—
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - è©•ä¾¡çµ±è¨ˆ [RatingStats]ï¼šè©•ä¾¡ã®é›†è¨ˆæƒ…å ±
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: FAQå˜ä½“ã§å®Œçµ
- **ä¸å¤‰æ¡ä»¶**: 
  - è³ªå•ã¨å›ç­”ã¯å¿…é ˆ
  - å…¬é–‹å¾Œã®è³ªå•æ–‡å¤‰æ›´ä¸å¯
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - FAQIDã®ã¿ã§å‚ç…§

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹

### è¨˜äº‹æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ [ArticleSearchService] [ARTICLE_SEARCH_SERVICE]
è¨˜äº‹ã®å…¨æ–‡æ¤œç´¢ã¨é–¢é€£è¨˜äº‹ã®æ¨è–¦ã‚’è¡Œã†ã‚µãƒ¼ãƒ“ã‚¹

#### æä¾›æ©Ÿèƒ½
- å…¨æ–‡æ¤œç´¢ [FullTextSearch] [FULL_TEXT_SEARCH]
  - ç›®çš„: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§è¨˜äº‹ã‚’æ¤œç´¢
  - å…¥åŠ›: æ¤œç´¢ã‚¯ã‚¨ãƒª
  - å‡ºåŠ›: è¨˜äº‹ãƒªã‚¹ãƒˆï¼ˆã‚¹ã‚³ã‚¢é †ï¼‰
  - åˆ¶ç´„: å…¬é–‹è¨˜äº‹ã®ã¿å¯¾è±¡

- é–¢é€£è¨˜äº‹æ¨è–¦ [RecommendRelated] [RECOMMEND_RELATED]
  - ç›®çš„: é¡ä¼¼è¨˜äº‹ã‚’æ¨è–¦
  - å…¥åŠ›: è¨˜äº‹ID
  - å‡ºåŠ›: é–¢é€£è¨˜äº‹ãƒªã‚¹ãƒˆ
  - åˆ¶ç´„: åŒä¸€ã‚«ãƒ†ã‚´ãƒªå„ªå…ˆ

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ

### è¨˜äº‹å…¬é–‹æ¸ˆã¿ [ArticlePublished] [ARTICLE_PUBLISHED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è¨˜äº‹ãŒå…¬é–‹ã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - è¨˜äº‹ID [articleId]: UUID
  - ã‚¿ã‚¤ãƒˆãƒ« [title]: STRING_255
  - è‘—è€…ID [authorId]: UUID
  - ã‚«ãƒ†ã‚´ãƒª [category]: çŸ¥è­˜ã‚«ãƒ†ã‚´ãƒª

### è¨˜äº‹è©•ä¾¡æ¸ˆã¿ [ArticleRated] [ARTICLE_RATED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è¨˜äº‹ãŒè©•ä¾¡ã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - è¨˜äº‹ID [articleId]: UUID
  - è©•ä¾¡è€…ID [raterId]: UUID
  - è©•ä¾¡ [rating]: è©•ä¾¡ã‚¿ã‚¤ãƒ—

## ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«

### è¨˜äº‹ç®¡ç†ãƒ«ãƒ¼ãƒ«
1. **å…¬é–‹æ¨©é™**: ä¸‹æ›¸ãã¯è‘—è€…ã®ã¿é–²è¦§å¯èƒ½
2. **ç·¨é›†æ¨©é™**: è‘—è€…ã¨ç®¡ç†è€…ã®ã¿ç·¨é›†å¯èƒ½
3. **ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¡ä»¶**: 6ãƒ¶æœˆé–“æ›´æ–°ãªã—ã§è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

### ã‚³ãƒ¡ãƒ³ãƒˆãƒ«ãƒ¼ãƒ«
1. **æŠ•ç¨¿åˆ¶é™**: å…¬é–‹è¨˜äº‹ã®ã¿ã‚³ãƒ¡ãƒ³ãƒˆå¯èƒ½
2. **ç·¨é›†æœŸé™**: æŠ•ç¨¿å¾Œ30åˆ†ä»¥å†…ã®ã¿ç·¨é›†å¯èƒ½
3. **å‰Šé™¤æ¨©é™**: æŠ•ç¨¿è€…ã¨ç®¡ç†è€…ã®ã¿å‰Šé™¤å¯èƒ½

### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- 1001: æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼
- 1002: è¨˜äº‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¨ãƒ©ãƒ¼
- 2001: ã‚¿ã‚°æ•°è¶…éã‚¨ãƒ©ãƒ¼

## ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### è¨˜äº‹ãƒªãƒã‚¸ãƒˆãƒª [ArticleRepository] [ARTICLE_REPOSITORY]
é›†ç´„: è¨˜äº‹é›†ç´„ [ArticleAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): è¨˜äº‹ [Article]
- save(article: è¨˜äº‹): void
- delete(id: UUID): void

æ¤œç´¢æ“ä½œ:
- findByCategory(category: çŸ¥è­˜ã‚«ãƒ†ã‚´ãƒª): è¨˜äº‹[]
- findByTags(tags: string[]): è¨˜äº‹[]
- findPublishedByAuthor(authorId: UUID): è¨˜äº‹[]

## DDDãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- [x] ä¸€æ„è­˜åˆ¥å­ã‚’æŒã¤
- [x] ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’æŒã¤
- [x] ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚€
- [x] å¿…ãšä½•ã‚‰ã‹ã®é›†ç´„ã«å±ã—ã¦ã„ã‚‹

### å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- [x] ä¸å¤‰æ€§ã‚’ä¿ã¤
- [x] è­˜åˆ¥å­ã‚’æŒãŸãªã„
- [x] ç­‰ä¾¡æ€§ã§æ¯”è¼ƒã•ã‚Œã‚‹
- [x] ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæ˜ç¢º

### é›†ç´„
- [x] é›†ç´„ãƒ«ãƒ¼ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•ŒãŒæ˜ç¢º
- [x] ä¸å¤‰æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åŒ…å«ã—ã¦ã„ã‚‹
- [x] å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é›†ç´„ãƒ«ãƒ¼ãƒˆçµŒç”±ã®ã¿`

    fs.writeFileSync(
      path.join(domainLangDir, 'knowledge-cocreation-v2.md'),
      knowledgeDomainLanguage
    )
    
    await updateService('knowledge-cocreation', knowledgeDomainLanguage)
    
    // 4. åç›Šæœ€é©åŒ–ã‚µãƒ¼ãƒ“ã‚¹
    const revenueDomainLanguage = `# ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èª: è²¡å‹™ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0  
**æ›´æ–°æ—¥**: 2025-01-29

## ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚è¦
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åç›Šæ€§ã‚’è¿½è·¡ã—ã€ã‚³ã‚¹ãƒˆã‚’æœ€é©åŒ–ã™ã‚‹ã“ã¨ã§ã€çµ„ç¹”ã®è²¡å‹™å¥å…¨æ€§ã‚’ç¶­æŒãƒ»å‘ä¸Šã•ã›ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³

## ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªå®šç¾©

### åŸºæœ¬å‹å®šç¾©
\`\`\`
UUID: ä¸€æ„è­˜åˆ¥å­ï¼ˆ36æ–‡å­—ï¼‰
STRING_50: æœ€å¤§50æ–‡å­—ã®æ–‡å­—åˆ—
STRING_100: æœ€å¤§100æ–‡å­—ã®æ–‡å­—åˆ—
STRING_255: æœ€å¤§255æ–‡å­—ã®æ–‡å­—åˆ—
TEXT: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆï¼ˆåˆ¶é™ãªã—ï¼‰
DATE: æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
TIMESTAMP: æ—¥æ™‚ï¼ˆISO8601å½¢å¼ï¼‰
DECIMAL: å°æ•°ç‚¹æ•°å€¤
INTEGER: æ•´æ•°
BOOLEAN: çœŸå½å€¤ï¼ˆtrue/falseï¼‰
ENUM: åˆ—æŒ™å‹
MONEY: é‡‘é¡ï¼ˆé€šè²¨å˜ä½ä»˜ãï¼‰
\`\`\`

### ã‚«ã‚¹ã‚¿ãƒ å‹å®šç¾©
\`\`\`
è«‹æ±‚æ›¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: è«‹æ±‚æ›¸ã®çŠ¶æ…‹ (åŸºæœ¬å‹: ENUM)
  - draft: ä¸‹æ›¸ã
  - sent: é€ä»˜æ¸ˆã¿
  - paid: æ”¯æ‰•æ¸ˆã¿
  - overdue: æ”¯æ‰•æœŸé™è¶…é
  - cancelled: ã‚­ãƒ£ãƒ³ã‚»ãƒ«

æ”¯æ‰•æ¡ä»¶: æ”¯æ‰•ã„ã®æ¡ä»¶ (åŸºæœ¬å‹: ENUM)
  - net_30: 30æ—¥ä»¥å†…
  - net_60: 60æ—¥ä»¥å†…
  - net_90: 90æ—¥ä»¥å†…
  - immediate: å³æ™‚
  - milestone: ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æ‰•ã„

è²»ç”¨ã‚«ãƒ†ã‚´ãƒª: è²»ç”¨ã®åˆ†é¡ (åŸºæœ¬å‹: ENUM)
  - labor: äººä»¶è²»
  - travel: æ—…è²»äº¤é€šè²»
  - equipment: æ©Ÿå™¨ãƒ»è¨­å‚™è²»
  - software: ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è²»
  - consulting: å¤–éƒ¨ã‚³ãƒ³ã‚µãƒ«è²»
  - other: ãã®ä»–
\`\`\`

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntitiesï¼‰

### è«‹æ±‚æ›¸ [Invoice] [INVOICE]
èª¬æ˜: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®è«‹æ±‚ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- è«‹æ±‚æ›¸ID [InvoiceId] [INVOICE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: è«‹æ±‚æ›¸ã®ä¸€æ„è­˜åˆ¥å­
- è«‹æ±‚æ›¸ç•ªå· [InvoiceNumber] [INVOICE_NUMBER]
  - å‹: STRING_50 [STRING_50] [STRING_50]
  - èª¬æ˜: è«‹æ±‚æ›¸ã®ç®¡ç†ç•ªå·
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [ProjectRef] [PROJECT_REF]
  - å‹: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID [ProjectId] [PROJECT_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: è«‹æ±‚å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
  - é–¢é€£: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ [Project] â†’ è«‹æ±‚æ›¸ [Invoice]ï¼ˆ1..*ï¼‰
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [ClientRef] [CLIENT_REF]
  - å‹: çµ„ç¹”ID [OrganizationId] [ORGANIZATION_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: è«‹æ±‚å…ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
  - é–¢é€£: çµ„ç¹” [Organization] â†’ è«‹æ±‚æ›¸ [Invoice]ï¼ˆ1..*ï¼‰
- è«‹æ±‚æœŸé–“ [BillingPeriod] [BILLING_PERIOD]
  - å‹: æœŸé–“ [Period] [PERIOD]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: è«‹æ±‚å¯¾è±¡æœŸé–“
- è«‹æ±‚é‡‘é¡ [Amount] [AMOUNT]
  - å‹: é‡‘é¡ [Money] [MONEY]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: è«‹æ±‚ç·é¡
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [Status] [STATUS]
  - å‹: è«‹æ±‚æ›¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [InvoiceStatus] [INVOICE_STATUS]
  - èª¬æ˜: è«‹æ±‚æ›¸ã®çŠ¶æ…‹
- æ”¯æ‰•æ¡ä»¶ [PaymentTerms] [PAYMENT_TERMS]
  - å‹: æ”¯æ‰•æ¡ä»¶ [PaymentTerms] [PAYMENT_TERMS]
  - èª¬æ˜: æ”¯æ‰•ã„ã®æ¡ä»¶
- ç™ºè¡Œæ—¥ [IssuedDate] [ISSUED_DATE]
  - å‹: DATE [DATE] [DATE]
  - èª¬æ˜: è«‹æ±‚æ›¸ç™ºè¡Œæ—¥
- æ”¯æ‰•æœŸé™ [DueDate] [DUE_DATE]
  - å‹: DATE [DATE] [DATE]
  - èª¬æ˜: æ”¯æ‰•æœŸé™æ—¥

ä¸å¤‰æ¡ä»¶:
- ç™ºè¡Œå¾Œã®é‡‘é¡å¤‰æ›´ä¸å¯
- æ”¯æ‰•æ¸ˆã¿è«‹æ±‚æ›¸ã®ç·¨é›†ä¸å¯

æŒ¯ã‚‹èˆã„:
- è«‹æ±‚æ›¸ç™ºè¡Œ [IssueInvoice] [ISSUE_INVOICE]
  - ç›®çš„: è«‹æ±‚æ›¸ã‚’æ­£å¼ç™ºè¡Œã™ã‚‹
  - å…¥åŠ›: ãªã—
  - å‡ºåŠ›: ç™ºè¡Œçµæœ
  - äº‹å‰æ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=ä¸‹æ›¸ã
  - äº‹å¾Œæ¡ä»¶: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹=é€ä»˜æ¸ˆã¿ã€ç™ºè¡Œæ—¥è¨­å®š

#### ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
- è«‹æ±‚æ›¸ç™ºè¡Œæ¸ˆã¿ [InvoiceIssued] [INVOICE_ISSUED]ï¼šè«‹æ±‚æ›¸ç™ºè¡Œæ™‚
- æ”¯æ‰•å®Œäº† [PaymentCompleted] [PAYMENT_COMPLETED]ï¼šæ”¯æ‰•ã„å®Œäº†æ™‚

#### é›†ç´„ãƒ«ãƒ¼ãƒˆ
ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯è«‹æ±‚æ›¸é›†ç´„ã®ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

### è«‹æ±‚æ˜ç´° [InvoiceItem] [INVOICE_ITEM]
èª¬æ˜: è«‹æ±‚æ›¸ã®æ˜ç´°é …ç›®ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- æ˜ç´°ID [ItemId] [ITEM_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: æ˜ç´°ã®ä¸€æ„è­˜åˆ¥å­
- è«‹æ±‚æ›¸ID [InvoiceId] [INVOICE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: æ‰€å±ã™ã‚‹è«‹æ±‚æ›¸
- é …ç›®å [ItemName] [ITEM_NAME]
  - å‹: STRING_255 [STRING_255] [STRING_255]
  - èª¬æ˜: è«‹æ±‚é …ç›®ã®åç§°
- æ•°é‡ [Quantity] [QUANTITY]
  - å‹: DECIMAL [DECIMAL] [DECIMAL]
  - èª¬æ˜: æ•°é‡
- å˜ä¾¡ [UnitPrice] [UNIT_PRICE]
  - å‹: é‡‘é¡ [Money] [MONEY]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: å˜ä½ã‚ãŸã‚Šä¾¡æ ¼
- å°è¨ˆ [Subtotal] [SUBTOTAL]
  - å‹: é‡‘é¡ [Money] [MONEY]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: æ˜ç´°ã®å°è¨ˆ

### è²»ç”¨ [Expense] [EXPENSE]
èª¬æ˜: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£è²»ç”¨ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

å±æ€§:
- è²»ç”¨ID [ExpenseId] [EXPENSE_ID]
  - å‹: UUID [UUID] [UUID_FORMAT]
  - èª¬æ˜: è²»ç”¨ã®ä¸€æ„è­˜åˆ¥å­
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ [ProjectRef] [PROJECT_REF]
  - å‹: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID [ProjectId] [PROJECT_ID]ï¼ˆå‚ç…§ï¼‰
  - èª¬æ˜: é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
  - é–¢é€£: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ [Project] â†’ è²»ç”¨ [Expense]ï¼ˆ1..*ï¼‰
- ã‚«ãƒ†ã‚´ãƒª [Category] [CATEGORY]
  - å‹: è²»ç”¨ã‚«ãƒ†ã‚´ãƒª [ExpenseCategory] [EXPENSE_CATEGORY]
  - èª¬æ˜: è²»ç”¨ã®åˆ†é¡
- é‡‘é¡ [Amount] [AMOUNT]
  - å‹: é‡‘é¡ [Money] [MONEY]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: è²»ç”¨é‡‘é¡
- ç™ºç”Ÿæ—¥ [IncurredDate] [INCURRED_DATE]
  - å‹: DATE [DATE] [DATE]
  - èª¬æ˜: è²»ç”¨ç™ºç”Ÿæ—¥
- èª¬æ˜ [Description] [DESCRIPTION]
  - å‹: TEXT [TEXT] [TEXT]
  - èª¬æ˜: è²»ç”¨ã®è©³ç´°èª¬æ˜
- æ‰¿èªçŠ¶æ…‹ [ApprovalStatus] [APPROVAL_STATUS]
  - å‹: æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [ApprovalStatus] [APPROVAL_STATUS]ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - èª¬æ˜: æ‰¿èªã®çŠ¶æ…‹

#### é›†ç´„ãƒ«ãƒ¼ãƒˆ
ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯è²»ç”¨é›†ç´„ã®ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

## å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰

### é‡‘é¡ [Money] [MONEY]
- å®šç¾©: é€šè²¨ã‚’å«ã‚€é‡‘éŠ­ä¾¡å€¤
- å±æ€§:
  - é‡‘é¡ [amount] [AMOUNT]: DECIMAL
  - é€šè²¨ [currency] [CURRENCY]: STRING_3ï¼ˆJPY, USDç­‰ï¼‰
- åˆ¶ç´„: é‡‘é¡ã¯0ä»¥ä¸Šã€é€šè²¨ã¯æœ‰åŠ¹ãªISO 4217ã‚³ãƒ¼ãƒ‰
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: è«‹æ±‚æ›¸ [Invoice]ã€è«‹æ±‚æ˜ç´° [InvoiceItem]ã€è²»ç”¨ [Expense]
- ä¾‹: 1,000,000 JPY

### æœŸé–“ [Period] [PERIOD]
- å®šç¾©: é–‹å§‹æ—¥ã¨çµ‚äº†æ—¥ã§è¡¨ã•ã‚Œã‚‹æœŸé–“
- å±æ€§:
  - é–‹å§‹æ—¥ [startDate] [START_DATE]: DATE
  - çµ‚äº†æ—¥ [endDate] [END_DATE]: DATE
- åˆ¶ç´„: é–‹å§‹æ—¥ã¯çµ‚äº†æ—¥ä»¥å‰
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: è«‹æ±‚æ›¸ [Invoice]ã€åç›Šäºˆæ¸¬ [RevenueForecast]
- ä¾‹: 2025-01-01 ã€œ 2025-01-31

### æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [ApprovalStatus] [APPROVAL_STATUS]
- å®šç¾©: æ‰¿èªã®çŠ¶æ…‹ã¨å±¥æ­´
- å±æ€§:
  - çŠ¶æ…‹ [status] [STATUS]: ENUMï¼ˆpending, approved, rejectedï¼‰
  - æ‰¿èªè€… [approver] [APPROVER]: STRING_100
  - æ‰¿èªæ—¥æ™‚ [approvedAt] [APPROVED_AT]: TIMESTAMP
  - ã‚³ãƒ¡ãƒ³ãƒˆ [comment] [COMMENT]: STRING_500ï¼ˆä»»æ„ï¼‰
- åˆ¶ç´„: æ‰¿èªæ¸ˆã¿ã¯å¤‰æ›´ä¸å¯
- ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£: è²»ç”¨ [Expense]

## é›†ç´„ï¼ˆAggregatesï¼‰

### è«‹æ±‚æ›¸é›†ç´„ [InvoiceAggregate] [INVOICE_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: è«‹æ±‚æ›¸ [Invoice]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: 
  - è«‹æ±‚æ˜ç´° [InvoiceItem]ï¼šè«‹æ±‚æ›¸ã®æ˜ç´°é …ç›®ï¼ˆ1..*ï¼‰
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - é‡‘é¡ [Money]ï¼šè«‹æ±‚é‡‘é¡ã€æ˜ç´°é‡‘é¡ã§ä½¿ç”¨
  - æœŸé–“ [Period]ï¼šè«‹æ±‚å¯¾è±¡æœŸé–“ã§ä½¿ç”¨
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: è«‹æ±‚æ›¸ã¨æ˜ç´°ã¯åŒä¸€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- **ä¸å¤‰æ¡ä»¶**: 
  - è«‹æ±‚æ›¸ã®ç·é¡ã¯æ˜ç´°ã®åˆè¨ˆã¨ä¸€è‡´
  - ç™ºè¡Œæ¸ˆã¿è«‹æ±‚æ›¸ã¯é‡‘é¡å¤‰æ›´ä¸å¯
  - æ˜ç´°ã¯1ä»¶ä»¥ä¸Šå¿…è¦
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - é›†ç´„å¤–ã‹ã‚‰ã¯è«‹æ±‚æ›¸IDã®ã¿ã§å‚ç…§
  - è«‹æ±‚æ˜ç´°ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯ç¦æ­¢

### è²»ç”¨é›†ç´„ [ExpenseAggregate] [EXPENSE_AGGREGATE]
- **é›†ç´„ãƒ«ãƒ¼ãƒˆ**: è²»ç”¨ [Expense]
- **å«ã¾ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: ãªã—
- **å«ã¾ã‚Œã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**:
  - é‡‘é¡ [Money]ï¼šè²»ç”¨é‡‘é¡ã§ä½¿ç”¨
  - æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ [ApprovalStatus]ï¼šæ‰¿èªçŠ¶æ…‹ã§ä½¿ç”¨
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œ**: è²»ç”¨å˜ä½“ã§å®Œçµ
- **ä¸å¤‰æ¡ä»¶**: 
  - æ‰¿èªæ¸ˆã¿è²»ç”¨ã¯ç·¨é›†ä¸å¯
  - é‡‘é¡ã¯0ä»¥ä¸Š
- **å¤–éƒ¨å‚ç…§ãƒ«ãƒ¼ãƒ«**:
  - è²»ç”¨IDã®ã¿ã§å‚ç…§

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹

### åç›Šæ€§åˆ†æã‚µãƒ¼ãƒ“ã‚¹ [ProfitabilityAnalysisService] [PROFITABILITY_ANALYSIS_SERVICE]
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åç›Šæ€§ã‚’åˆ†æã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹

#### æä¾›æ©Ÿèƒ½
- ç²—åˆ©ç›Šè¨ˆç®— [CalculateGrossProfit] [CALCULATE_GROSS_PROFIT]
  - ç›®çš„: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç²—åˆ©ç›Šã‚’è¨ˆç®—
  - å…¥åŠ›: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã€æœŸé–“
  - å‡ºåŠ›: ç²—åˆ©ç›Šãƒ¬ãƒãƒ¼ãƒˆ
  - åˆ¶ç´„: ç¢ºå®šã—ãŸè«‹æ±‚æ›¸ã¨è²»ç”¨ã®ã¿å¯¾è±¡

- åç›Šäºˆæ¸¬ [ForecastRevenue] [FORECAST_REVENUE]
  - ç›®çš„: å°†æ¥ã®åç›Šã‚’äºˆæ¸¬
  - å…¥åŠ›: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã€äºˆæ¸¬æœŸé–“
  - å‡ºåŠ›: åç›Šäºˆæ¸¬ãƒ¬ãƒãƒ¼ãƒˆ
  - åˆ¶ç´„: éå»ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãäºˆæ¸¬

## ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ

### è«‹æ±‚æ›¸ç™ºè¡Œæ¸ˆã¿ [InvoiceIssued] [INVOICE_ISSUED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è«‹æ±‚æ›¸ãŒç™ºè¡Œã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - è«‹æ±‚æ›¸ID [invoiceId]: UUID
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID [projectId]: UUID
  - é‡‘é¡ [amount]: Money
  - ç™ºè¡Œæ—¥ [issuedDate]: DATE

### æ”¯æ‰•å®Œäº† [PaymentCompleted] [PAYMENT_COMPLETED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ”¯æ‰•ã„ãŒå®Œäº†ã—ãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - è«‹æ±‚æ›¸ID [invoiceId]: UUID
  - æ”¯æ‰•é‡‘é¡ [paidAmount]: Money
  - æ”¯æ‰•æ—¥ [paidDate]: DATE

### è²»ç”¨æ‰¿èªæ¸ˆã¿ [ExpenseApproved] [EXPENSE_APPROVED]
- **ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è²»ç”¨ãŒæ‰¿èªã•ã‚ŒãŸæ™‚
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: 
  - è²»ç”¨ID [expenseId]: UUID
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID [projectId]: UUID
  - é‡‘é¡ [amount]: Money

## ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«

### è«‹æ±‚æ›¸ãƒ«ãƒ¼ãƒ«
1. **æœ€å°è«‹æ±‚é¡**: 10,000å††ä»¥ä¸Šã‹ã‚‰è«‹æ±‚å¯èƒ½
2. **è«‹æ±‚ã‚µã‚¤ã‚¯ãƒ«**: æœˆæ¬¡è«‹æ±‚ãŒåŸºæœ¬
3. **æ”¯æ‰•æœŸé™**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è«‹æ±‚æ›¸ç™ºè¡Œã‹ã‚‰30æ—¥

### è²»ç”¨ç®¡ç†ãƒ«ãƒ¼ãƒ«
1. **æ‰¿èªé™åº¦é¡**: 10ä¸‡å††ä»¥ä¸Šã¯éƒ¨é–€é•·æ‰¿èªå¿…é ˆ
2. **çµŒè²»ç²¾ç®—æœŸé™**: ç™ºç”Ÿã‹ã‚‰1ãƒ¶æœˆä»¥å†…
3. **é ˜åæ›¸å¿…é ˆ**: 5,000å††ä»¥ä¸Šã¯é ˜åæ›¸æ·»ä»˜å¿…é ˆ

### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- 1001: æœ€å°è«‹æ±‚é¡æœªæº€ã‚¨ãƒ©ãƒ¼
- 1002: æ‰¿èªæ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼
- 1003: ç²¾ç®—æœŸé™è¶…éã‚¨ãƒ©ãƒ¼

## ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### è«‹æ±‚æ›¸ãƒªãƒã‚¸ãƒˆãƒª [InvoiceRepository] [INVOICE_REPOSITORY]
é›†ç´„: è«‹æ±‚æ›¸é›†ç´„ [InvoiceAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): è«‹æ±‚æ›¸ [Invoice]
- save(invoice: è«‹æ±‚æ›¸): void

æ¤œç´¢æ“ä½œ:
- findByProject(projectId: UUID): è«‹æ±‚æ›¸[]
- findOverdue(): è«‹æ±‚æ›¸[]
- findByStatus(status: è«‹æ±‚æ›¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹): è«‹æ±‚æ›¸[]

### è²»ç”¨ãƒªãƒã‚¸ãƒˆãƒª [ExpenseRepository] [EXPENSE_REPOSITORY]
é›†ç´„: è²»ç”¨é›†ç´„ [ExpenseAggregate]

åŸºæœ¬æ“ä½œ:
- findById(id: UUID): è²»ç”¨ [Expense]
- save(expense: è²»ç”¨): void

æ¤œç´¢æ“ä½œ:
- findByProject(projectId: UUID): è²»ç”¨[]
- findPendingApproval(): è²»ç”¨[]

## DDDãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- [x] ä¸€æ„è­˜åˆ¥å­ã‚’æŒã¤
- [x] ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’æŒã¤
- [x] ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚€
- [x] å¿…ãšä½•ã‚‰ã‹ã®é›†ç´„ã«å±ã—ã¦ã„ã‚‹

### å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- [x] ä¸å¤‰æ€§ã‚’ä¿ã¤
- [x] è­˜åˆ¥å­ã‚’æŒãŸãªã„
- [x] ç­‰ä¾¡æ€§ã§æ¯”è¼ƒã•ã‚Œã‚‹
- [x] ä½¿ç”¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæ˜ç¢º

### é›†ç´„
- [x] é›†ç´„ãƒ«ãƒ¼ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•ŒãŒæ˜ç¢º
- [x] ä¸å¤‰æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åŒ…å«ã—ã¦ã„ã‚‹
- [x] å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é›†ç´„ãƒ«ãƒ¼ãƒˆçµŒç”±ã®ã¿`

    fs.writeFileSync(
      path.join(domainLangDir, 'revenue-optimization-v2.md'),
      revenueDomainLanguage
    )
    
    await updateService('revenue-optimization', revenueDomainLanguage)
    
    console.log('\nâœ¨ All services updated with aggregate definitions successfully!')
    
    // ç¢ºèª
    console.log('\nğŸ“Š ç¢ºèªä¸­...')
    const updatedServices = await prisma.services.findMany({
      select: {
        name: true,
        domainLanguageDefinition: true
      }
    })
    
    console.log('\nâœ… ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆå®šç¾©ã®çŠ¶æ³:')
    updatedServices.forEach(service => {
      const hasAggregates = service.domainLanguageDefinition?.includes('## é›†ç´„ï¼ˆAggregatesï¼‰')
      console.log(`  ${service.name}: ${hasAggregates ? 'âœ“ ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆå®šç¾©ã‚ã‚Š' : 'âœ— ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆå®šç¾©ãªã—'}`)
    })
    
  } catch (_error) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error)
    throw _error
  } finally {
    await prisma.$disconnect()
  }
}

main().catch(console.error)