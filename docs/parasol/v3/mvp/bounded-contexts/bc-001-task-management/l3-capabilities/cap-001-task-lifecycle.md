# L3 Capability定義: cap-001-task-lifecycle

## Capability ID: cap-001-task-lifecycle

### 基本情報
- **Capability名**: タスクライフサイクル管理能力
- **所属BC**: BC-001 タスク管理
- **責任範囲**: タスクの作成から完了までの基本的なライフサイクル管理
- **ビジネス価値**: タスクの効率的な進行により、プロジェクトの成功率向上と工期短縮を実現

### 概要
タスクの作成、割り当て、完了という基本的なライフサイクルを管理し、チームの生産性向上とプロジェクトの確実な進行を支援する能力。プロジェクトの作業を明確で実行可能な単位に分割し、適切な担当者への割り当てから完了確認まで一貫して管理する。

### 能力の詳細

#### 提供する操作
[この能力が提供する操作の一覧]

1. **タスク作成** (op-001-create-task)
   - 説明: 新しいタスクを作成し、基本情報（タイトル、説明、優先度、期限）を設定
   - 頻度: Daily
   - 重要度: High

2. **タスク割り当て** (op-002-assign-task)
   - 説明: 作成されたタスクを適切なチームメンバーに割り当て、実行責任を明確化
   - 頻度: Daily
   - 重要度: High

3. **タスク完了** (op-004-complete-task)
   - 説明: タスクを完了状態にし、成果物を確定して次のフェーズに進める
   - 頻度: Daily
   - 重要度: High

#### ステークホルダー
- **プライマリユーザー**: プロジェクトマネージャー、チームリーダー
- **セカンダリユーザー**: チームメンバー、ステークホルダー
- **受益者**: プロジェクト関係者全体、顧客

#### 前提条件
- プロジェクトが定義され、基本的な計画が存在する
- チームメンバーが明確に定義され、役割が割り当てられている
- タスク管理システムが稼働している

#### 成功条件
- タスクが明確で実行可能な形で定義される
- 適切なメンバーにタスクが割り当てられる
- タスクが期限内に完了される
- 成果物の品質が基準を満たす

### 品質属性

#### パフォーマンス要求
- **応答時間**: タスク作成・割り当て・完了は各2秒以内
- **スループット**: 1人のユーザーが1日に50件のタスク操作を実行可能
- **可用性**: 99.5%（営業時間内）

#### セキュリティ要求
- **認証**: プロジェクトメンバーとして認証されたユーザーのみアクセス可能
- **認可**: タスク作成・割り当て権限はPM・TLのみ、完了報告は担当者のみ
- **データ保護**: タスク情報の暗号化保存、監査ログの保持

#### ユーザビリティ要求
- **学習容易性**: 新規ユーザーが30分以内に基本操作を理解
- **効率性**: 1つのタスク操作を3クリック以内で完了
- **エラー耐性**: 入力エラー時の明確なフィードバック提供

### 制約事項

#### 技術的制約
- タスクの同時編集は最大5人まで（競合状態の回避）
- タスク履歴は直近6ヶ月分のみ詳細保持
- 添付ファイルサイズは1タスクあたり50MBまで

#### ビジネス制約
- 一人のユーザーが同時に担当できるアクティブタスクは最大20件
- プロジェクト期間中のタスク総数は1000件まで
- タスクの削除は作成から24時間以内のみ可能

#### 運用制約
- タスク状態の変更はリアルタイムで全関係者に通知
- 重要度「High」のタスクは割り当てから1時間以内に担当者確認必須
- バックアップは日次で実行、復旧時間は4時間以内

### 依存関係

#### 他のCapabilityとの関係
- **依存する能力**: なし（基盤能力として独立）
- **提供する能力**:
  - cap-002-task-collaboration - タスクコラボレーション能力への基盤データ提供
  - cap-003-task-monitoring - タスク監視能力への状態情報提供

#### 外部システムとの関係
- **通知システム**: タスク状態変更時の関係者通知
- **カレンダーシステム**: 期限管理とスケジュール連携
- **ユーザー管理システム**: 割り当て対象メンバーの情報取得

### 実装指針

#### アーキテクチャパターン
- **Domain-Driven Design**: タスクを中心とした集約設計
- **CQRS**: タスク更新コマンドと参照クエリの分離
- **Event Sourcing**: タスク状態変更履歴の完全保持

#### 実装の考慮事項
- タスクエンティティの不変条件を厳密に管理
- 状態遷移の整合性を保証するドメインサービスの実装
- 楽観的ロックによる同時更新制御

#### テスト戦略
- **単体テスト**: ドメインロジックの完全カバレッジ（95%以上）
- **統合テスト**: API経由の操作シナリオテスト
- **受け入れテスト**: ユーザーストーリーベースのE2Eテスト

### メトリクス

#### ビジネスメトリクス
- **タスク完了率**: 95%以上（期限内完了）
- **平均処理時間**: 従来比30%短縮
- **ユーザー満足度**: 4.5/5.0以上（月次アンケート）
- **プロジェクト成功率**: 90%以上（期限・品質・予算達成）

#### 技術メトリクス
- **API応答時間**: 平均1.5秒以下
- **システム可用性**: 99.5%以上
- **エラー率**: 0.1%以下
- **データ整合性**: 100%（状態不整合ゼロ）

### 更新履歴
- 2025-11-05: 初版作成（Issue #199対応、MVP版Phase 2） - Claude

---

## 関連Operation詳細

### op-001-create-task: タスク作成
**責任**: 新しいタスクを定義し、プロジェクトの作業単位として管理可能な状態にする

**主要フロー**:
1. タスク基本情報の入力（タイトル、説明、優先度）
2. 期限とマイルストーンの設定
3. ビジネスルール検証（重複チェック、命名規則確認）
4. タスクエンティティの生成と永続化
5. 関係者への作成通知

### op-002-assign-task: タスク割り当て
**責任**: 作成されたタスクを最適なチームメンバーに割り当て、実行責任を明確化

**主要フロー**:
1. 利用可能メンバーの検索（スキル、負荷、可用性）
2. 割り当て候補の提示とスキルマッチング
3. 割り当て決定と担当者設定
4. 担当者への通知と受諾確認
5. プロジェクト全体の負荷分散確認

### op-004-complete-task: タスク完了
**責任**: タスクを完了状態にし、成果物を確定して品質を保証

**主要フロー**:
1. 完了条件の確認（成果物、品質基準）
2. 実績工数と成果物の登録
3. 完了承認ワークフロー（必要に応じて）
4. 依存タスクの開始可能性チェック
5. プロジェクト進捗への反映

## 実装優先度

この能力は**BC-001 タスク管理**の基盤となる最重要能力のため、**Phase 2の最優先**で実装します。

### 実装順序
1. **op-001-create-task** → タスク作成（基盤）
2. **op-002-assign-task** → タスク割り当て（基盤）
3. **op-004-complete-task** → タスク完了（ライフサイクル完結）

この順序により、タスクの基本的なライフサイクルが段階的に構築され、後続のコラボレーション能力と監視能力の基盤が整います。